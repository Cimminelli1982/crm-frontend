/*! For license information please see main.21a8ce50.js.LICENSE.txt */
"use strict";(self.webpackChunkcontact_dashboard=self.webpackChunkcontact_dashboard||[]).push([[792],{7944:(n,t,e)=>{var r=e(6540),i=e(5338),o=(e(2675),e(9463),e(2259),e(3418),e(3792),e(4782),e(2010),e(2811),e(7495),e(7764),e(2953),e(4423),e(6099),e(8781),e(1699),e(7767)),a=e(4976),c=e(1250),s=e(888),l=(e(8706),e(2062),e(2644));const u=e.p+"static/media/logo.3c3c8e38.jpeg";var d,h,p=e(4848);function f(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}var m=c.Ay.div(d||(d=f(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),g=c.Ay.img(h||(h=f(["\n  height: ",";\n  width: auto;\n  object-fit: contain;\n"])),(function(n){return n.size||"32px"}));const x=function(n){n.isCollapsed;var t=n.size,e=void 0===t?"32px":t;return(0,p.jsx)(m,{children:(0,p.jsx)(g,{src:u,alt:"Cimminelli Logo",size:e})})};var y,b,v,F,w,j,A,_,k,E,C,B,S,O,D,z,I,T,$,P,q,N,R,M,G,W,U,L,Y,K,H;function Z(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function J(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return V(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?V(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}var Q=c.Ay.div(y||(y=Z(["\n  @media (min-width: 768px) {\n    display: none;\n  }\n"]))),X=c.Ay.div(b||(b=Z(["\n  display: ",";\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 998;\n"])),(function(n){return n.$isOpen?"block":"none"})),nn=c.Ay.nav(v||(v=Z(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 80px;\n  background: ",";\n  border-top: 1px solid ",";\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  padding: 8px 16px 20px 16px;\n  z-index: 999;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),tn=c.Ay.button(F||(F=Z(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px 4px;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  flex: 1;\n  max-width: 80px;\n\n  ","\n\n  &:active {\n    transform: scale(0.95);\n  }\n"])),(function(n){return n.$isActive&&"\n    background: ".concat("light"===n.theme?"rgba(59, 130, 246, 0.1)":"rgba(96, 165, 250, 0.15)",";\n  ")})),en=c.Ay.div(w||(w=Z(["\n  color: ",";\n  transition: all 0.2s ease;\n"])),(function(n){return n.$isActive?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#6B7280":"#9CA3AF"})),rn=c.Ay.span(j||(j=Z(["\n  font-size: 11px;\n  font-weight: ",";\n  color: ",";\n  text-align: center;\n  line-height: 1.2;\n"])),(function(n){return n.$isActive?"600":"500"}),(function(n){return n.$isActive?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#6B7280":"#9CA3AF"})),on=c.Ay.nav(A||(A=Z(["\n  display: none;\n\n  @media (min-width: 768px) and (max-width: 1024px) {\n    display: flex;\n    flex-direction: column;\n    position: fixed;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 280px;\n    background: ",";\n    border-right: 1px solid ",";\n    z-index: 100;\n    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);\n  }\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),an=c.Ay.div(_||(_=Z(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 24px;\n  border-bottom: 1px solid ",";\n  min-height: 100px;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),cn=c.Ay.div(k||(k=Z(["\n  flex: 1;\n  padding: 16px;\n  overflow-y: auto;\n"]))),sn=c.Ay.button(E||(E=Z(["\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n  padding: 16px;\n  background: none;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-bottom: 4px;\n  text-align: left;\n\n  ","\n\n  &:hover {\n    background: ",";\n    ","\n  }\n"])),(function(n){return n.$isActive&&"\n    background: ".concat("light"===n.theme?"rgba(59, 130, 246, 0.1)":"rgba(96, 165, 250, 0.15)",";\n  ")}),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return n.$isActive&&"\n      background: ".concat("light"===n.theme?"rgba(59, 130, 246, 0.15)":"rgba(96, 165, 250, 0.2)",";\n    ")})),ln=c.Ay.div(C||(C=Z(["\n  color: ",";\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n"])),(function(n){return n.$isActive?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#6B7280":"#9CA3AF"})),un=c.Ay.div(B||(B=Z(["\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  flex: 1;\n"]))),dn=c.Ay.span(S||(S=Z(["\n  font-size: 15px;\n  font-weight: ",";\n  color: ",";\n"])),(function(n){return n.$isActive?"600":"500"}),(function(n){return n.$isActive?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#111827":"#F9FAFB"})),hn=c.Ay.span(O||(O=Z(["\n  font-size: 13px;\n  color: ",";\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),pn=c.Ay.nav(D||(D=Z(["\n  display: none;\n\n  @media (min-width: 1025px) {\n    display: flex;\n    flex-direction: column;\n    position: fixed;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: ",";\n    background: ",";\n    border-right: 1px solid ",";\n    transition: width 0.3s ease;\n    z-index: 100;\n    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);\n  }\n"])),(function(n){return n.$isCollapsed?"80px":"320px"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),fn=c.Ay.div(z||(z=Z(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24px;\n  border-bottom: 1px solid ",";\n  min-height: 120px;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),mn=c.Ay.div(I||(I=Z(["\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n"]))),gn=c.Ay.div(T||(T=Z(["\n  padding: 20px;\n  border-top: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),xn=c.Ay.button($||($=Z(["\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n  padding: ",";\n  background: none;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-bottom: 6px;\n  text-align: left;\n  position: relative;\n  justify-content: ",";\n\n  ","\n\n  &:hover {\n    background: ",";\n    transform: translateX(2px);\n\n    ","\n  }\n"])),(function(n){return n.$isCollapsed?"16px":"18px"}),(function(n){return n.$isCollapsed?"center":"flex-start"}),(function(n){return n.$isActive&&"\n    background: ".concat("light"===n.theme?"rgba(59, 130, 246, 0.1)":"rgba(96, 165, 250, 0.15)",";\n    border: 1px solid ").concat("light"===n.theme?"rgba(59, 130, 246, 0.2)":"rgba(96, 165, 250, 0.3)",";\n  ")}),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return n.$isActive&&"\n      background: ".concat("light"===n.theme?"rgba(59, 130, 246, 0.15)":"rgba(96, 165, 250, 0.2)",";\n    ")})),yn=c.Ay.div(P||(P=Z(["\n  color: ",";\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n"])),(function(n){return n.$isActive?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#6B7280":"#9CA3AF"})),bn=c.Ay.div(q||(q=Z(["\n  display: flex;\n  flex-direction: column;\n  gap: 3px;\n  flex: 1;\n"]))),vn=c.Ay.span(N||(N=Z(["\n  font-size: 16px;\n  font-weight: ",";\n  color: ",";\n"])),(function(n){return n.$isActive?"600":"500"}),(function(n){return n.$isActive?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#111827":"#F9FAFB"})),Fn=c.Ay.span(R||(R=Z(["\n  font-size: 14px;\n  color: ",";\n  line-height: 1.3;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),wn=(c.Ay.div(M||(M=Z(["\n  font-size: ",";\n  font-weight: 800;\n  color: ",";\n  transition: all 0.3s ease;\n\n  @media (min-width: 768px) and (max-width: 1024px) {\n    font-size: 22px;\n  }\n"])),(function(n){return n.$isCollapsed?"18px":"24px"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),c.Ay.button(G||(G=Z(["\n  background: none;\n  border: 1px solid ",";\n  color: ",";\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  @media (min-width: 768px) and (max-width: 1024px) {\n    display: none;\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#374151":"#F9FAFB"}))),jn=c.Ay.button(W||(W=Z(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n  padding: 12px 16px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 8px;\n  color: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: 500;\n\n  &:hover {\n    background: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#374151":"#F9FAFB"}),(function(n){return"light"===n.theme?"#F3F4F6":"#4B5563"})),An=c.Ay.div(U||(U=Z(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),_n=c.Ay.div(L||(L=Z(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),kn=c.Ay.div(Y||(Y=Z(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),En=c.Ay.div(K||(K=Z(["\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  background: ",";\n  color: white;\n  font-size: 10px;\n  font-weight: 600;\n  padding: 2px 6px;\n  border-radius: 10px;\n  min-width: 18px;\n  height: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid ",";\n"])),(function(n){return n.$isInbox?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#EF4444":"#F87171"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}));c.Ay.span(H||(H=Z(["\n  background: ",";\n  color: white;\n  font-size: 11px;\n  font-weight: 600;\n  padding: 2px 6px;\n  border-radius: 10px;\n  margin-left: 8px;\n  min-width: 20px;\n  height: 20px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n"])),(function(n){return n.$isInbox?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#EF4444":"#F87171"}));const Cn=function(n){var t=n.currentPage,e=void 0===t?"sort":t,i=n.onNavigate,o=n.theme,a=void 0===o?"light":o,c=n.onThemeToggle,s=n.onCollapseChange,u=n.initialCollapsed,d=void 0!==u&&u,h=n.inboxCount,f=void 0===h?0:h,m=n.keepInTouchCount,g=void 0===m?0:m,y=J((0,r.useState)(d),2),b=y[0],v=y[1],F=J((0,r.useState)(!1),2),w=F[0],j=F[1],A=[{id:"sort",label:"Sort",icon:l.s_k,path:"/sort",description:"Manage and organize your contacts",count:f,isInbox:!0},{id:"interactions",label:"Interactions",icon:l.Ohp,path:"/interactions",description:"Recent contact activity"},{id:"search",label:"Search",icon:l.CKj,path:"/search",description:"Find contacts by name, company, or details"},{id:"keep-in-touch",label:"Keep in Touch",icon:l.zd,path:"/keep-in-touch",description:"Follow-up reminders",count:g}],_=function(n){i&&i(n.id,n.path),j(!1)},k=function(){var n=!b;v(n),s&&s(n),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("navCollapseChange",{detail:{collapsed:n}}))};return(0,r.useEffect)((function(){v(d)}),[d]),(0,r.useEffect)((function(){var n=function(n){w&&!n.target.closest(".mobile-nav-container")&&j(!1)};return document.addEventListener("click",n),function(){return document.removeEventListener("click",n)}}),[w]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(Q,{theme:a,className:"mobile-nav-container",children:[(0,p.jsx)(X,{$isOpen:w,onClick:function(){return j(!1)}}),(0,p.jsx)(nn,{theme:a,children:A.map((function(n){var t=n.icon,r=e===n.id;return(0,p.jsxs)(tn,{theme:a,$isActive:r,onClick:function(){return _(n)},children:[(0,p.jsxs)(An,{children:[(0,p.jsx)(en,{theme:a,$isActive:r,children:(0,p.jsx)(t,{size:20})}),n.count>0&&(0,p.jsx)(En,{theme:a,$isActive:r,$isInbox:n.isInbox,children:n.count})]}),(0,p.jsx)(rn,{theme:a,$isActive:r,children:n.label})]},n.id)}))})]}),(0,p.jsxs)(on,{theme:a,children:[(0,p.jsxs)(an,{theme:a,children:[(0,p.jsx)(x,{isCollapsed:!1,size:"60px"}),(0,p.jsx)(wn,{theme:a,onClick:k,children:b?(0,p.jsx)(l.fOo,{size:20}):(0,p.jsx)(l.irw,{size:20})})]}),(0,p.jsx)(cn,{children:A.map((function(n){var t=n.icon,r=e===n.id;return(0,p.jsxs)(sn,{theme:a,$isActive:r,$isCollapsed:b,onClick:function(){return _(n)},title:b?n.description:"",children:[(0,p.jsxs)(_n,{children:[(0,p.jsx)(ln,{theme:a,$isActive:r,children:(0,p.jsx)(t,{size:22})}),n.count>0&&(0,p.jsx)(En,{theme:a,$isActive:r,$isInbox:n.isInbox,children:n.count})]}),!b&&(0,p.jsxs)(un,{children:[(0,p.jsx)(dn,{theme:a,$isActive:r,children:n.label}),(0,p.jsx)(hn,{theme:a,children:n.description})]})]},n.id)}))})]}),(0,p.jsxs)(pn,{theme:a,$isCollapsed:b,children:[(0,p.jsxs)(fn,{theme:a,$isCollapsed:b,children:[(0,p.jsx)(x,{isCollapsed:b,size:b?"24px":"80px"}),(0,p.jsx)(wn,{theme:a,onClick:k,$isCollapsed:b,children:b?(0,p.jsx)(l.fOo,{size:18}):(0,p.jsx)(l.irw,{size:18})})]}),(0,p.jsx)(mn,{children:A.map((function(n){var t=n.icon,r=e===n.id;return(0,p.jsxs)(xn,{theme:a,$isActive:r,$isCollapsed:b,onClick:function(){return _(n)},title:b?"".concat(n.label," - ").concat(n.description):"",children:[(0,p.jsxs)(kn,{children:[(0,p.jsx)(yn,{theme:a,$isActive:r,children:(0,p.jsx)(t,{size:20})}),n.count>0&&b&&(0,p.jsx)(En,{theme:a,$isActive:r,children:n.count})]}),!b&&(0,p.jsxs)(bn,{children:[(0,p.jsx)(vn,{theme:a,$isActive:r,children:n.label}),(0,p.jsx)(Fn,{theme:a,children:n.description})]})]},n.id)}))}),(0,p.jsx)(gn,{theme:a,children:!b&&(0,p.jsxs)(jn,{theme:a,onClick:c,children:["light"===a?"🌙":"☀️"," ","light"===a?"Dark":"Light"," Mode"]})})]})]})};e(5700),e(9572),e(8130),e(3851),e(1278),e(875),e(9432),e(287),e(3362),e(3500),e(2008);var Bn,Sn,On,Dn,zn,In,Tn,$n,Pn,qn,Nn,Rn,Mn,Gn,Wn,Un,Ln,Yn,Kn,Hn,Zn,Jn,Vn,Qn,Xn,nt,tt,et,rt,it,ot,at,ct,st,lt,ut,dt,ht,pt,ft,mt,gt,xt,yt,bt,vt=(0,e(4303).UU)("https://efazuvegwxouysfcgwja.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmYXp1dmVnd3hvdXlzZmNnd2phIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU5Mjk1MjcsImV4cCI6MjA1MTUwNTUyN30.1G5n0CyQEHGeE1XaJld_PbpstUFd0Imaao6N8MUmfvE"),Ft=e(1612),wt=(e(5440),e(2762),e(312)),jt=e.n(wt);function At(n){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},At(n)}function _t(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function kt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Et(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(e),!0).forEach((function(t){Ct(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):kt(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ct(n,t,e){return(t=function(n){var t=function(n){if("object"!=At(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,"string");if("object"!=At(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==At(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Bt(){Bt=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function l(t,e,r,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype);return s(a,"_invoke",function(t,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:n,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=F(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=u(t,e,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new A(i||[])),!0),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(_([])));x&&x!==e&&r.call(x,o)&&(m=x);var y=f.prototype=h.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function v(n,t){function e(i,o,a,c){var s=u(n[i],n,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==At(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):t.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return e("throw",n,a,c)}))}c(s.arg)}var i;s(this,"_invoke",(function(n,r){function o(){return new t((function(t,i){e(n,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function F(t,e){var r=e.method,i=t.i[r];if(i===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(i,t.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.r]=a.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){this.tryEntries.push(n)}function j(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function A(n){this.tryEntries=[[-1]],n.forEach(w,this),this.reset(!0)}function _(t){if(null!=t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(At(t)+" is not iterable")}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,c,"GeneratorFunction")),n.prototype=Object.create(y),n},t.awrap=function(n){return{__await:n}},b(v.prototype),s(v.prototype,a,(function(){return this})),t.AsyncIterator=v,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var a=new v(l(n,e,r,i),o);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){a.type="throw",a.arg=t,e.next=n}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],c=this.prev,s=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!s&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<s)return this.method="next",this.arg=n,r(s),!0;if(c<l)return r(l),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===n||"continue"===n)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=n,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),j(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var i=r.arg;j(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:_(t),r:e,n:r},"next"===this.method&&(this.arg=n),d}},t}function St(n,t,e,r,i,o,a){try{var c=n[o](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,i)}function Ot(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){St(o,r,i,a,c,"next",n)}function c(n){St(o,r,i,a,c,"throw",n)}a(void 0)}))}}function Dt(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return zt(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?zt(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}var It=c.Ay.div(Bn||(Bn=_t(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  gap: 16px;\n"]))),Tt=c.Ay.div(Sn||(Sn=_t(["\n  color: ",";\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),$t=c.Ay.div(On||(On=_t(["\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  width: 100%;\n"]))),Pt=c.Ay.div(Dn||(Dn=_t(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 16px;\n  transition: all 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  display: flex;\n  gap: 20px;\n  align-items: center;\n\n  &:hover {\n    border-color: ",";\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  }\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),qt=c.Ay.div(zn||(zn=_t(["\n  flex: 1;\n  cursor: pointer;\n  min-width: 0;\n"]))),Nt=c.Ay.div(In||(In=_t(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n"]))),Rt=c.Ay.div(Tn||(Tn=_t(["\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: #F3F4F6;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 12px;\n  flex-shrink: 0;\n  border: 2px solid #E5E7EB;\n\n  img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n\n  svg {\n    color: #9CA3AF;\n    font-size: 20px;\n  }\n"]))),Mt=c.Ay.div($n||($n=_t(["\n  flex: 1;\n  min-width: 0;\n"]))),Gt=c.Ay.div(Pn||(Pn=_t(["\n  font-weight: 600;\n  color: ",";\n  font-size: 18px;\n  margin-bottom: 4px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Wt=c.Ay.div(qn||(qn=_t(["\n  background: ",";\n  color: white;\n  font-size: 10px;\n  font-weight: 500;\n  padding: 2px 6px;\n  border-radius: 6px;\n  min-width: fit-content;\n  text-align: center;\n  white-space: nowrap;\n"])),(function(n){var t=n.children;return t&&t.toString().includes("x")?"#EF4444":"Founder"===t?"#7C3AED":"Professional Investor"===t?"#059669":"Team"===t?"#0284C7":"Advisor"===t?"#DC2626":"Supplier"===t?"#EA580C":"Manager"===t?"#7C2D12":"Institution"===t?"#1F2937":"Media"===t?"#BE185D":"Friend and Family"===t?"#16A34A":"No Category"===t||"Not Set"===t?"#6B7280":"today"===t?"#10B981":"yesterday"===t?"#34D399":"this week"===t?"#F59E0B":"this month"===t?"#F97316":"this quarter"===t?"#EF4444":"this year"===t?"#DC2626":"ages ago"===t?"#7F1D1D":"#6B7280"})),Ut=c.Ay.div(Nn||(Nn=_t(["\n  color: ",";\n  font-size: 14px;\n  margin-bottom: 4px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Lt=c.Ay.div(Rn||(Rn=_t(["\n  color: ",";\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n\n  svg {\n    font-size: 12px;\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Yt=c.Ay.div(Mn||(Mn=_t(["\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n"]))),Kt=c.Ay.div(Gn||(Gn=_t(["\n  color: ",";\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  svg {\n    font-size: 12px;\n    flex-shrink: 0;\n  }\n\n  span {\n    flex: 1;\n    min-width: 0;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Ht=c.Ay.div(Wn||(Wn=_t(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  align-items: flex-end;\n"]))),Zt=c.Ay.button(Un||(Un=_t(["\n  background: ",";\n  color: white;\n  border: none;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n\n  &:hover {\n    transform: scale(1.1);\n    background: ",";\n  }\n\n  &:active {\n    transform: scale(0.95);\n  }\n"])),(function(n){return n.$edit?"#10B981":n.$skip?"#F59E0B":n.$delete?"#EF4444":n.$frequency?"#3B82F6":n.$removeKeepInTouch?"#EF4444":"#6B7280"}),(function(n){return n.$edit?"#059669":n.$skip?"#D97706":n.$delete?"#DC2626":n.$frequency?"#2563EB":n.$removeKeepInTouch?"#DC2626":"#4B5563"})),Jt=c.Ay.div(Ln||(Ln=_t(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n"]))),Vt=c.Ay.div(Yn||(Yn=_t(["\n  font-size: 48px;\n  margin-bottom: 16px;\n"]))),Qt=c.Ay.h3(Kn||(Kn=_t(["\n  color: ",";\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0 0 8px 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Xt=c.Ay.p(Hn||(Hn=_t(["\n  color: ",";\n  font-size: 16px;\n  margin: 0;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),ne=c.Ay.div(Zn||(Zn=_t(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid ",";\n\n  h2 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),te=c.Ay.button(Jn||(Jn=_t(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 20px;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),ee=c.Ay.div(Vn||(Vn=_t(["\n  font-size: 14px;\n  color: ",";\n  line-height: 1.5;\n"])),(function(n){return"light"===n.theme?"#374151":"#D1D5DB"})),re=c.Ay.div(Qn||(Qn=_t(["\n  background: ",";\n  border: 1px solid ",";\n  padding: 16px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n\n  div {\n    margin: 4px 0;\n    font-size: 14px;\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#F8FAFC":"#F9FAFB"}),(function(n){return n.theme,"#E2E8F0"}),(function(n){return n.theme,"#1F2937"})),ie=c.Ay.div(Xn||(Xn=_t(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  padding: 12px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  font-size: 14px;\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#FEF3C7":"#F59E0B"}),(function(n){return"light"===n.theme?"#92400E":"#1F2937"}),(function(n){return"light"===n.theme?"#F59E0B":"#D97706"})),oe=c.Ay.div(nt||(nt=_t(["\n  margin: 20px 0;\n"]))),ae=c.Ay.div(tt||(tt=_t(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n"]))),ce=c.Ay.div(et||(et=_t(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  border-radius: 6px;\n  background: ",";\n  border: 1px solid ",";\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n  }\n\n  label {\n    font-size: 14px;\n    color: ",";\n    cursor: pointer;\n    flex: 1;\n  }\n"])),(function(n){return n.theme,"#FFFFFF"}),(function(n){return n.theme,"#E5E7EB"}),(function(n){return"light"===n.theme?"#F9FAFB":"#F3F4F6"}),(function(n){return n.theme,"#D1D5DB"}),(function(n){return n.theme,"#374151"})),se=c.Ay.input(rt||(rt=_t(["\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  accent-color: ",";\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),le=c.Ay.div(it||(it=_t(["\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n  margin-top: 24px;\n"]))),ue=c.Ay.button(ot||(ot=_t(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: ",";\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#374151":"#F9FAFB"}),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),de=c.Ay.button(at||(at=_t(["\n  background: #EF4444;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #DC2626;\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n"]))),he=c.Ay.span(ct||(ct=_t(["\n  background: ",";\n  color: ",";\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 10px;\n  font-weight: 600;\n  margin-left: 8px;\n  text-transform: uppercase;\n"])),(function(n){return"light"===n.theme?"#EBF4FF":"#1E3A8A"}),(function(n){return"light"===n.theme?"#1D4ED8":"#93C5FD"})),pe=c.Ay.div(st||(st=_t(["\n  color: ",";\n  font-size: 12px;\n  font-weight: 600;\n  margin-top: 4px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n"])),(function(n){return n.$urgencyColor})),fe=c.Ay.div(lt||(lt=_t(["\n  background: ",";\n  border-radius: 12px;\n  overflow: hidden;\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),me=c.Ay.div(ut||(ut=_t(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h3 {\n    margin: 0;\n    color: ",";\n    font-size: 18px;\n    font-weight: 600;\n  }\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),ge=c.Ay.button(dt||(dt=_t(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 18px;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: ",";\n    background: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),xe=c.Ay.div(ht||(ht=_t(["\n  padding: 20px;\n"]))),ye=c.Ay.div(pt||(pt=_t(["\n  color: ",";\n  font-size: 16px;\n  font-weight: 600;\n  margin-bottom: 16px;\n  text-align: center;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),be=c.Ay.div(ft||(ft=_t(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 20px;\n"]))),ve=c.Ay.button(mt||(mt=_t(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  padding: 12px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: 500;\n  text-align: left;\n\n  &:hover {\n    background: ",";\n  }\n"])),(function(n){return n.$selected?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return n.$selected?"#FFFFFF":"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return n.$selected?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return n.$selected?"light"===n.theme?"#2563EB":"#3B82F6":"light"===n.theme?"#F3F4F6":"#4B5563"})),Fe=c.Ay.button(gt||(gt=_t(["\n  background: #10B981;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: #059669;\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n"]))),we=c.Ay.div(xt||(xt=_t(["\n  margin-bottom: 20px;\n"]))),je=c.Ay.label(yt||(yt=_t(["\n  display: block;\n  color: ",";\n  font-size: 14px;\n  font-weight: 600;\n  margin-bottom: 8px;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Ae=c.Ay.input(bt||(bt=_t(["\n  width: 100%;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  padding: 12px 16px;\n  border-radius: 8px;\n  font-size: 14px;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    ring: 2px solid ",";\n  }\n\n  &::-webkit-calendar-picker-indicator {\n    filter: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"rgba(59, 130, 246, 0.1)":"rgba(96, 165, 250, 0.1)"}),(function(n){return"light"===n.theme?"none":"invert(1)"}));const _e=function(n){var t=n.contacts,e=void 0===t?[]:t,i=n.loading,a=void 0!==i&&i,c=n.theme,u=n.emptyStateConfig,d=void 0===u?{icon:"📥",title:"No contacts found",text:"There are no contacts to display."}:u,h=n.onContactUpdate,f=n.showActions,m=void 0===f||f,g=n.onContactClick,x=n.badgeType,y=void 0===x?"time":x,b=n.pageContext,v=void 0===b?null:b,F=n.keepInTouchData,w=void 0===F?null:F,j=n.filterCategory,A=void 0===j?null:j,_=(0,o.Zp)(),k=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==n)return void 0!==(null==t?void 0:t.days_until_birthday)?E(t.days_until_birthday,t):"";var e=parseInt(n);return e<0?"".concat(Math.abs(e)," days overdue"):0===e?"Due today":"Due in ".concat(e," days")},E=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=parseInt(n),r=null!=t&&t.turning_age?" (turning ".concat(t.turning_age,")"):"";return 0===e?"🎉 Birthday today".concat(r,"!"):1===e?"🎂 Birthday tomorrow".concat(r,"!"):e<=7?"🎈 Birthday in ".concat(e," days").concat(r):e<=30?"🎁 Birthday in ".concat(e," days").concat(r):"🎂 Birthday in ".concat(e," days").concat(r)},C=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0!==(null==e?void 0:e.days_until_birthday)){var r=parseInt(e.days_until_birthday);return 0===r?"#EF4444":r<=7?"#F59E0B":"#10B981"}if(null==n)return"light"===t?"#6B7280":"#9CA3AF";var i=parseInt(n);return i<0?"#EF4444":i<=7?"#F59E0B":"#10B981"},B=Dt((0,r.useState)(!1),2),S=B[0],O=B[1],D=Dt((0,r.useState)(null),2),z=D[0],I=D[1],T=Dt((0,r.useState)({}),2),$=T[0],P=T[1],q=Dt((0,r.useState)({deleteInteractions:!0,deleteEmails:!0,deleteEmailParticipants:!0,deleteEmailThreads:!0,deleteTags:!0,deleteCities:!0,deleteCompanies:!0,deleteNotes:!0,deleteAttachments:!0,deleteContactEmails:!0,deleteContactMobiles:!0,deleteChat:!0,deleteContactChats:!0,deleteDeals:!0,deleteMeetings:!0,deleteInvestments:!0,deleteKit:!0,addToSpam:!0,addMobileToSpam:!0}),2),N=q[0],R=q[1],M=Dt((0,r.useState)(!1),2),G=M[0],W=M[1],U=Dt((0,r.useState)(!1),2),L=U[0],Y=U[1],K=Dt((0,r.useState)(null),2),H=K[0],Z=K[1],J=Dt((0,r.useState)(""),2),V=J[0],Q=J[1],X=Dt((0,r.useState)(!1),2),nn=X[0],tn=X[1],en=Dt((0,r.useState)(null),2),rn=en[0],on=en[1],an=Dt((0,r.useState)(""),2),cn=an[0],sn=an[1],ln=function(){var n=Ot(Bt().mark((function n(t,e){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&e.stopPropagation(),n.prev=1,n.next=4,vt.from("contacts").update({category:"Skip"}).eq("contact_id",t.contact_id);case 4:if(r=n.sent,!(i=r.error)){n.next=8;break}throw i;case 8:s.oR.success("Contact moved to Skip"),h&&h(),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.error("Error skipping contact:",n.t0),s.oR.error("Failed to skip contact");case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(t,e){return n.apply(this,arguments)}}(),un=function(){var n=Ot(Bt().mark((function n(t,e){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&e.stopPropagation(),n.prev=1,n.next=4,vt.from("keep_in_touch").delete().eq("contact_id",t.contact_id);case 4:if(r=n.sent,!(i=r.error)){n.next=8;break}throw i;case 8:s.oR.success("Contact removed from keep in touch"),h&&h(),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.error("Error removing from keep in touch:",n.t0),s.oR.error("Failed to remove from keep in touch");case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(t,e){return n.apply(this,arguments)}}(),dn=function(){var n=Ot(Bt().mark((function n(){var t,e;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(H&&V){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,vt.from("keep_in_touch").update({frequency:V}).eq("contact_id",H.contact_id);case 5:if(t=n.sent,!(e=t.error)){n.next=9;break}throw e;case 9:s.oR.success("Keep in touch frequency updated to ".concat(V)),Y(!1),Z(null),Q(""),h&&h(),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),console.error("Error updating frequency:",n.t0),s.oR.error("Failed to update frequency");case 20:case"end":return n.stop()}}),n,null,[[2,16]])})));return function(){return n.apply(this,arguments)}}(),hn=function(){var n=Ot(Bt().mark((function n(){var t,e;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(rn){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,vt.from("contacts").update({birthday:cn||null}).eq("contact_id",rn.contact_id);case 5:if(t=n.sent,!(e=t.error)){n.next=9;break}throw e;case 9:s.oR.success("Birthday updated successfully"),tn(!1),on(null),sn(""),h&&h(),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),console.error("Error updating birthday:",n.t0),s.oR.error("Failed to update birthday");case 20:case"end":return n.stop()}}),n,null,[[2,16]])})));return function(){return n.apply(this,arguments)}}(),pn=function(){var n=Ot(Bt().mark((function n(t,e){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&e.stopPropagation(),n.prev=1,n.next=4,vt.from("contacts").update({birthday:null}).eq("contact_id",t.contact_id);case 4:if(r=n.sent,!(i=r.error)){n.next=8;break}throw i;case 8:s.oR.success("Birthday removed"),h&&h(),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.error("Error removing birthday:",n.t0),s.oR.error("Failed to remove birthday");case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(t,e){return n.apply(this,arguments)}}(),fn=function(){var n=Ot(Bt().mark((function n(t,e){var r,i,o,a,c,l,u,d,h,p,f,m,g,x,y,b,v,F,w,j,A,_,k,E,C,B,S;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&e.stopPropagation(),o=Et(Et({},t),{},{email:(null===(r=t.emails)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.email)||null,mobile:(null===(i=t.mobiles)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.mobile)||null}),I(o),n.prev=3,n.next=6,Promise.all([Promise.resolve({count:0}),Promise.resolve({count:0}),vt.from("interactions").select("interaction_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("emails").select("email_id",{count:"exact",head:!0}).eq("sender_contact_id",o.contact_id),vt.from("email_participants").select("participant_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("contact_email_threads").select("email_thread_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("contact_tags").select("entry_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("contact_cities").select("entry_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("contact_companies").select("contact_companies_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("notes_contacts").select("note_contact_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("attachments").select("attachment_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("contact_emails").select("email_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("contact_mobiles").select("mobile_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("deals_contacts").select("deals_contacts_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("meeting_contacts").select("meeting_contact_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("investments_contacts").select("investments_contacts_id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("keep_in_touch").select("id",{count:"exact",head:!0}).eq("contact_id",o.contact_id),vt.from("interactions").select("interaction_id, interaction_type, direction, interaction_date, summary").eq("contact_id",o.contact_id).order("interaction_date",{ascending:!1}).limit(1)]);case 6:a=n.sent,c=Dt(a,18),l=c[0],u=c[1],d=c[2],h=c[3],p=c[4],f=c[5],m=c[6],g=c[7],x=c[8],y=c[9],b=c[10],v=c[11],F=c[12],w=c[13],j=c[14],A=c[15],_=c[16],k=c[17],E=null,k.data&&k.data.length>0&&(C=k.data[0],B=new Date(C.interaction_date).toLocaleDateString(),E={summary:"".concat(C.interaction_type," - ").concat(C.summary||"No notes"," (").concat(B,")")}),S={chatCount:l.count||0,contactChatsCount:u.count||0,interactionsCount:d.count||0,emailsCount:h.count||0,emailParticipantsCount:p.count||0,emailThreadsCount:f.count||0,tagsCount:m.count||0,citiesCount:g.count||0,companiesCount:x.count||0,notesCount:y.count||0,attachmentsCount:b.count||0,contactEmailsCount:v.count||0,contactMobilesCount:F.count||0,dealsCount:w.count||0,meetingsCount:j.count||0,investmentsCount:A.count||0,kitCount:_.count||0,lastInteraction:E},P(S),O(!0),n.next=37;break;case 33:n.prev=33,n.t0=n.catch(3),console.error("Error fetching associated data:",n.t0),s.oR.error("Failed to load contact details");case 37:case"end":return n.stop()}}),n,null,[[3,33]])})));return function(t,e){return n.apply(this,arguments)}}(),mn=function(n){var t=n.target,e=t.name,r=t.checked;R((function(n){return Et(Et({},n),{},Ct({},e,r))}))},gn=function(){var n=Ot(Bt().mark((function n(){var t,e,r,i,o,a,c;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(z){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,W(!0),!N.addToSpam||!z.email){n.next=10;break}return n.next=7,vt.from("emails_spam").insert([{email:z.email,counter:1}]);case 7:t=n.sent,(e=t.error)&&console.error("Error adding to spam list:",e);case 10:if(!N.addMobileToSpam||!z.mobile){n.next=16;break}return n.next=13,vt.from("whatsapp_spam").insert([{mobile_number:z.mobile,counter:1,created_at:(new Date).toISOString(),last_modified_at:(new Date).toISOString()}]);case 13:r=n.sent,(i=r.error)&&console.error("Error adding to WhatsApp spam list:",i);case 16:return o=[],N.deleteInteractions&&$.interactionsCount>0&&o.push(vt.from("interactions").delete().eq("contact_id",z.contact_id)),N.deleteEmails&&$.emailsCount>0&&o.push(vt.from("emails").delete().eq("sender_contact_id",z.contact_id)),N.deleteEmailParticipants&&$.emailParticipantsCount>0&&o.push(vt.from("email_participants").delete().eq("contact_id",z.contact_id)),N.deleteEmailThreads&&$.emailThreadsCount>0&&o.push(vt.from("contact_email_threads").delete().eq("contact_id",z.contact_id)),N.deleteTags&&$.tagsCount>0&&o.push(vt.from("contact_tags").delete().eq("contact_id",z.contact_id)),N.deleteCities&&$.citiesCount>0&&o.push(vt.from("contact_cities").delete().eq("contact_id",z.contact_id)),N.deleteCompanies&&$.companiesCount>0&&o.push(vt.from("contact_companies").delete().eq("contact_id",z.contact_id)),N.deleteNotes&&$.notesCount>0&&o.push(vt.from("notes_contacts").delete().eq("contact_id",z.contact_id)),N.deleteAttachments&&$.attachmentsCount>0&&o.push(vt.from("attachments").delete().eq("contact_id",z.contact_id)),N.deleteContactEmails&&$.contactEmailsCount>0&&o.push(vt.from("contact_emails").delete().eq("contact_id",z.contact_id)),N.deleteContactMobiles&&$.contactMobilesCount>0&&o.push(vt.from("contact_mobiles").delete().eq("contact_id",z.contact_id)),N.deleteDeals&&$.dealsCount>0&&o.push(vt.from("deals_contacts").delete().eq("contact_id",z.contact_id)),N.deleteMeetings&&$.meetingsCount>0&&o.push(vt.from("meeting_contacts").delete().eq("contact_id",z.contact_id)),N.deleteInvestments&&$.investmentsCount>0&&o.push(vt.from("investments_contacts").delete().eq("contact_id",z.contact_id)),N.deleteKit&&$.kitCount>0&&o.push(vt.from("keep_in_touch").delete().eq("contact_id",z.contact_id)),n.next=34,Promise.all(o);case 34:return n.next=36,vt.from("contacts").delete().eq("contact_id",z.contact_id);case 36:if(a=n.sent,!(c=a.error)){n.next=40;break}throw c;case 40:s.oR.success("Contact and selected associated records deleted successfully"),h&&h(),O(!1),I(null),P({}),n.next=51;break;case 47:n.prev=47,n.t0=n.catch(2),console.error("Error deleting contact:",n.t0),s.oR.error("Failed to delete contact");case 51:return n.prev=51,W(!1),n.finish(51);case 54:case"end":return n.stop()}}),n,null,[[2,47,51,54]])})));return function(){return n.apply(this,arguments)}}(),xn=function(n){var t=n.last_interaction_at||n.created_at;if(!t)return 9999;var e=new Date(t),r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a=Math.floor((i-o)/864e5);return Math.max(0,a)},yn=function(n){if(void 0!==n.spam_counter)return"".concat(n.spam_counter,"x");if("Birthday"===A)return n.category||"No Category";if("category"===y)return n.category||"No Category";var t=xn(n);return 0===t?"today":1===t?"yesterday":t<=7?"this week":t<=30?"this month":t<=90?"this quarter":t<=365?"this year":"ages ago"};return a?(0,p.jsx)(It,{children:(0,p.jsx)(Tt,{theme:c,children:"Loading contacts..."})}):(0,p.jsxs)($t,{children:[e.map((function(n){var t,e,r,i,o,a,s,u,d;return(0,p.jsxs)(Pt,{theme:c,children:[(0,p.jsxs)(qt,{onClick:function(){return function(n){g?g(n):_("/contact/".concat(n.contact_id))}(n)},children:[(0,p.jsxs)(Nt,{children:[(0,p.jsx)(Rt,{children:n.profile_image_url?(0,p.jsx)("img",{src:n.profile_image_url,alt:"Profile"}):(0,p.jsx)(Ft.x$1,{})}),(0,p.jsxs)(Mt,{children:[(0,p.jsxs)(Gt,{theme:c,children:[n.first_name," ",n.last_name,"keepInTouch"===v&&(null==w?void 0:w.showFrequencyBadge)&&(0,p.jsx)(he,{theme:c,children:"Birthday"===A&&n.birthday?(s=new Date(n.birthday),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],d=s.getDate(),"".concat(u," ").concat(d)):n.keep_in_touch_frequency?(a=n.keep_in_touch_frequency,a?a.replace(/([A-Z])/g," $1").trim():""):null}),"keepInTouch"!==v&&(0,p.jsx)(Wt,{$score:xn(n),children:yn(n)})]}),"keepInTouch"===v&&(null==w?void 0:w.showDaysCounter)&&(0,p.jsx)(pe,{theme:c,$urgencyColor:C(n.days_until_next,c,n),children:k(n.days_until_next,n)}),n.job_role&&(0,p.jsx)(Ut,{theme:c,children:n.job_role}),(null===(t=n.companies)||void 0===t?void 0:t[0])&&(0,p.jsxs)(Lt,{theme:c,children:[(0,p.jsx)(Ft.ymh,{style:{marginRight:"6px"}}),n.companies[0].name]})]})]}),(0,p.jsxs)(Yt,{children:["keepInTouch"!==v&&(null===(e=n.emails)||void 0===e?void 0:e.length)>0&&(null===(r=n.emails[0])||void 0===r?void 0:r.email)&&(0,p.jsxs)(Kt,{theme:c,children:[(0,p.jsx)(Ft.maD,{}),(0,p.jsx)("span",{children:n.emails[0].email})]}),"keepInTouch"!==v&&(null===(i=n.mobiles)||void 0===i?void 0:i.length)>0&&(null===(o=n.mobiles[0])||void 0===o?void 0:o.mobile)&&(0,p.jsxs)(Kt,{theme:c,children:[(0,p.jsx)(Ft.Cab,{}),(0,p.jsx)("span",{children:n.mobiles[0].mobile})]})]})]}),m&&(0,p.jsxs)(Ht,{children:[(0,p.jsx)(Zt,{theme:c,onClick:function(t){return function(n,t){t&&t.stopPropagation();var e="localhost"===window.location.hostname?"http://localhost:3000/contacts/workflow/".concat(n,"?step=2"):"/contacts/workflow/".concat(n,"?step=2"),r=window.open(e,"_blank");r&&r.focus()}(n.contact_id,t)},$edit:!0,title:"Edit contact",children:(0,p.jsx)(Ft.uO9,{})}),"keepInTouch"===v?(0,p.jsx)(p.Fragment,{children:"Birthday"===A?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Zt,{theme:c,onClick:function(t){return function(n,t){t&&t.stopPropagation(),on(n),sn(n.birthday||""),tn(!0)}(n,t)},$frequency:!0,title:"Edit birthday date",children:(0,p.jsx)(Ft.bfZ,{})}),(0,p.jsx)(Zt,{theme:c,onClick:function(t){return pn(n,t)},$removeKeepInTouch:!0,title:"Remove birthday",children:(0,p.jsx)(Ft.QCr,{})})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Zt,{theme:c,onClick:function(t){return function(n,t){t&&t.stopPropagation(),Z(n),Q(n.keep_in_touch_frequency||"Monthly"),Y(!0)}(n,t)},$frequency:!0,title:"Change keep in touch frequency",children:(0,p.jsx)(Ft.w_X,{})}),(0,p.jsx)(Zt,{theme:c,onClick:function(t){return un(n,t)},$removeKeepInTouch:!0,title:"Don't keep in touch",children:(0,p.jsx)(Ft.QCr,{})})]})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Zt,{theme:c,onClick:function(t){return ln(n,t)},$skip:!0,title:"Skip contact",children:(0,p.jsx)(l.Oge,{})}),(0,p.jsx)(Zt,{theme:c,onClick:function(t){return fn(n,t)},$delete:!0,title:"Delete contact",children:(0,p.jsx)(l.eHT,{})})]})]})]},n.contact_id)})),(0,p.jsx)(jt(),{isOpen:S,onRequestClose:function(){return O(!1)},shouldCloseOnOverlayClick:!1,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"25px",maxWidth:"600px",width:"90%",maxHeight:"80vh",backgroundColor:"light"===c?"#FFFFFF":"#1F2937",border:"1px solid ".concat("light"===c?"#E5E7EB":"#374151"),borderRadius:"12px",color:"light"===c?"#111827":"#F9FAFB",overflow:"auto",zIndex:9999},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:9998}},children:z&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(ne,{children:[(0,p.jsx)("h2",{children:"Delete Contact"}),(0,p.jsx)(te,{theme:c,onClick:function(){return O(!1)},disabled:G,children:(0,p.jsx)(l.yGN,{})})]}),(0,p.jsxs)(ee,{theme:c,children:[(0,p.jsxs)(re,{children:[(0,p.jsxs)("strong",{children:[z.first_name," ",z.last_name]}),z.email&&(0,p.jsxs)("div",{children:["Email: ",z.email]}),z.mobile&&(0,p.jsxs)("div",{children:["Mobile: ",z.mobile]}),$.lastInteraction&&(0,p.jsxs)("div",{style:{marginTop:"8px",fontSize:"14px",color:"light"===c?"#6B7280":"#9CA3AF"},children:["Last interaction: ",$.lastInteraction.summary]})]}),(0,p.jsx)(ie,{children:"⚠️ This action cannot be undone. Select which associated data to delete:"}),(0,p.jsx)(oe,{children:(0,p.jsxs)(ae,{children:[$.interactionsCount>0&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"deleteInteractions",name:"deleteInteractions",checked:N.deleteInteractions,onChange:mn,disabled:G}),(0,p.jsxs)("label",{htmlFor:"deleteInteractions",children:["Interactions (",$.interactionsCount,")"]})]}),$.emailsCount>0&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"deleteEmails",name:"deleteEmails",checked:N.deleteEmails,onChange:mn,disabled:G}),(0,p.jsxs)("label",{htmlFor:"deleteEmails",children:["Emails (",$.emailsCount,")"]})]}),$.tagsCount>0&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"deleteTags",name:"deleteTags",checked:N.deleteTags,onChange:mn,disabled:G}),(0,p.jsxs)("label",{htmlFor:"deleteTags",children:["Tags (",$.tagsCount,")"]})]}),$.companiesCount>0&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"deleteCompanies",name:"deleteCompanies",checked:N.deleteCompanies,onChange:mn,disabled:G}),(0,p.jsxs)("label",{htmlFor:"deleteCompanies",children:["Companies (",$.companiesCount,")"]})]}),$.notesCount>0&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"deleteNotes",name:"deleteNotes",checked:N.deleteNotes,onChange:mn,disabled:G}),(0,p.jsxs)("label",{htmlFor:"deleteNotes",children:["Notes (",$.notesCount,")"]})]}),$.kitCount>0&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"deleteKit",name:"deleteKit",checked:N.deleteKit,onChange:mn,disabled:G}),(0,p.jsxs)("label",{htmlFor:"deleteKit",children:["Keep In Touch (",$.kitCount,")"]})]}),z.email&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"addToSpam",name:"addToSpam",checked:N.addToSpam,onChange:mn,disabled:G}),(0,p.jsx)("label",{htmlFor:"addToSpam",children:"Add email to spam list"})]}),z.mobile&&(0,p.jsxs)(ce,{children:[(0,p.jsx)(se,{type:"checkbox",id:"addMobileToSpam",name:"addMobileToSpam",checked:N.addMobileToSpam,onChange:mn,disabled:G}),(0,p.jsx)("label",{htmlFor:"addMobileToSpam",children:"Add mobile to WhatsApp spam list"})]})]})}),(0,p.jsxs)(le,{children:[(0,p.jsx)(ue,{onClick:function(){return O(!1)},disabled:G,children:"Cancel"}),(0,p.jsx)(de,{onClick:gn,disabled:G,children:G?"Deleting...":"Delete Contact"})]})]})]})}),(0,p.jsx)(jt(),{isOpen:L,onRequestClose:function(){return Y(!1)},style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",border:"none",borderRadius:"12px",backgroundColor:"light"===c?"#FFFFFF":"#1F2937",maxWidth:"400px",width:"90%"}},children:(0,p.jsxs)(fe,{theme:c,children:[(0,p.jsxs)(me,{theme:c,children:[(0,p.jsx)("h3",{children:"Change Keep in Touch Frequency"}),(0,p.jsx)(ge,{theme:c,onClick:function(){return Y(!1)},children:(0,p.jsx)(l.yGN,{})})]}),(0,p.jsxs)(xe,{children:[(0,p.jsxs)(ye,{theme:c,children:[null==H?void 0:H.first_name," ",null==H?void 0:H.last_name]}),(0,p.jsx)(be,{children:["Weekly","Monthly","Quarterly","Twice per Year","Once per Year"].map((function(n){return(0,p.jsx)(ve,{theme:c,$selected:V===n,onClick:function(){return Q(n)},children:n},n)}))}),(0,p.jsxs)(le,{children:[(0,p.jsx)(ue,{theme:c,onClick:function(){return Y(!1)},children:"Cancel"}),(0,p.jsx)(Fe,{theme:c,onClick:dn,disabled:!V,children:"Update Frequency"})]})]})]})}),(0,p.jsx)(jt(),{isOpen:nn,onRequestClose:function(){return tn(!1)},style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",border:"none",borderRadius:"12px",backgroundColor:"light"===c?"#FFFFFF":"#1F2937",maxWidth:"400px",width:"90%"}},children:(0,p.jsxs)(fe,{theme:c,children:[(0,p.jsxs)(me,{theme:c,children:[(0,p.jsx)("h3",{children:"Edit Birthday"}),(0,p.jsx)(ge,{theme:c,onClick:function(){return tn(!1)},children:(0,p.jsx)(l.yGN,{})})]}),(0,p.jsxs)(xe,{children:[(0,p.jsxs)(ye,{theme:c,children:[null==rn?void 0:rn.first_name," ",null==rn?void 0:rn.last_name]}),(0,p.jsxs)(we,{children:[(0,p.jsx)(je,{theme:c,children:"Birthday"}),(0,p.jsx)(Ae,{type:"date",theme:c,value:cn,onChange:function(n){return sn(n.target.value)}})]}),(0,p.jsxs)(le,{children:[(0,p.jsx)(ue,{theme:c,onClick:function(){return tn(!1)},children:"Cancel"}),(0,p.jsx)(Fe,{theme:c,onClick:hn,children:"Update Birthday"})]})]})]})}),!a&&0===e.length&&(0,p.jsxs)(Jt,{children:[(0,p.jsx)(Vt,{children:d.icon}),(0,p.jsx)(Qt,{theme:c,children:d.title}),(0,p.jsx)(Xt,{theme:c,children:d.text})]})]})};function ke(n){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ke(n)}var Ee,Ce,Be,Se,Oe,De,ze,Ie,Te,$e,Pe,qe,Ne;function Re(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function Me(){Me=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function l(t,e,r,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype);return s(a,"_invoke",function(t,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:n,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=F(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=u(t,e,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new A(i||[])),!0),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(_([])));x&&x!==e&&r.call(x,o)&&(m=x);var y=f.prototype=h.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function v(n,t){function e(i,o,a,c){var s=u(n[i],n,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==ke(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):t.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return e("throw",n,a,c)}))}c(s.arg)}var i;s(this,"_invoke",(function(n,r){function o(){return new t((function(t,i){e(n,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function F(t,e){var r=e.method,i=t.i[r];if(i===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(i,t.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.r]=a.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){this.tryEntries.push(n)}function j(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function A(n){this.tryEntries=[[-1]],n.forEach(w,this),this.reset(!0)}function _(t){if(null!=t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(ke(t)+" is not iterable")}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,c,"GeneratorFunction")),n.prototype=Object.create(y),n},t.awrap=function(n){return{__await:n}},b(v.prototype),s(v.prototype,a,(function(){return this})),t.AsyncIterator=v,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var a=new v(l(n,e,r,i),o);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){a.type="throw",a.arg=t,e.next=n}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],c=this.prev,s=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!s&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<s)return this.method="next",this.arg=n,r(s),!0;if(c<l)return r(l),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===n||"continue"===n)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=n,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),j(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var i=r.arg;j(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:_(t),r:e,n:r},"next"===this.method&&(this.arg=n),d}},t}function Ge(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function We(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(e),!0).forEach((function(t){Ue(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ge(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function Ue(n,t,e){return(t=function(n){var t=function(n){if("object"!=ke(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,"string");if("object"!=ke(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==ke(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Le(n,t,e,r,i,o,a){try{var c=n[o](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,i)}function Ye(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){Le(o,r,i,a,c,"next",n)}function c(n){Le(o,r,i,a,c,"throw",n)}a(void 0)}))}}function Ke(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return He(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?He(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}var Ze=c.Ay.div(Ee||(Ee=Re(["\n  min-height: 100vh;\n  background: ",";\n  transition: background-color 0.3s ease;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"})),Je=c.Ay.div(Ce||(Ce=Re(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n"]))),Ve=c.Ay.div(Be||(Be=Re(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 24px 20px 24px 20px;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Qe=c.Ay.div(Se||(Se=Re(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 1200px;\n  margin: 0 auto 20px auto;\n"]))),Xe=c.Ay.div(Oe||(Oe=Re(["\n  flex: 1;\n"]))),nr=c.Ay.h1(De||(De=Re(["\n  font-size: 28px;\n  font-weight: 700;\n  color: ",";\n  margin: 0 0 8px 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),tr=c.Ay.p(ze||(ze=Re(["\n  color: ",";\n  margin: 0;\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),er=c.Ay.button(Ie||(Ie=Re(["\n  background: ",";\n  color: white;\n  border: none;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ","\n\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  &:hover {\n    transform: scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return n.$isRefreshing&&"\n    svg {\n      animation: spin 1s linear infinite;\n    }\n  "})),rr=c.Ay.div(Te||(Te=Re(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 1200px;\n  margin: 20px auto 0 auto;\n  background: ",";\n  border-radius: 12px;\n  padding: 6px;\n  width: fit-content;\n  box-shadow: ",";\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)":"0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2)"})),ir=c.Ay.button($e||($e=Re(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  font-size: 15px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  min-width: fit-content;\n  white-space: nowrap;\n  position: relative;\n  box-shadow: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n    transform: translateY(-1px);\n    box-shadow: ",";\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.5), 0 1px 3px rgba(0, 0, 0, 0.4)"})),or=c.Ay.div(Pe||(Pe=Re(["\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),ar=c.Ay.div(qe||(qe=Re(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 400px;\n  margin: 15px auto 0 auto;\n  background: ",";\n  border-radius: 8px;\n  padding: 4px;\n  width: fit-content;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),cr=c.Ay.button(Ne||(Ne=Re(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  min-width: fit-content;\n  white-space: nowrap;\n  box-shadow: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n\n  &:active {\n    transform: scale(0.98);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.3)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12)":"0 1px 3px rgba(0, 0, 0, 0.4)"}));const sr=function(n){var t=n.theme,e=n.onInboxCountChange,i=((0,o.Zp)(),Ke((0,r.useState)([]),2)),a=i[0],c=i[1],l=Ke((0,r.useState)(!0),2),u=l[0],d=l[1],h=Ke((0,r.useState)(!1),2),f=h[0],m=h[1],g=Ke((0,r.useState)("Inbox"),2),x=g[0],y=g[1],b=Ke((0,r.useState)("Email"),2),v=b[0],F=b[1],w=function(){var n=Ye(Me().mark((function n(){var t,r,i,o,a,l,u,h,p,f,m,g,y,b,F,w,j;return Me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d(!0),n.prev=1,t=[],r=null,"Spam"!==x){n.next=30;break}if("Email"!==v){n.next=17;break}return n.next=8,vt.from("emails_spam").select("email, counter, last_modified_at").order("last_modified_at",{ascending:!1});case 8:if(i=n.sent,o=i.data,!(a=i.error)){n.next=13;break}throw a;case 13:console.log("Found ".concat((null==o?void 0:o.length)||0," spam emails")),t=(o||[]).map((function(n){return{id:"spam-email-".concat(n.email),first_name:n.email.split("@")[0]||"Spam",last_name:"(@".concat(n.email.split("@")[1]||"unknown",")"),email:n.email,mobile:"",last_interaction_at:n.last_modified_at,created_at:n.last_modified_at,category:"Spam Email",spam_counter:n.counter}})),n.next=27;break;case 17:if("WhatsApp"!==v){n.next=27;break}return n.next=20,vt.from("whatsapp_spam").select("mobile_number, counter, last_modified_at").order("last_modified_at",{ascending:!1});case 20:if(l=n.sent,u=l.data,!(h=l.error)){n.next=25;break}throw h;case 25:console.log("Found ".concat((null==u?void 0:u.length)||0," spam numbers")),t=(u||[]).map((function(n){return{id:"spam-whatsapp-".concat(n.mobile_number),first_name:n.mobile_number||"WhatsApp Spam",last_name:"",email:"",mobile:n.mobile_number,last_interaction_at:n.last_modified_at,created_at:n.last_modified_at,category:"WhatsApp Spam",spam_counter:n.counter}}));case 27:r=null,n.next=51;break;case 30:if("Mail Filter"!==x){n.next=43;break}return n.next=33,vt.from("email_inbox").select("id, from_name, from_email, to_name, to_email, subject, message_timestamp, direction, special_case").eq("special_case","pending_approval").order("message_timestamp",{ascending:!1});case 33:if(p=n.sent,f=p.data,!(m=p.error)){n.next=38;break}throw m;case 38:console.log("Found ".concat((null==f?void 0:f.length)||0," pending approval emails")),t=(f||[]).map((function(n){var t,e="sent"===(null===(t=n.direction)||void 0===t?void 0:t.toLowerCase()),r=e?n.to_name:n.from_name,i=e?n.to_email:n.from_email;return{id:"email-".concat(n.id),first_name:r||(null==i?void 0:i.split("@")[0])||"Unknown",last_name:i?"(@".concat(i.split("@")[1],")"):"",email:i||"",mobile:n.subject||"(No Subject)",last_interaction_at:n.message_timestamp,created_at:n.message_timestamp,category:"Mail Filter",direction:n.direction,email_data:n}})),r=null,n.next=51;break;case 43:return g=vt.from("contacts").select("\n            *,\n            contact_emails (email, type, is_primary),\n            contact_mobiles (mobile, type, is_primary),\n            contact_companies (\n              company_id,\n              relationship,\n              is_primary,\n              companies (name, website, category)\n            ),\n            contact_tags (\n              tags (name)\n            ),\n            contact_cities (\n              cities (name, country)\n            )\n          "),y="Skip"===x?"Skip":"Inbox","Inbox"===x&&((b=new Date).setDate(b.getDate()-100),F=b.toISOString(),g=g.gte("last_interaction_at",F)),n.next=48,g.eq("category",y).order("last_interaction_at",{ascending:!1,nullsLast:!0}).order("created_at",{ascending:!1});case 48:w=n.sent,t=w.data||[],r=w.error;case 51:if(!r){n.next=53;break}throw r;case 53:j=t.map((function(n){var t,e,r;return We(We({},n),{},{emails:n.contact_emails||[],mobiles:n.contact_mobiles||[],companies:(null===(t=n.contact_companies)||void 0===t?void 0:t.map((function(n){return n.companies})).filter(Boolean))||[],tags:(null===(e=n.contact_tags)||void 0===e?void 0:e.map((function(n){var t;return null===(t=n.tags)||void 0===t?void 0:t.name})).filter(Boolean))||[],cities:(null===(r=n.contact_cities)||void 0===r?void 0:r.map((function(n){return n.cities})).filter(Boolean))||[]})})),c(j),"Inbox"===x&&e&&e(j.length),n.next=62;break;case 58:n.prev=58,n.t0=n.catch(1),console.error("Error fetching ".concat(x," contacts:"),n.t0),s.oR.error("Failed to load ".concat(x," contacts"));case 62:return n.prev=62,d(!1),n.finish(62);case 65:case"end":return n.stop()}}),n,null,[[1,58,62,65]])})));return function(){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){w()}),[x,v]);var j=function(){var n=Ye(Me().mark((function n(){return Me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m(!0),n.next=3,w();case 3:setTimeout((function(){return m(!1)}),1e3);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,p.jsx)(Ze,{theme:t,children:(0,p.jsxs)(Je,{children:[(0,p.jsxs)(Ve,{theme:t,children:[(0,p.jsxs)(Qe,{children:[(0,p.jsxs)(Xe,{children:[(0,p.jsx)(nr,{theme:t,children:"Sort"}),(0,p.jsx)(tr,{theme:t,children:"Manage and organize your contacts"})]}),(0,p.jsx)(er,{theme:t,onClick:j,disabled:f,$isRefreshing:f,children:(0,p.jsx)(Ft.DIg,{})})]}),(0,p.jsx)(rr,{theme:t,children:["Inbox","Skip","Spam","Mail Filter"].map((function(n){return(0,p.jsx)(ir,{theme:t,$active:x===n,onClick:function(){return y(n)},children:n},n)}))})]}),"Spam"===x&&(0,p.jsxs)(ar,{theme:t,children:[(0,p.jsx)(cr,{theme:t,$active:"Email"===v,onClick:function(){return F("Email")},children:"Email"}),(0,p.jsx)(cr,{theme:t,$active:"WhatsApp"===v,onClick:function(){return F("WhatsApp")},children:"WhatsApp"})]}),(0,p.jsx)(or,{children:(0,p.jsx)(_e,{contacts:a,loading:u,theme:t,emptyStateConfig:{icon:"Inbox"===x?"📥":"Skip"===x?"⏭️":"Spam"===x?"🚫":"📧",title:"Inbox"===x?"Inbox is empty!":"Skip"===x?"No skipped contacts!":"Spam"===x?"No spam contacts!":"No mail filter contacts!",text:"Inbox"===x?"All contacts have been categorized. Great work!":"Skip"===x?"No contacts have been skipped yet.":"Spam"===x?"No contacts have been marked as spam.":"No contacts from email filtering."},onContactUpdate:w,showActions:!0})})]})})};function lr(n){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lr(n)}var ur,dr,hr,pr,fr,mr,gr,xr,yr,br,vr,Fr,wr;function jr(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function Ar(){Ar=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function l(t,e,r,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype);return s(a,"_invoke",function(t,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:n,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=F(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=u(t,e,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new A(i||[])),!0),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(_([])));x&&x!==e&&r.call(x,o)&&(m=x);var y=f.prototype=h.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function v(n,t){function e(i,o,a,c){var s=u(n[i],n,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==lr(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):t.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return e("throw",n,a,c)}))}c(s.arg)}var i;s(this,"_invoke",(function(n,r){function o(){return new t((function(t,i){e(n,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function F(t,e){var r=e.method,i=t.i[r];if(i===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(i,t.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.r]=a.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){this.tryEntries.push(n)}function j(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function A(n){this.tryEntries=[[-1]],n.forEach(w,this),this.reset(!0)}function _(t){if(null!=t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(lr(t)+" is not iterable")}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,c,"GeneratorFunction")),n.prototype=Object.create(y),n},t.awrap=function(n){return{__await:n}},b(v.prototype),s(v.prototype,a,(function(){return this})),t.AsyncIterator=v,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var a=new v(l(n,e,r,i),o);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){a.type="throw",a.arg=t,e.next=n}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],c=this.prev,s=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!s&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<s)return this.method="next",this.arg=n,r(s),!0;if(c<l)return r(l),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===n||"continue"===n)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=n,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),j(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var i=r.arg;j(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:_(t),r:e,n:r},"next"===this.method&&(this.arg=n),d}},t}function _r(n,t,e,r,i,o,a){try{var c=n[o](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,i)}function kr(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){_r(o,r,i,a,c,"next",n)}function c(n){_r(o,r,i,a,c,"throw",n)}a(void 0)}))}}function Er(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Cr(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Cr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}var Br=c.Ay.div(ur||(ur=jr(["\n  min-height: 100vh;\n  background: ",";\n  transition: background-color 0.3s ease;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"})),Sr=c.Ay.div(dr||(dr=jr(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),Or=c.Ay.div(hr||(hr=jr(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 24px 20px 24px 20px;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Dr=c.Ay.div(pr||(pr=jr(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 1200px;\n  margin: 0 auto 20px auto;\n"]))),zr=c.Ay.div(fr||(fr=jr(["\n  flex: 1;\n"]))),Ir=c.Ay.h1(mr||(mr=jr(["\n  font-size: 28px;\n  font-weight: 700;\n  color: ",";\n  margin: 0 0 8px 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Tr=c.Ay.p(gr||(gr=jr(["\n  color: ",";\n  margin: 0;\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),$r=c.Ay.button(xr||(xr=jr(["\n  background: ",";\n  color: white;\n  border: none;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ","\n\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  &:hover {\n    transform: scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return n.$isRefreshing&&"\n    svg {\n      animation: spin 1s linear infinite;\n    }\n  "})),Pr=c.Ay.div(yr||(yr=jr(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 1200px;\n  margin: 20px auto 0 auto;\n  background: ",";\n  border-radius: 12px;\n  padding: 6px;\n  width: fit-content;\n  box-shadow: ",";\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)":"0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2)"})),qr=c.Ay.button(br||(br=jr(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  font-size: 15px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  min-width: fit-content;\n  white-space: nowrap;\n  position: relative;\n  box-shadow: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n    transform: translateY(-1px);\n    box-shadow: ",";\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.5), 0 1px 3px rgba(0, 0, 0, 0.4)"})),Nr=c.Ay.div(vr||(vr=jr(["\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n"]))),Rr=c.Ay.div(Fr||(Fr=jr(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 500px;\n  margin: 15px auto 0 auto;\n  background: ",";\n  border-radius: 8px;\n  padding: 4px;\n  width: fit-content;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),Mr=c.Ay.button(wr||(wr=jr(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  min-width: fit-content;\n  white-space: nowrap;\n  box-shadow: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n\n  &:active {\n    transform: scale(0.98);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.3)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12)":"0 1px 3px rgba(0, 0, 0, 0.4)"}));const Gr=function(n){var t=n.theme,e=((0,o.Zp)(),Er((0,r.useState)(!1),2)),i=e[0],a=e[1],c=Er((0,r.useState)("All"),2),l=c[0],u=c[1],d=Er((0,r.useState)("Today"),2),h=d[0],f=d[1],m=Er((0,r.useState)([]),2),g=m[0],x=m[1],y=Er((0,r.useState)(!0),2),b=y[0],v=y[1],F=function(){var n=kr(Ar().mark((function n(){var t,e,r,i,o,a,c,u;return Ar().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.prev=1,t=new Date,e=null,"Today"===h?t.setHours(0,0,0,0):"This Week"===h?((e=new Date).setDate(e.getDate()-1),e.setHours(23,59,59,999),(t=new Date).setDate(t.getDate()-7),t.setHours(0,0,0,0)):"This Month"===h&&((e=new Date).setDate(e.getDate()-8),e.setHours(23,59,59,999),(t=new Date).setDate(t.getDate()-30),t.setHours(0,0,0,0)),r=t.toISOString(),i=vt.from("contacts").select("*").not("category","in",'("Skip","WhatsApp Group Contact","System","Not Set","Inbox")').not("last_interaction_at","is",null),"All"!==l?"Founders"===l?i=i.eq("category","Founder"):"Investors"===l?i=i.eq("category","Professional Investor"):"Family and Friends"===l&&(i=i.eq("category","Friend and Family")):(i=i.gte("last_interaction_at",r),e&&(o=e.toISOString(),i=i.lte("last_interaction_at",o))),n.next=10,i.order("last_interaction_at",{ascending:!1,nullsLast:!0}).limit(100);case 10:if(a=n.sent,c=a.data,!(u=a.error)){n.next=15;break}throw u;case 15:console.log("Found ".concat((null==c?void 0:c.length)||0," contacts with interactions in ").concat(h.toLowerCase())),x(c||[]),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(1),console.error("Error fetching interactions:",n.t0),s.oR.error("Failed to load interactions");case 23:return n.prev=23,v(!1),n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[1,19,23,26]])})));return function(){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){F()}),[h,l]);var w=function(){var n=kr(Ar().mark((function n(){return Ar().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(!0),n.next=3,F();case 3:setTimeout((function(){return a(!1)}),1e3);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,p.jsx)(Br,{theme:t,children:(0,p.jsxs)(Sr,{children:[(0,p.jsxs)(Or,{theme:t,children:[(0,p.jsxs)(Dr,{children:[(0,p.jsxs)(zr,{children:[(0,p.jsx)(Ir,{theme:t,children:"Interactions"}),(0,p.jsx)(Tr,{theme:t,children:"View and manage all contact interactions"})]}),(0,p.jsx)($r,{theme:t,onClick:w,disabled:i,$isRefreshing:i,children:(0,p.jsx)(Ft.DIg,{})})]}),(0,p.jsx)(Pr,{theme:t,children:["All","Founders","Investors","Family and Friends"].map((function(n){return(0,p.jsx)(qr,{theme:t,$active:l===n,onClick:function(){return u(n)},children:n},n)}))})]}),"All"===l&&(0,p.jsxs)(Rr,{theme:t,children:[(0,p.jsx)(Mr,{theme:t,$active:"Today"===h,onClick:function(){return f("Today")},children:"Today"}),(0,p.jsx)(Mr,{theme:t,$active:"This Week"===h,onClick:function(){return f("This Week")},children:"This Week"}),(0,p.jsx)(Mr,{theme:t,$active:"This Month"===h,onClick:function(){return f("This Month")},children:"This Month"})]}),(0,p.jsx)(Nr,{children:(0,p.jsx)(_e,{contacts:g,loading:b,theme:t,emptyStateConfig:{icon:"🔄",title:"No recent interactions",text:"No contacts have had interactions in the last 30 days."},onContactUpdate:F,showActions:!0,badgeType:"category"})})]})})};var Wr,Ur,Lr,Yr,Kr,Hr,Zr,Jr,Vr,Qr,Xr,ni,ti,ei,ri,ii,oi,ai,ci,si;function li(n){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},li(n)}function ui(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function di(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function hi(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?di(Object(e),!0).forEach((function(t){pi(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):di(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function pi(n,t,e){return(t=function(n){var t=function(n){if("object"!=li(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,"string");if("object"!=li(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==li(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function fi(){fi=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function l(t,e,r,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype);return s(a,"_invoke",function(t,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:n,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=F(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=u(t,e,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new A(i||[])),!0),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(_([])));x&&x!==e&&r.call(x,o)&&(m=x);var y=f.prototype=h.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function v(n,t){function e(i,o,a,c){var s=u(n[i],n,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==li(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):t.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return e("throw",n,a,c)}))}c(s.arg)}var i;s(this,"_invoke",(function(n,r){function o(){return new t((function(t,i){e(n,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function F(t,e){var r=e.method,i=t.i[r];if(i===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(i,t.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.r]=a.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){this.tryEntries.push(n)}function j(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function A(n){this.tryEntries=[[-1]],n.forEach(w,this),this.reset(!0)}function _(t){if(null!=t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(li(t)+" is not iterable")}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,c,"GeneratorFunction")),n.prototype=Object.create(y),n},t.awrap=function(n){return{__await:n}},b(v.prototype),s(v.prototype,a,(function(){return this})),t.AsyncIterator=v,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var a=new v(l(n,e,r,i),o);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){a.type="throw",a.arg=t,e.next=n}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],c=this.prev,s=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!s&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<s)return this.method="next",this.arg=n,r(s),!0;if(c<l)return r(l),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===n||"continue"===n)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=n,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),j(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var i=r.arg;j(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:_(t),r:e,n:r},"next"===this.method&&(this.arg=n),d}},t}function mi(n,t,e,r,i,o,a){try{var c=n[o](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,i)}function gi(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){mi(o,r,i,a,c,"next",n)}function c(n){mi(o,r,i,a,c,"throw",n)}a(void 0)}))}}function xi(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return yi(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?yi(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yi(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}e(8598),e(744);var bi=c.Ay.div(Wr||(Wr=ui(["\n  min-height: 100vh;\n  background: ",";\n  transition: background-color 0.3s ease;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"})),vi=c.Ay.div(Ur||(Ur=ui(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),Fi=c.Ay.div(Lr||(Lr=ui(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 24px 20px 24px 20px;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),wi=c.Ay.div(Yr||(Yr=ui(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 1200px;\n  margin: 0 auto 20px auto;\n"]))),ji=c.Ay.div(Kr||(Kr=ui(["\n  flex: 1;\n"]))),Ai=c.Ay.h1(Hr||(Hr=ui(["\n  font-size: 28px;\n  font-weight: 700;\n  color: ",";\n  margin: 0 0 8px 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),_i=c.Ay.p(Zr||(Zr=ui(["\n  color: ",";\n  margin: 0;\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),ki=c.Ay.button(Jr||(Jr=ui(["\n  background: ",";\n  color: white;\n  border: none;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ","\n\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  &:hover {\n    transform: scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return n.$isRefreshing&&"\n    svg {\n      animation: spin 1s linear infinite;\n    }\n  "})),Ei=c.Ay.div(Vr||(Vr=ui(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 1200px;\n  margin: 20px auto 0 auto;\n  background: ",";\n  border-radius: 12px;\n  padding: 6px;\n  width: fit-content;\n  box-shadow: ",";\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)":"0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2)"})),Ci=c.Ay.button(Qr||(Qr=ui(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  font-size: 15px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  min-width: fit-content;\n  white-space: nowrap;\n  position: relative;\n  box-shadow: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n    transform: translateY(-1px);\n    box-shadow: ",";\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.5), 0 1px 3px rgba(0, 0, 0, 0.4)"})),Bi=c.Ay.div(Xr||(Xr=ui(["\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n"]))),Si=c.Ay.div(ni||(ni=ui(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  max-width: 600px;\n  margin: 20px auto 0 auto;\n  width: 100%;\n  padding: 0 20px;\n"]))),Oi=c.Ay.div(ti||(ti=ui(["\n  position: relative;\n  width: 100%;\n  display: flex;\n  align-items: center;\n"]))),Di=c.Ay.div(ei||(ei=ui(["\n  position: absolute;\n  left: 16px;\n  color: ",";\n  font-size: 14px;\n  z-index: 2;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),zi=c.Ay.input(ri||(ri=ui(["\n  width: 100%;\n  padding: 16px 48px 16px 48px;\n  border: 2px solid ",";\n  border-radius: 12px;\n  background: ",";\n  color: ",";\n  font-size: 16px;\n  transition: all 0.2s ease;\n  outline: none;\n\n  &::placeholder {\n    color: ",";\n  }\n\n  &:focus {\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#9CA3AF":"#6B7280"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"rgba(59, 130, 246, 0.1)":"rgba(96, 165, 250, 0.1)"})),Ii=c.Ay.button(ii||(ii=ui(["\n  position: absolute;\n  right: 16px;\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 20px;\n  cursor: pointer;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Ti=c.Ay.div(oi||(oi=ui(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n"]))),$i=c.Ay.div(ai||(ai=ui(["\n  font-size: 48px;\n  margin-bottom: 16px;\n"]))),Pi=c.Ay.h3(ci||(ci=ui(["\n  color: ",";\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0 0 8px 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),qi=c.Ay.p(si||(si=ui(["\n  color: ",";\n  font-size: 16px;\n  margin: 0;\n  max-width: 400px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}));const Ni=function(n){var t,e=n.theme,i=((0,o.Zp)(),xi((0,r.useState)(!1),2)),a=i[0],c=i[1],l=xi((0,r.useState)("Name"),2),u=l[0],d=l[1],h=xi((0,r.useState)(""),2),f=h[0],m=h[1],g=xi((0,r.useState)([]),2),x=g[0],y=g[1],b=xi((0,r.useState)(!1),2),v=b[0],F=b[1],w=xi((0,r.useState)(!1),2),j=w[0],A=w[1],_=function(){var n=gi(fi().mark((function n(){return fi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c(!0),!f.trim()){n.next=4;break}return n.next=4,k(f);case 4:setTimeout((function(){return c(!1)}),1e3);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),k=function(){var n=gi(fi().mark((function n(t){var e,r,i,o,a,c,l,d,h,p,f,m,g;return fi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.trim()){n.next=4;break}return y([]),A(!1),n.abrupt("return");case 4:F(!0),A(!0),n.prev=6,e=[],r=null,n.t0=u,n.next="Name"===n.t0?12:"Company"===n.t0?21:"City"===n.t0?27:"Tags"===n.t0?33:39;break;case 12:return i=t.trim().split(/\s+/),o="",1===i.length?o="first_name.ilike.%".concat(t,"%,last_name.ilike.%").concat(t,"%"):2===i.length?(a=xi(i,2),c=a[0],l=a[1],o="and(first_name.ilike.%".concat(c,"%,last_name.ilike.%").concat(l,"%),and(first_name.ilike.%").concat(l,"%,last_name.ilike.%").concat(c,"%),first_name.ilike.%").concat(t,"%,last_name.ilike.%").concat(t,"%")):(d=i.map((function(n){return"first_name.ilike.%".concat(n,"%,last_name.ilike.%").concat(n,"%")})).join(","),o="first_name.ilike.%".concat(t,"%,last_name.ilike.%").concat(t,"%,").concat(d)),n.next=17,vt.from("contacts").select("\n              *,\n              contact_emails (email, type, is_primary),\n              contact_mobiles (mobile, type, is_primary),\n              contact_companies (\n                company_id,\n                relationship,\n                is_primary,\n                companies (name, website, category)\n              ),\n              contact_tags (\n                tags (name)\n              ),\n              contact_cities (\n                cities (name, country)\n              )\n            ").not("category","in",'("Skip","WhatsApp Group Contact","System","Not Set")').or(o).order("last_interaction_at",{ascending:!1,nullsLast:!0}).limit(100);case 17:return h=n.sent,e=h.data,r=h.error,n.abrupt("break",41);case 21:return n.next=23,vt.from("contacts").select("\n              *,\n              contact_emails (email, type, is_primary),\n              contact_mobiles (mobile, type, is_primary),\n              contact_companies!inner (\n                company_id,\n                relationship,\n                is_primary,\n                companies!inner (name, website, category)\n              ),\n              contact_tags (\n                tags (name)\n              ),\n              contact_cities (\n                cities (name, country)\n              )\n            ").not("category","in",'("Skip","WhatsApp Group Contact","System","Not Set")').ilike("contact_companies.companies.name","%".concat(t,"%")).order("last_interaction_at",{ascending:!1,nullsLast:!0}).limit(100);case 23:return p=n.sent,e=p.data,r=p.error,n.abrupt("break",41);case 27:return n.next=29,vt.from("contacts").select("\n              *,\n              contact_emails (email, type, is_primary),\n              contact_mobiles (mobile, type, is_primary),\n              contact_companies (\n                company_id,\n                relationship,\n                is_primary,\n                companies (name, website, category)\n              ),\n              contact_tags (\n                tags (name)\n              ),\n              contact_cities!inner (\n                cities!inner (name, country)\n              )\n            ").not("category","in",'("Skip","WhatsApp Group Contact","System","Not Set")').ilike("contact_cities.cities.name","%".concat(t,"%")).order("last_interaction_at",{ascending:!1,nullsLast:!0}).limit(100);case 29:return f=n.sent,e=f.data,r=f.error,n.abrupt("break",41);case 33:return n.next=35,vt.from("contacts").select("\n              *,\n              contact_emails (email, type, is_primary),\n              contact_mobiles (mobile, type, is_primary),\n              contact_companies (\n                company_id,\n                relationship,\n                is_primary,\n                companies (name, website, category)\n              ),\n              contact_tags!inner (\n                tags!inner (name)\n              ),\n              contact_cities (\n                cities (name, country)\n              )\n            ").not("category","in",'("Skip","WhatsApp Group Contact","System","Not Set")').ilike("contact_tags.tags.name","%".concat(t,"%")).order("last_interaction_at",{ascending:!1,nullsLast:!0}).limit(100);case 35:return m=n.sent,e=m.data,r=m.error,n.abrupt("break",41);case 39:e=[],r=null;case 41:if(!r){n.next=43;break}throw r;case 43:g=(e||[]).map((function(n){var t,e,r;return hi(hi({},n),{},{emails:n.contact_emails||[],mobiles:n.contact_mobiles||[],companies:(null===(t=n.contact_companies)||void 0===t?void 0:t.map((function(n){return n.companies})).filter(Boolean))||[],tags:(null===(e=n.contact_tags)||void 0===e?void 0:e.map((function(n){var t;return null===(t=n.tags)||void 0===t?void 0:t.name})).filter(Boolean))||[],cities:(null===(r=n.contact_cities)||void 0===r?void 0:r.map((function(n){return n.cities})).filter(Boolean))||[]})})),y(g),console.log("Found ".concat(g.length,' contacts matching "').concat(t,'" in ').concat(u)),n.next=53;break;case 48:n.prev=48,n.t1=n.catch(6),console.error("Search error:",n.t1),s.oR.error("Failed to search contacts"),y([]);case 53:return n.prev=53,F(!1),n.finish(53);case 56:case"end":return n.stop()}}),n,null,[[6,48,53,56]])})));return function(t){return n.apply(this,arguments)}}(),E=(0,r.useCallback)((function(n){clearTimeout(t),t=setTimeout((function(){return k(n)}),300)}),[u]);return(0,r.useEffect)((function(){E(f)}),[f,E]),(0,r.useEffect)((function(){m(""),y([]),A(!1)}),[u]),(0,p.jsx)(bi,{theme:e,children:(0,p.jsxs)(vi,{children:[(0,p.jsxs)(Fi,{theme:e,children:[(0,p.jsxs)(wi,{children:[(0,p.jsxs)(ji,{children:[(0,p.jsx)(Ai,{theme:e,children:"Search"}),(0,p.jsx)(_i,{theme:e,children:"Find contacts by name, company, or details"})]}),(0,p.jsx)(ki,{theme:e,onClick:_,disabled:a,$isRefreshing:a,children:(0,p.jsx)(Ft.DIg,{})})]}),(0,p.jsx)(Ei,{theme:e,children:["Name","Company","City","Tags"].map((function(n){return(0,p.jsx)(Ci,{theme:e,$active:u===n,onClick:function(){return d(n)},children:n},n)}))}),(0,p.jsx)(Si,{theme:e,children:(0,p.jsxs)(Oi,{children:[(0,p.jsx)(Di,{theme:e,children:(0,p.jsx)(Ft.KSO,{})}),(0,p.jsx)(zi,{theme:e,type:"text",placeholder:"Search by ".concat(u.toLowerCase(),"..."),value:f,onChange:function(n){return m(n.target.value)}}),f&&(0,p.jsx)(Ii,{theme:e,onClick:function(){return m("")},children:"×"})]})})]}),(0,p.jsxs)(Bi,{children:[!j&&!f&&(0,p.jsxs)(Ti,{theme:e,children:[(0,p.jsx)($i,{children:"🔍"}),(0,p.jsx)(Pi,{theme:e,children:"Start searching"}),(0,p.jsxs)(qi,{theme:e,children:["Enter a search term to find contacts by ",u.toLowerCase()]})]}),j&&(0,p.jsx)(_e,{contacts:x,loading:v,theme:e,emptyStateConfig:{icon:"🔍",title:"No contacts found",text:'No contacts match "'.concat(f,'" in ').concat(u.toLowerCase(),".")},onContactUpdate:function(){return k(f)},showActions:!0,badgeType:"category"})]})]})})};var Ri,Mi,Gi,Wi,Ui,Li,Yi,Ki,Hi,Zi,Ji,Vi,Qi,Xi,no,to,eo;function ro(n){return ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ro(n)}function io(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function oo(){oo=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function l(t,e,r,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype);return s(a,"_invoke",function(t,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:n,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=F(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=u(t,e,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new A(i||[])),!0),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(_([])));x&&x!==e&&r.call(x,o)&&(m=x);var y=f.prototype=h.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function v(n,t){function e(i,o,a,c){var s=u(n[i],n,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==ro(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):t.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return e("throw",n,a,c)}))}c(s.arg)}var i;s(this,"_invoke",(function(n,r){function o(){return new t((function(t,i){e(n,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function F(t,e){var r=e.method,i=t.i[r];if(i===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(i,t.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.r]=a.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){this.tryEntries.push(n)}function j(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function A(n){this.tryEntries=[[-1]],n.forEach(w,this),this.reset(!0)}function _(t){if(null!=t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(ro(t)+" is not iterable")}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,c,"GeneratorFunction")),n.prototype=Object.create(y),n},t.awrap=function(n){return{__await:n}},b(v.prototype),s(v.prototype,a,(function(){return this})),t.AsyncIterator=v,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var a=new v(l(n,e,r,i),o);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){a.type="throw",a.arg=t,e.next=n}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],c=this.prev,s=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!s&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<s)return this.method="next",this.arg=n,r(s),!0;if(c<l)return r(l),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===n||"continue"===n)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=n,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),j(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var i=r.arg;j(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:_(t),r:e,n:r},"next"===this.method&&(this.arg=n),d}},t}function ao(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function co(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(e),!0).forEach((function(t){so(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ao(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function so(n,t,e){return(t=function(n){var t=function(n){if("object"!=ro(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,"string");if("object"!=ro(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==ro(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function lo(n,t,e,r,i,o,a){try{var c=n[o](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,i)}function uo(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){lo(o,r,i,a,c,"next",n)}function c(n){lo(o,r,i,a,c,"throw",n)}a(void 0)}))}}function ho(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return po(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?po(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function po(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}e(113),e(6910);var fo=c.Ay.div(Ri||(Ri=io(["\n  min-height: 100vh;\n  background: ",";\n  transition: background-color 0.3s ease;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"})),mo=c.Ay.div(Mi||(Mi=io(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n"]))),go=c.Ay.div(Gi||(Gi=io(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 24px 20px 24px 20px;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),xo=c.Ay.div(Wi||(Wi=io(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 1200px;\n  margin: 0 auto 20px auto;\n"]))),yo=c.Ay.div(Ui||(Ui=io(["\n  flex: 1;\n"]))),bo=c.Ay.h1(Li||(Li=io(["\n  font-size: 28px;\n  font-weight: 700;\n  color: ",";\n  margin: 0 0 8px 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),vo=c.Ay.p(Yi||(Yi=io(["\n  color: ",";\n  margin: 0;\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Fo=c.Ay.button(Ki||(Ki=io(["\n  background: ",";\n  color: white;\n  border: none;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  ","\n\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  &:hover {\n    transform: scale(1.05);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return n.$isRefreshing&&"\n    svg {\n      animation: spin 1s linear infinite;\n    }\n  "})),wo=c.Ay.div(Hi||(Hi=io(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 1200px;\n  margin: 20px auto 0 auto;\n  background: ",";\n  border-radius: 12px;\n  padding: 6px;\n  width: fit-content;\n  box-shadow: ",";\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)":"0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2)"})),jo=c.Ay.button(Zi||(Zi=io(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  font-size: 15px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  min-width: fit-content;\n  white-space: nowrap;\n  position: relative;\n  box-shadow: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n    transform: translateY(-1px);\n    box-shadow: ",";\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.5), 0 1px 3px rgba(0, 0, 0, 0.4)"})),Ao=c.Ay.div(Ji||(Ji=io(["\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),_o=(c.Ay.div(Vi||(Vi=io(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 40px;\n  text-align: center;\n  max-width: 500px;\n  margin: 0 auto;\n"]))),c.Ay.div(Qi||(Qi=io(["\n  font-size: 64px;\n  margin-bottom: 24px;\n"]))),c.Ay.h2(Xi||(Xi=io(["\n  font-size: 32px;\n  font-weight: 600;\n  color: ",";\n  margin: 0 0 16px 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),c.Ay.p(no||(no=io(["\n  color: ",";\n  font-size: 18px;\n  line-height: 1.6;\n  margin: 0;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),c.Ay.div(to||(to=io(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 500px;\n  margin: 15px auto 0 auto;\n  background: ",";\n  border-radius: 8px;\n  padding: 4px;\n  width: fit-content;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}))),ko=c.Ay.button(eo||(eo=io(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  min-width: fit-content;\n  white-space: nowrap;\n  box-shadow: ",";\n\n  &:hover:not([disabled]) {\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.2)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.15)":"0 1px 3px rgba(0, 0, 0, 0.3)"}));const Eo=function(n){var t=n.theme,e=n.onKeepInTouchCountChange,i=((0,o.Zp)(),ho((0,r.useState)([]),2)),a=i[0],c=i[1],l=ho((0,r.useState)(!0),2),u=l[0],d=l[1],h=ho((0,r.useState)(!1),2),f=h[0],m=h[1],g=ho((0,r.useState)("Touch Base"),2),x=g[0],y=g[1],b=ho((0,r.useState)("Over Due"),2),v=b[0],F=b[1],w=function(){var n=uo(oo().mark((function n(){var t,r,i,o,a,l,u,h,p,f,m,g,y,b,F,w,j,A,_;return oo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d(!0),n.prev=1,t=vt.from("v_keep_in_touch").select("*"),"Touch Base"!==x){n.next=7;break}"Over Due"===v?t=t.lt("days_until_next",-30):"Due"===v?t=t.gte("days_until_next",-30).lt("days_until_next",0):"Soon"===v?t=t.gte("days_until_next",0).lte("days_until_next",7):"Relax"===v&&(t=t.gt("days_until_next",7)),n.next=46;break;case 7:if("Birthday"!==x){n.next=25;break}return(r=new Date).getMonth(),r.getDate(),n.next=13,vt.from("contacts").select("\n            *,\n            contact_emails (email, type, is_primary),\n            contact_mobiles (mobile, type, is_primary),\n            contact_companies (\n              company_id,\n              relationship,\n              is_primary,\n              companies (name, website, category)\n            ),\n            contact_tags (\n              tags (name)\n            ),\n            contact_cities (\n              cities (name, country)\n            )\n          ").not("birthday","is",null).order("first_name",{ascending:!0});case 13:if(i=n.sent,o=i.data,!(a=i.error)){n.next=18;break}throw a;case 18:return l=(o||[]).map((function(n){var t,e,i,o=n.birthday.split("-"),a=parseInt(o[0]),c=parseInt(o[1]),s=parseInt(o[2]),l=new Date(r.getFullYear(),c-1,s),u=r.getFullYear();l<r&&(l=new Date(r.getFullYear()+1,c-1,s),u=r.getFullYear()+1);var d=u-a,h=Math.floor((l-r)/864e5);return co(co({},n),{},{emails:n.contact_emails||[],mobiles:n.contact_mobiles||[],companies:(null===(t=n.contact_companies)||void 0===t?void 0:t.map((function(n){return n.companies})).filter(Boolean))||[],tags:(null===(e=n.contact_tags)||void 0===e?void 0:e.map((function(n){var t;return null===(t=n.tags)||void 0===t?void 0:t.name})).filter(Boolean))||[],cities:(null===(i=n.contact_cities)||void 0===i?void 0:i.map((function(n){return n.cities})).filter(Boolean))||[],days_until_birthday:h,next_birthday:l,birthday_month:c,birthday_day:s,turning_age:d,birth_year:a})})).filter((function(n){var t=n.days_until_birthday;switch(v){case"Today":return 0===t;case"This Week":return t<=7;case"This Month":return t<=30;case"Next 3 Months":return t<=90;default:return!0}})).sort((function(n,t){return n.days_until_birthday-t.days_until_birthday})),c(l),e&&e(l.length),d(!1),n.abrupt("return");case 25:if("Keep in Touch"!==x){n.next=42;break}return u=vt.from("contacts").select("\n            *,\n            contact_emails (email, type, is_primary),\n            contact_mobiles (mobile, type, is_primary),\n            contact_companies (\n              company_id,\n              relationship,\n              is_primary,\n              companies (name, website, category)\n            ),\n            contact_tags (\n              tags (name)\n            ),\n            contact_cities (\n              cities (name, country)\n            )\n          ").not("keep_in_touch_frequency","in",'("Not Set","Do not keep in touch")').not("keep_in_touch_frequency","is",null).not("category","in",'("Skip","WhatsApp Group Contact","System","Not Set","Inbox")'),"All"!==v&&(u=u.eq("keep_in_touch_frequency",v)),n.next=30,u.order("first_name",{ascending:!0});case 30:if(h=n.sent,p=h.data,!(f=h.error)){n.next=35;break}throw f;case 35:return m=(p||[]).map((function(n){var t,e,r;return co(co({},n),{},{emails:n.contact_emails||[],mobiles:n.contact_mobiles||[],companies:(null===(t=n.contact_companies)||void 0===t?void 0:t.map((function(n){return n.companies})).filter(Boolean))||[],tags:(null===(e=n.contact_tags)||void 0===e?void 0:e.map((function(n){var t;return null===(t=n.tags)||void 0===t?void 0:t.name})).filter(Boolean))||[],cities:(null===(r=n.contact_cities)||void 0===r?void 0:r.map((function(n){return n.cities})).filter(Boolean))||[]})})),c(m),e&&e(m.length),d(!1),n.abrupt("return");case 42:return c([]),e&&e(0),d(!1),n.abrupt("return");case 46:return n.next=48,t.order("days_until_next",{ascending:!0}).limit(100);case 48:if(g=n.sent,y=g.data,!(b=g.error)){n.next=53;break}throw b;case 53:if(F=(y||[]).map((function(n){return n.contact_id})),w=[],!(F.length>0)){n.next=64;break}return n.next=58,vt.from("contacts").select("\n            *,\n            contact_emails (email, type, is_primary),\n            contact_mobiles (mobile, type, is_primary),\n            contact_companies (\n              company_id,\n              relationship,\n              is_primary,\n              companies (name, website, category)\n            ),\n            contact_tags (\n              tags (name)\n            ),\n            contact_cities (\n              cities (name, country)\n            )\n          ").in("contact_id",F);case 58:if(j=n.sent,A=j.data,!(_=j.error)){n.next=63;break}throw _;case 63:w=(y||[]).map((function(n){var t,e,r,i=(A||[]).find((function(t){return t.contact_id===n.contact_id}));return i?co(co({},i),{},{keep_in_touch_frequency:n.frequency,days_until_next:n.days_until_next,next_interaction_date:n.next_interaction_date,why_keeping_in_touch:n.why_keeping_in_touch,next_follow_up_notes:n.next_follow_up_notes,emails:i.contact_emails||[],mobiles:i.contact_mobiles||[],companies:(null===(t=i.contact_companies)||void 0===t?void 0:t.map((function(n){return n.companies})).filter(Boolean))||[],tags:(null===(e=i.contact_tags)||void 0===e?void 0:e.map((function(n){var t;return null===(t=n.tags)||void 0===t?void 0:t.name})).filter(Boolean))||[],cities:(null===(r=i.contact_cities)||void 0===r?void 0:r.map((function(n){return n.cities})).filter(Boolean))||[]}):null})).filter(Boolean);case 64:c(w),e&&e(w.length),n.next=72;break;case 68:n.prev=68,n.t0=n.catch(1),console.error("Error fetching ".concat(x," keep-in-touch contacts:"),n.t0),s.oR.error("Failed to load ".concat(x," keep-in-touch contacts"));case 72:return n.prev=72,d(!1),n.finish(72);case 75:case"end":return n.stop()}}),n,null,[[1,68,72,75]])})));return function(){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){w()}),[x,v]);var j=function(){var n=uo(oo().mark((function n(){return oo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m(!0),n.next=3,w();case 3:setTimeout((function(){return m(!1)}),1e3);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,p.jsx)(fo,{theme:t,children:(0,p.jsxs)(mo,{children:[(0,p.jsxs)(go,{theme:t,children:[(0,p.jsxs)(xo,{children:[(0,p.jsxs)(yo,{children:[(0,p.jsx)(bo,{theme:t,children:"Keep in Touch"}),(0,p.jsx)(vo,{theme:t,children:"Follow-up reminders"})]}),(0,p.jsx)(Fo,{theme:t,onClick:j,disabled:f,$isRefreshing:f,children:(0,p.jsx)(Ft.DIg,{})})]}),(0,p.jsx)(wo,{theme:t,children:["Touch Base","Birthday","Keep in Touch"].map((function(n){return(0,p.jsx)(jo,{theme:t,$active:x===n,onClick:function(){return y(n)},children:n},n)}))})]}),"Touch Base"===x&&(0,p.jsx)(_o,{theme:t,children:["Over Due","Due","Soon","Relax"].map((function(n){return(0,p.jsx)(ko,{theme:t,$active:v===n,onClick:function(){return F(n)},children:n},n)}))}),"Birthday"===x&&(0,p.jsx)(_o,{theme:t,children:["This Week","This Month","Next 3 Months","All"].map((function(n){return(0,p.jsx)(ko,{theme:t,$active:v===n,onClick:function(){return F(n)},children:n},n)}))}),"Keep in Touch"===x&&(0,p.jsx)(_o,{theme:t,children:["All","Weekly","Monthly","Quarterly","Twice per Year","Once per Year"].map((function(n){return(0,p.jsx)(ko,{theme:t,$active:v===n,onClick:function(){return F(n)},children:n},n)}))}),(0,p.jsx)(Ao,{children:(0,p.jsx)(_e,{contacts:a,loading:u,theme:t,emptyStateConfig:{icon:"📞",title:"No keep-in-touch contacts!",text:"All contacts are up to date with follow-ups."},onContactUpdate:w,showActions:!0,pageContext:"keepInTouch",keepInTouchData:{showDaysCounter:!0,showFrequencyBadge:!0},filterCategory:x})})]})})};var Co,Bo,So,Oo,Do,zo,Io,To,$o,Po,qo,No,Ro,Mo,Go,Wo,Uo,Lo,Yo,Ko,Ho,Zo,Jo,Vo,Qo,Xo,na,ta,ea,ra,ia,oa,aa,ca,sa,la,ua,da,ha,pa,fa,ma,ga,xa,ya,ba,va,Fa,wa,ja,Aa,_a,ka,Ea,Ca,Ba,Sa,Oa,Da,za,Ia,Ta,$a,Pa,qa,Na,Ra,Ma,Ga,Wa,Ua,La,Ya,Ka,Ha,Za,Ja,Va,Qa,Xa,nc,tc,ec,rc,ic,oc,ac,cc,sc,lc,uc,dc,hc,pc,fc,mc,gc,xc,yc,bc,vc,Fc,wc,jc,Ac,_c,kc,Ec,Cc,Bc,Sc,Oc,Dc,zc,Ic,Tc,$c,Pc,qc,Nc,Rc,Mc,Gc,Wc,Uc,Lc,Yc,Kc,Hc,Zc,Jc,Vc,Qc,Xc,ns,ts,es,rs,is,os,as,cs,ss,ls,us,ds,hs,ps,fs,ms,gs,xs,ys,bs,vs,Fs,ws,js,As,_s,ks,Es,Cs,Bs,Ss,Os,Ds,zs,Is,Ts,$s,Ps,qs,Ns,Rs,Ms,Gs,Ws,Us,Ls,Ys,Ks,Hs,Zs,Js,Vs,Qs,Xs,nl,tl,el,rl,il,ol,al,cl,sl,ll,ul,dl;function hl(n){return hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hl(n)}function pl(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function fl(){fl=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function l(t,e,r,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype);return s(a,"_invoke",function(t,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:n,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=F(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=u(t,e,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new A(i||[])),!0),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(_([])));x&&x!==e&&r.call(x,o)&&(m=x);var y=f.prototype=h.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function v(n,t){function e(i,o,a,c){var s=u(n[i],n,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==hl(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):t.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return e("throw",n,a,c)}))}c(s.arg)}var i;s(this,"_invoke",(function(n,r){function o(){return new t((function(t,i){e(n,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function F(t,e){var r=e.method,i=t.i[r];if(i===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(i,t.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.r]=a.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){this.tryEntries.push(n)}function j(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function A(n){this.tryEntries=[[-1]],n.forEach(w,this),this.reset(!0)}function _(t){if(null!=t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(hl(t)+" is not iterable")}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,c,"GeneratorFunction")),n.prototype=Object.create(y),n},t.awrap=function(n){return{__await:n}},b(v.prototype),s(v.prototype,a,(function(){return this})),t.AsyncIterator=v,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var a=new v(l(n,e,r,i),o);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){a.type="throw",a.arg=t,e.next=n}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],c=this.prev,s=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!s&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<s)return this.method="next",this.arg=n,r(s),!0;if(c<l)return r(l),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===n||"continue"===n)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=n,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),j(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var i=r.arg;j(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:_(t),r:e,n:r},"next"===this.method&&(this.arg=n),d}},t}function ml(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function gl(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ml(Object(e),!0).forEach((function(t){xl(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ml(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function xl(n,t,e){return(t=function(n){var t=function(n){if("object"!=hl(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,"string");if("object"!=hl(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==hl(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function yl(n,t,e,r,i,o,a){try{var c=n[o](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,i)}function bl(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){yl(o,r,i,a,c,"next",n)}function c(n){yl(o,r,i,a,c,"throw",n)}a(void 0)}))}}function vl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||Fl(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(n,t){if(n){if("string"==typeof n)return wl(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?wl(n,t):void 0}}function wl(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}e(5506),e(6034),e(1761),e(2781),e(5874),jt().setAppElement("#root");var jl=c.Ay.div(Co||(Co=pl(["\n  min-height: 100vh;\n  background: ",";\n  transition: background-color 0.3s ease;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"})),Al=c.Ay.div(Bo||(Bo=pl(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  border-radius: 0;\n\n  @media (min-width: 768px) {\n    margin: 20px;\n    border-radius: 12px;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n    min-height: calc(100vh - 40px);\n  }\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),_l=c.Ay.div(So||(So=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid ",";\n  background: ",";\n  position: sticky;\n  top: 0;\n  z-index: 10;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),kl=c.Ay.button(Oo||(Oo=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 16px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 0;\n  font-weight: 500;\n\n  &:hover {\n    text-decoration: underline;\n  }\n\n  @media (max-width: 640px) {\n    gap: 0;\n    padding: 8px 4px;\n\n    span {\n      display: none;\n    }\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),El=c.Ay.div(Do||(Do=pl(["\n  display: flex;\n  gap: 8px;\n\n  @media (max-width: 640px) {\n    gap: 4px;\n  }\n"]))),Cl=c.Ay.a(zo||(zo=pl(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 16px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  text-decoration: none;\n  transition: all 0.2s ease;\n  border: none;\n  cursor: pointer;\n  font-family: inherit;\n\n  @media (max-width: 640px) {\n    padding: 10px 12px;\n    gap: 0;\n    font-size: 16px;\n\n    span {\n      display: none;\n    }\n  }\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n"])),(function(n){return n.$primary&&"\n    background: #3B82F6;\n    color: white;\n\n    &:hover {\n      background: #2563EB;\n      color: white;\n    }\n  "}),(function(n){return n.$secondary&&"\n    background: #10B981;\n    color: white;\n\n    &:hover {\n      background: #059669;\n      color: white;\n    }\n  "}),(function(n){return n.$edit&&"\n    background: #F59E0B;\n    color: white;\n\n    &:hover {\n      background: #D97706;\n      color: white;\n    }\n  "}),(function(n){return n.$delete&&"\n    background: #EF4444;\n    color: white;\n\n    &:hover {\n      background: #DC2626;\n      color: white;\n    }\n  "})),Bl=c.Ay.div(Io||(Io=pl(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 20px;\n  -webkit-overflow-scrolling: touch;\n"]))),Sl=c.Ay.div(To||(To=pl(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 32px;\n  padding-bottom: 24px;\n  border-bottom: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Ol=c.Ay.div($o||($o=pl(["\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 16px;\n  flex-shrink: 0;\n  border: 3px solid ",";\n\n  img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n\n  svg {\n    color: ",";\n    font-size: 32px;\n  }\n\n  @media (min-width: 768px) {\n    width: 100px;\n    height: 100px;\n\n    svg {\n      font-size: 40px;\n    }\n  }\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#4B5563"}),(function(n){return"light"===n.theme?"#E5E7EB":"#6B7280"}),(function(n){return"light"===n.theme?"#9CA3AF":"#D1D5DB"})),Dl=c.Ay.div(Po||(Po=pl(["\n  flex: 1;\n"]))),zl=c.Ay.div(qo||(qo=pl(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 6px;\n"]))),Il=c.Ay.h2(No||(No=pl(["\n  font-size: 24px;\n  font-weight: 700;\n  color: ",";\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n\n  @media (min-width: 768px) {\n    font-size: 28px;\n  }\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Tl=c.Ay.span(Ro||(Ro=pl(["\n  font-size: 16px;\n  font-weight: 500;\n  color: ",";\n\n  @media (min-width: 768px) {\n    font-size: 18px;\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),$l=c.Ay.button(Mo||(Mo=pl(["\n  background: #8B5CF6;\n  color: white;\n  border: none;\n  padding: 8px 10px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n\n  &:hover {\n    background: #7C3AED;\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"]))),Pl=c.Ay.div(Go||(Go=pl(["\n  color: ",";\n  font-size: 16px;\n  margin-bottom: 8px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),ql=c.Ay.div(Wo||(Wo=pl(["\n  display: flex;\n  gap: 8px;\n  margin-top: 8px;\n  flex-wrap: wrap;\n"]))),Nl=c.Ay.div(Uo||(Uo=pl(["\n  background: ",";\n  color: ",";\n  padding: 3px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n  display: inline-block;\n  border: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#F0FDF4":"#14532D"}),(function(n){return"light"===n.theme?"#16A34A":"#86EFAC"}),(function(n){return"light"===n.theme?"#BBF7D0":"#166534"})),Rl=c.Ay.div(Lo||(Lo=pl(["\n  background: white;\n  color: ",";\n  padding: 2px 6px;\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 500;\n  display: inline-block;\n"])),(function(n){return n.theme,"#1D4ED8"})),Ml=c.Ay.div(Yo||(Yo=pl(["\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n"]))),Gl=c.Ay.div(Ko||(Ko=pl([""]))),Wl=c.Ay.h3(Ho||(Ho=pl(["\n  font-size: 18px;\n  font-weight: 600;\n  color: ",";\n  margin: 0 0 16px 0;\n  padding-bottom: 8px;\n  border-bottom: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Ul=c.Ay.div(Zo||(Zo=pl(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]))),Ll=c.Ay.div(Jo||(Jo=pl(["\n  display: flex;\n  align-items: flex-start;\n"]))),Yl=c.Ay.div(Vo||(Vo=pl(["\n  width: 40px;\n  display: flex;\n  justify-content: center;\n  margin-top: 2px;\n  flex-shrink: 0;\n\n  svg {\n    color: ",";\n    font-size: 16px;\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Kl=c.Ay.div(Qo||(Qo=pl(["\n  flex: 1;\n"]))),Hl=c.Ay.div(Xo||(Xo=pl(["\n  font-size: 14px;\n  color: ",";\n  margin-bottom: 2px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Zl=c.Ay.div(na||(na=pl(["\n  color: ",";\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n\n  a {\n    color: ",";\n    text-decoration: none;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),Jl=c.Ay.div(ta||(ta=pl(["\n  font-size: 14px;\n  color: ",";\n  margin-top: 4px;\n\n  a {\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Vl=c.Ay.span(ea||(ea=pl(["\n  background: ",";\n  color: ",";\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#D1FAE5":"#065F46"}),(function(n){return"light"===n.theme?"#065F46":"#6EE7B7"})),Ql=c.Ay.div(ra||(ra=pl(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n"]))),Xl=c.Ay.span(ia||(ia=pl(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  padding: 6px 12px;\n  border-radius: 16px;\n  font-size: 14px;\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#4B5563"}),(function(n){return"light"===n.theme?"#374151":"#D1D5DB"}),(function(n){return"light"===n.theme?"#D1D5DB":"#6B7280"})),nu=c.Ay.div(oa||(oa=pl(["\n  color: ",";\n  line-height: 1.6;\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#374151":"#D1D5DB"})),tu=c.Ay.div(aa||(aa=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  padding: 60px 20px;\n"]))),eu=c.Ay.div(ca||(ca=pl(["\n  width: 24px;\n  height: 24px;\n  border: 3px solid ",";\n  border-top: 3px solid ",";\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),ru=c.Ay.span(sa||(sa=pl(["\n  color: ",";\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),iu=c.Ay.div(la||(la=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n"]))),ou=c.Ay.div(ua||(ua=pl(["\n  color: ",";\n  font-size: 18px;\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#EF4444":"#F87171"})),au=c.Ay.div(da||(da=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid ",";\n\n  h2 {\n    color: ",";\n    margin: 0;\n    font-size: 1.2em;\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),cu=c.Ay.button(ha||(ha=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  padding: 5px;\n  border-radius: 3px;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),su=c.Ay.div(pa||(pa=pl(["\n  margin-bottom: 15px;\n"]))),lu=c.Ay.div(fa||(fa=pl(["\n  margin-bottom: 8px;\n"]))),uu=c.Ay.span(ma||(ma=pl(["\n  color: ",";\n  font-weight: 500;\n  margin-right: 8px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),du=c.Ay.span(ga||(ga=pl(["\n  color: ",";\n  font-weight: 600;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),hu=c.Ay.div(xa||(xa=pl(["\n  color: ",";\n  margin-bottom: 20px;\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),pu=c.Ay.div(ya||(ya=pl(["\n  max-height: 300px;\n  overflow-y: auto;\n  margin-bottom: 20px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 10px;\n  background: ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#F9FAFB":"#1F2937"})),fu=c.Ay.div(ba||(ba=pl(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n"]))),mu=c.Ay.div(va||(va=pl(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n\n  label {\n    color: ",";\n    cursor: pointer;\n    user-select: none;\n    flex: 1;\n  }\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),gu=c.Ay.input(Fa||(Fa=pl(["\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  accent-color: ",";\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),xu=c.Ay.div(wa||(wa=pl(["\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n  margin-top: 20px;\n  padding-top: 15px;\n  border-top: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),yu=c.Ay.button(ja||(ja=pl(["\n  background: #DC2626;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: background-color 0.2s;\n\n  &:hover:not(:disabled) {\n    background: #B91C1C;\n  }\n\n  &:disabled {\n    background: ",";\n    cursor: not-allowed;\n    opacity: 0.7;\n  }\n"])),(function(n){return"light"===n.theme?"#9CA3AF":"#4B5563"})),bu=c.Ay.button(Aa||(Aa=pl(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  padding: 10px 20px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: background-color 0.2s;\n\n  &:hover:not(:disabled) {\n    background: ",";\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.7;\n  }\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#374151":"#F9FAFB"}),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),vu=c.Ay.div(_a||(_a=pl(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 600px;\n  margin: 24px auto;\n  background: ",";\n  border-radius: 12px;\n  padding: 6px;\n  width: fit-content;\n  box-shadow: ",";\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)":"0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2)"})),Fu=c.Ay.button(ka||(ka=pl(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  font-size: 15px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  min-width: fit-content;\n  white-space: nowrap;\n  position: relative;\n  box-shadow: ",";\n\n  &:hover {\n    background: ",";\n    color: ",";\n    transform: translateY(-1px);\n    box-shadow: ",";\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.5), 0 1px 3px rgba(0, 0, 0, 0.4)"})),wu=c.Ay.div(Ea||(Ea=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  color: ",";\n  font-size: 18px;\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),ju=c.Ay.div(Ca||(Ca=pl(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 500px;\n  margin: 15px auto 0 auto;\n  background: ",";\n  border-radius: 8px;\n  padding: 4px;\n  width: fit-content;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),Au=c.Ay.button(Ba||(Ba=pl(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  min-width: fit-content;\n  white-space: nowrap;\n  box-shadow: ",";\n\n  &:hover:not([disabled]) {\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n\n  &:active:not([disabled]) {\n    transform: scale(0.98);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.2)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12)":"0 1px 3px rgba(0, 0, 0, 0.4)"})),_u=c.Ay.div(Sa||(Sa=pl(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 500px;\n  margin: 15px auto 0 auto;\n  background: ",";\n  border-radius: 8px;\n  padding: 4px;\n  width: fit-content;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),ku=c.Ay.button(Oa||(Oa=pl(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  min-width: fit-content;\n  white-space: nowrap;\n  box-shadow: ",";\n\n  &:hover:not([disabled]) {\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n\n  &:active:not([disabled]) {\n    transform: scale(0.98);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.2)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12)":"0 1px 3px rgba(0, 0, 0, 0.4)"})),Eu=c.Ay.div(Da||(Da=pl(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2px;\n  max-width: 600px;\n  margin: 15px auto 0 auto;\n  background: ",";\n  border-radius: 8px;\n  padding: 4px;\n  width: fit-content;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),Cu=c.Ay.button(za||(za=pl(["\n  background: ",";\n  color: ",";\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  min-width: fit-content;\n  white-space: nowrap;\n  box-shadow: ",";\n\n  &:hover:not([disabled]) {\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n\n  &:active:not([disabled]) {\n    transform: scale(0.98);\n  }\n"])),(function(n){return n.$active?"light"===n.theme?"#FFFFFF":"#1F2937":"transparent"}),(function(n){return n.$active?"light"===n.theme?"#111827":"#F9FAFB":"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$active?"600":"500"}),(function(n){return n.$active?"light"===n.theme?"0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.2)":"none"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"0 1px 3px rgba(0, 0, 0, 0.12)":"0 1px 3px rgba(0, 0, 0, 0.4)"})),Bu=c.Ay.div(Ia||(Ia=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid ",";\n\n  h3 {\n    color: ",";\n    margin: 0;\n    font-size: 1.1em;\n    font-weight: 600;\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Su=c.Ay.button(Ta||(Ta=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  padding: 5px;\n  border-radius: 3px;\n  font-size: 18px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Ou=c.Ay.div($a||($a=pl(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n"]))),Du=c.Ay.div(Pa||(Pa=pl(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid ",";\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n  }\n\n  &:active {\n    transform: scale(0.98);\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#D1D5DB":"#6B7280"})),zu=c.Ay.div(qa||(qa=pl(["\n  width: 32px;\n  height: 32px;\n  background: ",";\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n\n  svg {\n    color: ",";\n    font-size: 14px;\n  }\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#4B5563"}),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Iu=c.Ay.div(Na||(Na=pl(["\n  flex: 1;\n"]))),Tu=c.Ay.div(Ra||(Ra=pl(["\n  color: ",";\n  font-weight: 500;\n  font-size: 15px;\n  margin-bottom: 2px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),$u=c.Ay.div(Ma||(Ma=pl(["\n  color: ",";\n  font-size: 13px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Pu=c.Ay.span(Ga||(Ga=pl(["\n  background: ",";\n  color: ",";\n  padding: 2px 6px;\n  border-radius: 8px;\n  font-size: 11px;\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#D1FAE5":"#065F46"}),(function(n){return"light"===n.theme?"#065F46":"#6EE7B7"})),qu=c.Ay.div(Wa||(Wa=pl(["\n  padding: 20px;\n  max-height: 600px;\n  overflow-y: auto;\n"]))),Nu=c.Ay.div(Ua||(Ua=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  padding: 60px 20px;\n  color: ",";\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Ru=c.Ay.div(La||(La=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  color: ",";\n  font-size: 16px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Mu=c.Ay.div(Ya||(Ya=pl(["\n  position: relative;\n"]))),Gu=c.Ay.div(Ka||(Ka=pl(["\n  margin-bottom: 30px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),Wu=c.Ay.div(Ha||(Ha=pl(["\n  font-weight: 600;\n  color: ",";\n  font-size: 16px;\n  margin-bottom: 16px;\n  padding-left: 50px;\n  position: sticky;\n  top: 0;\n  background: ",";\n  padding-top: 8px;\n  padding-bottom: 8px;\n  z-index: 5;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),Uu=c.Ay.div(Za||(Za=pl(["\n  position: relative;\n"]))),Lu=c.Ay.div(Ja||(Ja=pl(["\n  position: relative;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: flex-start;\n  gap: 16px;\n  cursor: ",";\n  transition: all 0.2s ease;\n\n  ","\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"])),(function(n){return n.$clickable?"pointer":"default"}),(function(n){return n.$clickable&&"\n    &:hover {\n      transform: translateY(-1px);\n\n      & > div:last-child {\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      }\n    }\n  "})),Yu=c.Ay.div(Va||(Va=pl(["\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  z-index: 2;\n  flex-shrink: 0;\n\n  background: ",";\n\n  color: ",";\n\n  border: 3px solid ",";\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\n  svg {\n    font-size: 16px;\n  }\n"])),(function(n){return"received"===n.$direction?"light"===n.theme?"#DBEAFE":"#1E3A8A":"light"===n.theme?"#D1FAE5":"#065F46"}),(function(n){return"received"===n.$direction?"light"===n.theme?"#1D4ED8":"#93C5FD":"light"===n.theme?"#059669":"#6EE7B7"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),Ku=c.Ay.div(Qa||(Qa=pl(["\n  flex: 1;\n  background: ",";\n  border-radius: 12px;\n  padding: 16px;\n  border: 1px solid ",";\n  margin-top: 4px;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),Hu=c.Ay.div(Xa||(Xa=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 8px;\n"]))),Zu=c.Ay.div(nc||(nc=pl(["\n  font-weight: 600;\n  color: ",";\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Ju=c.Ay.span(tc||(tc=pl(["\n  font-size: 16px;\n  color: ",";\n"])),(function(n){return"received"===n.$direction?"light"===n.theme?"#3B82F6":"#60A5FA":"light"===n.theme?"#10B981":"#34D399"})),Vu=c.Ay.div(ec||(ec=pl(["\n  font-size: 12px;\n  color: ",";\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Qu=c.Ay.div(rc||(rc=pl(["\n  color: ",";\n  font-size: 14px;\n  line-height: 1.5;\n\n  a {\n    color: ",";\n    text-decoration: none;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"])),(function(n){return"light"===n.theme?"#374151":"#D1D5DB"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"})),Xu=c.Ay.div(ic||(ic=pl(["\n  margin-top: 8px;\n  padding: 4px 8px;\n  background: ",";\n  color: ",";\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 500;\n  display: inline-block;\n"])),(function(n){return"light"===n.theme?"#FEF3C7":"#92400E"}),(function(n){return"light"===n.theme?"#92400E":"#FEF3C7"})),nd=c.Ay.div(oc||(oc=pl(["\n  margin-bottom: 24px;\n  border: 1px solid ",";\n  border-radius: 12px;\n  background: ",";\n  overflow: hidden;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#FEFEFE":"#2D3748"})),td=c.Ay.div(ac||(ac=pl(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  background: ",";\n  border-bottom: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#F8FAFC":"#1A202C"}),(function(n){return"light"===n.theme?"#E2E8F0":"#4A5568"})),ed=c.Ay.div(cc||(cc=pl(["\n  font-size: 20px;\n  flex-shrink: 0;\n"]))),rd=c.Ay.div(sc||(sc=pl(["\n  flex: 1;\n  font-weight: 600;\n  color: ",";\n  font-size: 14px;\n"])),(function(n){return"light"===n.theme?"#2D3748":"#E2E8F0"})),id=c.Ay.div(lc||(lc=pl(["\n  font-size: 12px;\n  font-weight: 400;\n  color: ",";\n  margin-top: 2px;\n"])),(function(n){return"light"===n.theme?"#718096":"#A0AEC0"})),od=c.Ay.div(uc||(uc=pl(["\n  padding: 8px;\n"]))),ad=c.Ay.div(dc||(dc=pl(["\n  margin-bottom: 8px;\n  padding: 8px 12px;\n  border-radius: 8px;\n  position: relative;\n  cursor: ",";\n  transition: all 0.2s ease;\n\n  background: ",";\n\n  border-left: 3px solid ",";\n\n  ","\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"])),(function(n){return n.$clickable?"pointer":"default"}),(function(n){return"sent"===n.$direction?"light"===n.theme?"#E6FFFA":"#065F46":"light"===n.theme?"#EBF8FF":"#1E3A8A"}),(function(n){return"sent"===n.$direction?"light"===n.theme?"#38B2AC":"#81E6D9":"light"===n.theme?"#4299E1":"#90CDF4"}),(function(n){return n.$clickable&&"\n    &:hover {\n      transform: translateY(-1px);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    }\n  "})),cd=c.Ay.div(hc||(hc=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 4px;\n"]))),sd=c.Ay.div(pc||(pc=pl(["\n  font-size: 14px;\n  font-weight: 600;\n  color: ",";\n"])),(function(n){return"received"===n.$direction?"light"===n.theme?"#3182CE":"#90CDF4":"light"===n.theme?"#319795":"#81E6D9"})),ld=c.Ay.div(fc||(fc=pl(["\n  font-size: 11px;\n  color: ",";\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#718096":"#A0AEC0"})),ud=c.Ay.div(mc||(mc=pl(["\n  color: ",";\n  font-size: 13px;\n  line-height: 1.4;\n  word-break: break-word;\n\n  a {\n    color: ",";\n    text-decoration: none;\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"])),(function(n){return"light"===n.theme?"#2D3748":"#E2E8F0"}),(function(n){return"light"===n.theme?"#3182CE":"#90CDF4"})),dd=c.Ay.div(gc||(gc=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  padding: 60px 20px;\n  color: ",";\n  flex-direction: column;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),hd=c.Ay.div(xc||(xc=pl(["\n  padding: 15px 20px;\n  border-bottom: 1px solid ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),pd=c.Ay.h3(yc||(yc=pl(["\n  color: ",";\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  flex: 1;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),fd=c.Ay.button(bc||(bc=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 24px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: ",";\n    background: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"})),md=c.Ay.div(vc||(vc=pl(["\n  padding: 20px;\n  overflow-y: auto;\n  flex: 1;\n  background: ",";\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),gd=c.Ay.div(Fc||(Fc=pl(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 8px;\n  padding: 20px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  color: ",";\n  max-height: 500px;\n  overflow-y: auto;\n  font-size: 14px;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: ",";\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: ",";\n    border-radius: 4px;\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#374151":"#D1D5DB"}),(function(n){return"light"===n.theme?"#F3F4F6":"#1F2937"}),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return"light"===n.theme?"#9CA3AF":"#6B7280"})),xd=c.Ay.div(wc||(wc=pl(["\n  padding: 20px;\n  background: ",";\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),yd=c.Ay.div(jc||(jc=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  padding: 60px 20px;\n  color: ",";\n  flex-direction: column;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),bd=c.Ay.div(Ac||(Ac=pl(["\n  margin-bottom: 32px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),vd=c.Ay.h3(_c||(_c=pl(["\n  color: ",";\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Fd=c.Ay.div(kc||(kc=pl(["\n  color: ",";\n  font-style: italic;\n  text-align: center;\n  padding: 20px;\n  background: ",";\n  border-radius: 8px;\n  border: 1px dashed ",";\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"})),wd=c.Ay.div(Ec||(Ec=pl(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 16px;\n"]))),jd=c.Ay.div(Cc||(Cc=pl(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 12px;\n  padding: 16px;\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  transition: all 0.2s ease;\n  cursor: ",";\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    border-color: ",";\n\n    ","\n  }\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return n.$clickable?"pointer":"default"}),(function(n){return"light"===n.theme?"#D1D5DB":"#6B7280"}),(function(n){return n.$clickable&&"\n      background: ".concat("light"===n.theme?"#EFF6FF":"#1E3A8A",";\n      border-color: ").concat("light"===n.theme?"#3B82F6":"#60A5FA",";\n    ")})),Ad=c.Ay.div(Bc||(Bc=pl(["\n  font-size: 1.5rem;\n  flex-shrink: 0;\n"]))),_d=c.Ay.div(Sc||(Sc=pl(["\n  flex: 1;\n  min-width: 0;\n"]))),kd=c.Ay.div(Oc||(Oc=pl(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.95rem;\n  margin-bottom: 4px;\n  word-break: break-word;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Ed=c.Ay.div(Dc||(Dc=pl(["\n  color: ",";\n  font-size: 0.875rem;\n  margin-bottom: 8px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Cd=c.Ay.a(zc||(zc=pl(["\n  color: ",";\n  text-decoration: none;\n  font-size: 0.875rem;\n  display: inline-block;\n  margin-top: 4px;\n  transition: color 0.2s ease;\n\n  &:hover {\n    color: ",";\n    text-decoration: underline;\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"#1D4ED8":"#93C5FD"})),Bd=c.Ay.div(Ic||(Ic=pl(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n"]))),Sd=c.Ay.span(Tc||(Tc=pl(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  padding: 6px 12px;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    transform: translateY(-1px);\n  }\n"])),(function(n){return"light"===n.theme?"#EFF6FF":"#1E3A8A"}),(function(n){return"light"===n.theme?"#1D4ED8":"#DBEAFE"}),(function(n){return"light"===n.theme?"#DBEAFE":"#3B82F6"}),(function(n){return"light"===n.theme?"#DBEAFE":"#1E40AF"})),Od=function(n){var t=n.theme,e=n.contact,i=n.contactCities,o=n.onCityAdded,a=n.onCityRemoved,c=n.onClose,s=vl((0,r.useState)(""),2),l=s[0],u=s[1],d=vl((0,r.useState)([]),2),h=d[0],f=d[1],m=vl((0,r.useState)(!1),2),g=m[0],x=m[1],y=vl((0,r.useState)(!1),2),b=y[0],v=y[1],F=vl((0,r.useState)({type:"",text:""}),2),w=F[0],j=F[1],A=function(){var n=bl(fl().mark((function n(t){var e,r,o,a;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(t.length<2)){n.next=4;break}return f([]),n.abrupt("return");case 4:return n.next=6,vt.from("cities").select("*").ilike("name","%".concat(t,"%")).limit(10);case 6:if(e=n.sent,r=e.data,!(o=e.error)){n.next=11;break}throw o;case 11:a=r.filter((function(n){return!i.some((function(t){var e;return(null===(e=t.cities)||void 0===e?void 0:e.city_id)===n.city_id}))})),f(a),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.error("Error fetching city suggestions:",n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(t){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){l.length>=2?(A(l),x(!0)):(f([]),x(!1))}),[l,i]);var _=function(){var n=bl(fl().mark((function n(t){var r,i,a,c,s;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,v(!0),n.next=4,vt.from("contact_cities").select("contact_id, city_id").eq("contact_id",e.contact_id).eq("city_id",t.city_id);case 4:if(r=n.sent,i=r.data,!(a=r.error)){n.next=9;break}throw a;case 9:if(!(i&&i.length>0)){n.next=12;break}return j({type:"info",text:"This city is already linked to the contact"}),n.abrupt("return");case 12:return n.next=14,vt.from("contact_cities").insert({contact_id:e.contact_id,city_id:t.city_id,created_at:(new Date).toISOString()}).select();case 14:if((c=n.sent).data,!(s=c.error)){n.next=19;break}throw s;case 19:o(t),u(""),x(!1),j({type:"success",text:"City linked successfully"}),n.next=29;break;case 25:n.prev=25,n.t0=n.catch(0),console.error("Error linking city:",n.t0),j({type:"error",text:"Failed to link city: ".concat(n.t0.message)});case 29:return n.prev=29,v(!1),n.finish(29);case 32:case"end":return n.stop()}}),n,null,[[0,25,29,32]])})));return function(t){return n.apply(this,arguments)}}(),k=function(){var n=bl(fl().mark((function n(t){var r,i;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,v(!0),n.next=4,vt.from("contact_cities").delete().eq("contact_id",e.contact_id).eq("city_id",t.cities.city_id);case 4:if(r=n.sent,!(i=r.error)){n.next=8;break}throw i;case 8:a(t),j({type:"success",text:"City unlinked successfully"}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.error("Error unlinking city:",n.t0),j({type:"error",text:"Failed to unlink city"});case 16:return n.prev=16,v(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,12,16,19]])})));return function(t){return n.apply(this,arguments)}}(),E=function(){var n=bl(fl().mark((function n(){var t,e,r;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,v(!0),n.next=4,vt.from("cities").insert({name:l.trim(),country:"Unknown",created_at:(new Date).toISOString()}).select();case 4:if(t=n.sent,e=t.data,!(r=t.error)){n.next=9;break}throw r;case 9:if(!e||!e[0]){n.next=12;break}return n.next=12,_(e[0]);case 12:n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Error creating city:",n.t0),j({type:"error",text:"Failed to create city"});case 18:return n.prev=18,v(!1),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[0,14,18,21]])})));return function(){return n.apply(this,arguments)}}();return(0,r.useEffect)((function(){if(w.text){var n=setTimeout((function(){j({type:"",text:""})}),3e3);return function(){return clearTimeout(n)}}}),[w]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(Td,{theme:t,children:[(0,p.jsx)($d,{theme:t,children:"Manage Cities"}),(0,p.jsx)(Pd,{theme:t,onClick:c,children:"×"})]}),(0,p.jsxs)(qd,{theme:t,children:[(0,p.jsxs)(Nd,{children:[(0,p.jsx)(Rd,{theme:t,children:"Related Cities"}),(0,p.jsxs)(Md,{children:[i.map((function(n,e){var r;return(0,p.jsxs)(Gd,{theme:t,children:[(0,p.jsx)("span",{children:(null===(r=n.cities)||void 0===r?void 0:r.name)||"Unknown City"}),(0,p.jsx)(Wd,{theme:t,onClick:function(){return k(n)},disabled:b,children:"×"})]},e)})),0===i.length&&(0,p.jsx)(Ud,{theme:t,children:"No cities linked"})]})]}),(0,p.jsxs)(Nd,{children:[(0,p.jsx)(Rd,{theme:t,children:"Add Cities"}),(0,p.jsx)(Ld,{children:(0,p.jsx)(Yd,{theme:t,type:"text",value:l,onChange:function(n){return u(n.target.value)},placeholder:"Search for a city (type at least 2 letters)..."})}),g&&(0,p.jsxs)(Kd,{theme:t,children:[h.map((function(n){return(0,p.jsxs)(Hd,{theme:t,onClick:function(){return _(n)},disabled:b,children:[n.name,n.country&&"Unknown"!==n.country&&(0,p.jsxs)("span",{style:{opacity:.7},children:[" • ",n.country]})]},n.city_id)})),0===h.length&&l.length>=2&&(0,p.jsx)(Zd,{theme:t,children:"No cities found"}),l.length>=2&&(0,p.jsxs)(Jd,{theme:t,onClick:E,disabled:b,children:['+ Create "',l,'" as new city']})]})]}),w.text&&(0,p.jsx)(Vd,{theme:t,type:w.type,children:w.text})]}),(0,p.jsx)(Qd,{theme:t,children:(0,p.jsx)(Xd,{theme:t,onClick:c,children:"Done"})}),b&&(0,p.jsx)(nh,{theme:t,children:(0,p.jsx)(eu,{})})]})},Dd=function(n){var t=n.theme,e=n.contact,i=n.contactTags,o=n.onTagAdded,a=n.onTagRemoved,c=n.onClose,s=vl((0,r.useState)(""),2),l=s[0],u=s[1],d=vl((0,r.useState)([]),2),h=d[0],f=d[1],m=vl((0,r.useState)(!1),2),g=m[0],x=m[1],y=vl((0,r.useState)(!1),2),b=y[0],v=y[1],F=vl((0,r.useState)({type:"",text:""}),2),w=F[0],j=F[1],A=function(){var n=bl(fl().mark((function n(t){var e,r,o,a;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(t.length<2)){n.next=4;break}return f([]),n.abrupt("return");case 4:return n.next=6,vt.from("tags").select("*").ilike("name","%".concat(t,"%")).limit(10);case 6:if(e=n.sent,r=e.data,!(o=e.error)){n.next=11;break}throw o;case 11:a=r.filter((function(n){return!i.some((function(t){var e,r;return(null===(e=t.tags)||void 0===e?void 0:e.tag_id)===n.tag_id||(null===(r=t.tags)||void 0===r?void 0:r.id)===n.id}))})),f(a),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),console.error("Error fetching tag suggestions:",n.t0),f([]);case 19:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(t){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){l.length>=2?(A(l),x(!0)):(f([]),x(!1))}),[l,i]);var _=function(){var n=bl(fl().mark((function n(t){var r,i,a,c;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,v(!0),r=t.tag_id||t.id,i=t.name||t.tag_name,r){n.next=6;break}throw new Error("Invalid tag ID");case 6:return n.next=8,vt.from("contact_tags").insert({contact_id:e.contact_id,tag_id:r});case 8:if(a=n.sent,!(c=a.error)){n.next=12;break}throw c;case 12:j({type:"success",text:'Added "'.concat(i,'" successfully')}),o&&o({tag_id:r,name:i}),u(""),x(!1),n.next=22;break;case 18:n.prev=18,n.t0=n.catch(0),console.error("Error adding tag:",n.t0),j({type:"error",text:n.t0.message||"Failed to add tag"});case 22:return n.prev=22,v(!1),n.finish(22);case 25:case"end":return n.stop()}}),n,null,[[0,18,22,25]])})));return function(t){return n.apply(this,arguments)}}(),k=function(){var n=bl(fl().mark((function n(t){var r,i,o,c,s,l,u,d;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,v(!0),s=(null===(r=t.tags)||void 0===r?void 0:r.tag_id)||(null===(i=t.tags)||void 0===i?void 0:i.id),l=(null===(o=t.tags)||void 0===o?void 0:o.name)||(null===(c=t.tags)||void 0===c?void 0:c.tag_name),s){n.next=6;break}throw new Error("Invalid tag ID");case 6:return n.next=8,vt.from("contact_tags").delete().eq("contact_id",e.contact_id).eq("tag_id",s);case 8:if(u=n.sent,!(d=u.error)){n.next=12;break}throw d;case 12:j({type:"success",text:'Removed "'.concat(l,'" successfully')}),a&&a({tag_id:s,name:l}),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),console.error("Error removing tag:",n.t0),j({type:"error",text:n.t0.message||"Failed to remove tag"});case 20:return n.prev=20,v(!1),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[0,16,20,23]])})));return function(t){return n.apply(this,arguments)}}(),E=function(){var n=bl(fl().mark((function n(){var t,e,r,i,o,a,c;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l.trim()){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,v(!0),n.next=6,vt.from("tags").select("*").ilike("name",l.trim()).limit(1);case 6:if(t=n.sent,e=t.data,!(r=t.error)){n.next=11;break}throw r;case 11:if(!(e&&e.length>0)){n.next=15;break}i=e[0],n.next=23;break;case 15:return n.next=17,vt.from("tags").insert({name:l.trim()}).select().single();case 17:if(o=n.sent,a=o.data,!(c=o.error)){n.next=22;break}throw c;case 22:i=a;case 23:return n.next=25,_(i);case 25:n.next=31;break;case 27:n.prev=27,n.t0=n.catch(2),console.error("Error creating tag:",n.t0),j({type:"error",text:n.t0.message||"Failed to create tag"});case 31:return n.prev=31,v(!1),n.finish(31);case 34:case"end":return n.stop()}}),n,null,[[2,27,31,34]])})));return function(){return n.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(th,{theme:t,children:[(0,p.jsx)(eh,{theme:t,children:"Manage Tags"}),(0,p.jsx)(rh,{theme:t,onClick:c,children:"×"})]}),(0,p.jsxs)(ih,{theme:t,children:[(0,p.jsxs)(oh,{children:[(0,p.jsx)(ah,{theme:t,children:"Current Tags"}),(0,p.jsxs)(ch,{children:[i.map((function(n,e){var r,i;return(0,p.jsxs)(Sd,{theme:t,children:[(0,p.jsx)("span",{children:(null===(r=n.tags)||void 0===r?void 0:r.name)||(null===(i=n.tags)||void 0===i?void 0:i.tag_name)||"Unknown Tag"}),(0,p.jsx)(sh,{theme:t,onClick:function(){return k(n)},disabled:b,children:"×"})]},e)})),0===i.length&&(0,p.jsx)(lh,{theme:t,children:"No tags assigned"})]})]}),(0,p.jsxs)(oh,{children:[(0,p.jsx)(ah,{theme:t,children:"Add Tags"}),(0,p.jsx)(uh,{children:(0,p.jsx)(dh,{theme:t,type:"text",value:l,onChange:function(n){return u(n.target.value)},placeholder:"Search for a tag or create new (type at least 2 letters)..."})}),g&&(0,p.jsxs)(hh,{theme:t,children:[h.map((function(n,e){return(0,p.jsx)(ph,{theme:t,onClick:function(){return _(n)},disabled:b,children:n.name||n.tag_name},e)})),l.trim()&&!h.find((function(n){var t;return(null===(t=n.name||n.tag_name)||void 0===t?void 0:t.toLowerCase())===l.toLowerCase()}))&&(0,p.jsxs)(fh,{theme:t,onClick:E,disabled:b,children:['+ Create "',l,'"']})]})]}),w.text&&(0,p.jsx)(mh,{theme:t,type:w.type,children:w.text})]}),(0,p.jsx)(gh,{theme:t,children:(0,p.jsx)(xh,{theme:t,onClick:c,children:"Done"})}),b&&(0,p.jsx)(yh,{theme:t,children:(0,p.jsx)(eu,{})})]})},zd=c.Ay.div($c||($c=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n"]))),Id=c.Ay.button(Pc||(Pc=pl(["\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 8px 16px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n\n  &:hover {\n    background: ",";\n    transform: translateY(-1px);\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"#2563EB":"#3B82F6"})),Td=c.Ay.div(qc||(qc=pl(["\n  padding: 20px;\n  border-bottom: 1px solid ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),$d=c.Ay.h3(Nc||(Nc=pl(["\n  color: ",";\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Pd=c.Ay.button(Rc||(Rc=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 24px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    color: ",";\n    background: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"})),qd=c.Ay.div(Mc||(Mc=pl(["\n  padding: 20px;\n  overflow-y: auto;\n  flex: 1;\n  background: ",";\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),Nd=c.Ay.div(Gc||(Gc=pl(["\n  margin-bottom: 24px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),Rd=c.Ay.h4(Wc||(Wc=pl(["\n  color: ",";\n  font-size: 1rem;\n  font-weight: 600;\n  margin-bottom: 12px;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Md=c.Ay.div(Uc||(Uc=pl(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 16px;\n  min-height: 32px;\n"]))),Gd=c.Ay.div(Lc||(Lc=pl(["\n  display: inline-flex;\n  align-items: center;\n  padding: 6px 12px;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  border-radius: 20px;\n  font-size: 0.875rem;\n  gap: 8px;\n  max-width: 200px;\n\n  span {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 140px;\n  }\n"])),(function(n){return"light"===n.theme?"#EFF6FF":"#1E3A8A"}),(function(n){return"light"===n.theme?"#1D4ED8":"#DBEAFE"}),(function(n){return"light"===n.theme?"#DBEAFE":"#3B82F6"})),Wd=c.Ay.button(Yc||(Yc=pl(["\n  background: none;\n  border: none;\n  padding: 2px;\n  cursor: pointer;\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  font-size: 14px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n    transform: scale(1.1);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#EF4444":"#F87171"}),(function(n){return"light"===n.theme?"#FEE2E2":"#7F1D1D"})),Ud=c.Ay.div(Kc||(Kc=pl(["\n  color: ",";\n  font-style: italic;\n  padding: 8px;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Ld=c.Ay.div(Hc||(Hc=pl(["\n  margin-bottom: 12px;\n"]))),Yd=c.Ay.input(Zc||(Zc=pl(["\n  width: 100%;\n  padding: 12px;\n  border: 1px solid ",";\n  background: ",";\n  color: ",";\n  border-radius: 8px;\n  font-size: 0.875rem;\n  outline: none;\n  transition: border-color 0.2s;\n\n  &:focus {\n    border-color: ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return"light"===n.theme?"#FFFFFF":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"#9CA3AF":"#6B7280"})),Kd=c.Ay.div(Jc||(Jc=pl(["\n  border: 1px solid ",";\n  border-radius: 8px;\n  max-height: 200px;\n  overflow-y: auto;\n  background: ",";\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#FFFFFF":"#374151"})),Hd=c.Ay.button(Vc||(Vc=pl(["\n  width: 100%;\n  text-align: left;\n  padding: 12px;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: ",";\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: ",";\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#F3F4F6":"#4B5563"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),Zd=c.Ay.div(Qc||(Qc=pl(["\n  padding: 12px;\n  color: ",";\n  font-size: 0.875rem;\n  text-align: center;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Jd=c.Ay.button(Xc||(Xc=pl(["\n  width: 100%;\n  text-align: left;\n  padding: 12px;\n  border: none;\n  background: ",";\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: ",";\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  transition: background-color 0.2s;\n  border-top: 1px solid ",";\n\n  &:hover {\n    background: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#4B5563"}),(function(n){return"light"===n.theme?"#059669":"#10B981"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#F3F4F6":"#6B7280"})),Vd=c.Ay.div(ns||(ns=pl(["\n  padding: 12px;\n  border-radius: 8px;\n  margin-top: 16px;\n  font-size: 0.875rem;\n\n  ","\n"])),(function(n){return"success"===n.type?"\n        background: ".concat("light"===n.theme?"#D1FAE5":"#064E3B",";\n        color: ").concat("light"===n.theme?"#065F46":"#6EE7B7",";\n      "):"error"===n.type?"\n        background: ".concat("light"===n.theme?"#FEE2E2":"#7F1D1D",";\n        color: ").concat("light"===n.theme?"#B91C1C":"#FCA5A5",";\n      "):"info"===n.type?"\n        background: ".concat("light"===n.theme?"#EFF6FF":"#1E3A8A",";\n        color: ").concat("light"===n.theme?"#1D4ED8":"#DBEAFE",";\n      "):void 0})),Qd=c.Ay.div(ts||(ts=pl(["\n  padding: 20px;\n  border-top: 1px solid ",";\n  display: flex;\n  justify-content: flex-end;\n  background: ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),Xd=c.Ay.button(es||(es=pl(["\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 10px 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"#2563EB":"#3B82F6"})),nh=c.Ay.div(rs||(rs=pl(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n"])),(function(n){return"light"===n.theme?"rgba(255, 255, 255, 0.8)":"rgba(31, 41, 55, 0.8)"})),th=c.Ay.div(is||(is=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 16px;\n  border-bottom: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),eh=c.Ay.h2(os||(os=pl(["\n  color: ",";\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin: 0;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),rh=c.Ay.button(as||(as=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  padding: 4px;\n\n  &:hover {\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#374151":"#F3F4F6"})),ih=c.Ay.div(cs||(cs=pl(["\n  padding: 20px 0;\n"]))),oh=c.Ay.div(ss||(ss=pl(["\n  margin-bottom: 24px;\n"]))),ah=c.Ay.h3(ls||(ls=pl(["\n  color: ",";\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-bottom: 12px;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),ch=c.Ay.div(us||(us=pl(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 16px;\n  padding: 8px 0;\n  min-height: 40px;\n"]))),sh=c.Ay.button(ds||(ds=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 1.2rem;\n\n  &:hover {\n    color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#DC2626":"#F87171"})),lh=c.Ay.div(hs||(hs=pl(["\n  color: ",";\n  font-style: italic;\n  padding: 8px 0;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),uh=c.Ay.div(ps||(ps=pl(["\n  margin-bottom: 16px;\n"]))),dh=c.Ay.input(fs||(fs=pl(["\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 1rem;\n  color: ",";\n  background: ",";\n  transition: all 0.2s;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"rgba(59, 130, 246, 0.1)":"rgba(96, 165, 250, 0.1)"}),(function(n){return"light"===n.theme?"#9CA3AF":"#6B7280"})),hh=c.Ay.div(ms||(ms=pl(["\n  border: 1px solid ",";\n  border-radius: 8px;\n  background: ",";\n  max-height: 200px;\n  overflow-y: auto;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),ph=c.Ay.button(gs||(gs=pl(["\n  width: 100%;\n  text-align: left;\n  padding: 12px 16px;\n  background: none;\n  border: none;\n  border-bottom: 1px solid ",";\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: ",";\n  transition: background-color 0.2s;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  &:hover {\n    background: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"})),fh=c.Ay.button(xs||(xs=pl(["\n  width: 100%;\n  text-align: left;\n  padding: 12px 16px;\n  background: ",";\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#F0FDF4":"#064E3B"}),(function(n){return"light"===n.theme?"#059669":"#34D399"}),(function(n){return"light"===n.theme?"#DCFCE7":"#065F46"})),mh=c.Ay.div(ys||(ys=pl(["\n  padding: 12px 16px;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  margin-top: 16px;\n\n  ","\n\n  ","\n"])),(function(n){return"success"===n.type&&"\n    background: ".concat("light"===n.theme?"#F0FDF4":"#064E3B",";\n    color: ").concat("light"===n.theme?"#059669":"#34D399",";\n    border: 1px solid ").concat("light"===n.theme?"#BBF7D0":"#065F46",";\n  ")}),(function(n){return"error"===n.type&&"\n    background: ".concat("light"===n.theme?"#FEF2F2":"#7F1D1D",";\n    color: ").concat("light"===n.theme?"#DC2626":"#F87171",";\n    border: 1px solid ").concat("light"===n.theme?"#FECACA":"#991B1B",";\n  ")})),gh=c.Ay.div(bs||(bs=pl(["\n  padding-top: 16px;\n  border-top: 1px solid ",";\n  display: flex;\n  justify-content: flex-end;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),xh=c.Ay.button(vs||(vs=pl(["\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 10px 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover {\n    background: ",";\n    transform: translateY(-1px);\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n"])),(function(n){return"light"===n.theme?"#3B82F6":"#60A5FA"}),(function(n){return"light"===n.theme?"#2563EB":"#3B82F6"})),yh=c.Ay.div(Fs||(Fs=pl(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n"])),(function(n){return"light"===n.theme?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.8)"})),bh=function(n){var t=n.theme,e=n.contact,i=n.contactCompanies,o=n.onCompanyAdded,a=n.onCompanyRemoved,c=n.onClose,l=n.onCreateNewCompany,u=vl((0,r.useState)(""),2),d=u[0],h=u[1],f=vl((0,r.useState)([]),2),m=f[0],g=f[1],x=vl((0,r.useState)(!1),2),y=x[0],b=x[1],v=vl((0,r.useState)(!1),2),F=v[0],w=v[1],j=vl((0,r.useState)(null),2),A=j[0],_=j[1],k=function(){var n=bl(fl().mark((function n(t){var e,r,o,a;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(t.length<3)){n.next=4;break}return g([]),n.abrupt("return");case 4:return n.next=6,vt.from("companies").select("*").ilike("name","%".concat(t,"%")).limit(10);case 6:if(e=n.sent,r=e.data,!(o=e.error)){n.next=11;break}throw o;case 11:a=r.filter((function(n){var t=n.company_id||n.id;return!i.some((function(n){var e,r;return((null===(e=n.companies)||void 0===e?void 0:e.company_id)||(null===(r=n.companies)||void 0===r?void 0:r.id))===t}))})),g(a),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.error("Error fetching company suggestions:",n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(t){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){d.length>=3?(k(d),w(!0)):(g([]),w(!1))}),[d,i]);var E=function(){var n=bl(fl().mark((function n(t){var r,i;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,b(!0),n.next=4,vt.from("contact_companies").insert({contact_id:e.contact_id,company_id:t.company_id||t.id});case 4:if(r=n.sent,!(i=r.error)){n.next=8;break}throw i;case 8:o(t),h(""),w(!1),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.error("Error adding company:",n.t0);case 16:return n.prev=16,b(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])})));return function(t){return n.apply(this,arguments)}}(),C=function(){var n=bl(fl().mark((function n(t){var e,r;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,_(t.contact_companies_id),n.next=4,vt.from("contact_companies").delete().eq("contact_companies_id",t.contact_companies_id);case 4:if(e=n.sent,!(r=e.error)){n.next=8;break}throw r;case 8:a(t),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("Error removing company:",n.t0),s.oR.error("Failed to remove company association");case 15:return n.prev=15,_(null),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,11,15,18]])})));return function(t){return n.apply(this,arguments)}}();return(0,p.jsxs)(Fh,{theme:t,children:[(0,p.jsxs)(wh,{theme:t,children:[(0,p.jsx)(jh,{theme:t,children:"Manage Companies"}),(0,p.jsx)(Ah,{theme:t,onClick:c,children:"×"})]}),(0,p.jsxs)(_h,{theme:t,children:[(0,p.jsxs)(Th,{children:[(0,p.jsx)($h,{theme:t,children:"Associated Companies"}),0===i.length?(0,p.jsx)(Ph,{theme:t,children:"No companies associated with this contact"}):(0,p.jsx)(qh,{children:i.map((function(n){var e,r,i,o,a,c,s;return(0,p.jsxs)(Nh,{theme:t,children:[(0,p.jsxs)(Rh,{children:[(0,p.jsxs)(Mh,{children:[(null===(e=n.companies)||void 0===e?void 0:e.name)||"Unknown Company",n.is_primary&&(0,p.jsx)(Pu,{theme:t,children:"Primary"})]}),((null===(r=n.companies)||void 0===r?void 0:r.category)||(null===(i=n.companies)||void 0===i?void 0:i.website))&&(0,p.jsxs)(Gh,{theme:t,children:[(null===(o=n.companies)||void 0===o?void 0:o.category)&&n.companies.category,(null===(a=n.companies)||void 0===a?void 0:a.category)&&(null===(c=n.companies)||void 0===c?void 0:c.website)&&" • ",(null===(s=n.companies)||void 0===s?void 0:s.website)&&(0,p.jsx)("a",{href:n.companies.website,target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"},children:"Website"})]})]}),(0,p.jsx)(Wh,{theme:t,onClick:function(){return C(n)},disabled:A===n.contact_companies_id,children:A===n.contact_companies_id?"...":"×"})]},n.contact_companies_id)}))})]}),(0,p.jsxs)(Th,{children:[(0,p.jsx)($h,{theme:t,children:"Add Companies"}),(0,p.jsxs)(kh,{children:[(0,p.jsx)(Eh,{theme:t,type:"text",value:d,onChange:function(n){return h(n.target.value)},placeholder:"Search for a company by name..."}),(0,p.jsx)(Ch,{theme:t,children:"🔍"})]})]}),F&&(0,p.jsx)(Bh,{theme:t,children:m.length>0?m.map((function(n,e){return(0,p.jsx)(Sh,{theme:t,onClick:function(){return E(n)},disabled:y,children:(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{style:{fontWeight:"500"},children:n.name}),n.website&&(0,p.jsx)("div",{style:{fontSize:"0.875rem",opacity:.7},children:n.website})]})},n.id||n.company_id||"suggestion-".concat(e))})):d.length>=3?[(0,p.jsxs)(Oh,{theme:t,children:["No companies found with that name.",(0,p.jsxs)(Dh,{theme:t,onClick:function(){return l(d)},children:['+ Create "',d,'"']})]},"no-results-".concat(d))]:[]})]}),(0,p.jsxs)(zh,{theme:t,children:[(0,p.jsx)(Ih,{theme:t,variant:"secondary",onClick:c,children:"Cancel"}),(0,p.jsx)(Ih,{theme:t,variant:"primary",disabled:!0,children:"Select a Company"})]})]})},vh=function(n){var t=n.theme,e=n.contact,i=n.onCompanyCreated,o=n.onClose,a=n.prefilledName,c=void 0===a?"":a,s=vl((0,r.useState)(c),2),l=s[0],u=s[1],d=vl((0,r.useState)(""),2),h=d[0],f=d[1],m=vl((0,r.useState)(""),2),g=m[0],x=m[1],y=vl((0,r.useState)(""),2),b=y[0],v=y[1],F=vl((0,r.useState)(!1),2),w=F[0],j=F[1],A=vl((0,r.useState)(""),2),_=A[0],k=A[1],E=vl((0,r.useState)([]),2),C=E[0],B=E[1],S=vl((0,r.useState)(""),2),O=S[0],D=S[1],z=vl((0,r.useState)([]),2),I=z[0],T=z[1],$=vl((0,r.useState)(!1),2),P=$[0],q=$[1];(0,r.useEffect)((function(){c&&c!==l&&u(c)}),[c]);var N=function(){var n=bl(fl().mark((function n(t){var e,r,i,o;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t&&!(t.length<3)){n.next=4;break}return T([]),n.abrupt("return");case 4:return n.next=6,vt.from("tags").select("*").ilike("name","%".concat(t,"%")).limit(10);case 6:if(e=n.sent,r=e.data,!(i=e.error)){n.next=11;break}throw i;case 11:o=r.filter((function(n){var t=n.id||n.tag_id;return!C.some((function(e){return(e.id||e.tag_id)===t||e.name===n.name}))})),T(o),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.error("Error fetching tag suggestions:",n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(t){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){N(O)}),[O]);var R=function(){var n=bl(fl().mark((function n(t){return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:B([].concat(function(n){if(Array.isArray(n))return wl(n)}(e=C)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(e)||Fl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t])),D(""),q(!1);case 3:case"end":return n.stop()}var e}),n)})));return function(t){return n.apply(this,arguments)}}(),M=function(){var n=bl(fl().mark((function n(){var t,e,r;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,vt.from("tags").insert({name:O.trim()}).select().single();case 3:if(t=n.sent,e=t.data,!(r=t.error)){n.next=8;break}throw r;case 8:R(e),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("Error creating new tag:",n.t0),k("Failed to create new tag");case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}(),G=function(){var n=bl(fl().mark((function n(t){var r,a,c,s,u,d,p;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),k(""),l.trim()){n.next=5;break}return k("Company name is required"),n.abrupt("return");case 5:if(g){n.next=8;break}return k("Company category is required"),n.abrupt("return");case 8:if(b.trim()){n.next=11;break}return k("Company description is required"),n.abrupt("return");case 11:return n.prev=11,j(!0),(r=h.trim())&&!r.match(/^https?:\/\//)&&(r="https://"+r),n.next=17,vt.from("companies").insert({name:l.trim(),website:r,category:g,description:b.trim()}).select().single();case 17:if(a=n.sent,c=a.data,!(s=a.error)){n.next=22;break}throw s;case 22:if(!(C.length>0)){n.next=30;break}return u=C.map((function(n){return{company_id:c.company_id||c.id,tag_id:n.id||n.tag_id}})),n.next=26,vt.from("company_tags").insert(u);case 26:if(d=n.sent,!(p=d.error)){n.next=30;break}throw p;case 30:if(!e){n.next=33;break}return n.next=33,vt.from("contact_companies").insert({contact_id:e.contact_id,company_id:c.company_id||c.id});case 33:i(c),o(),n.next=41;break;case 37:n.prev=37,n.t0=n.catch(11),console.error("Error creating company:",n.t0),k("Failed to create company. Please try again.");case 41:return n.prev=41,j(!1),n.finish(41);case 44:case"end":return n.stop()}}),n,null,[[11,37,41,44]])})));return function(t){return n.apply(this,arguments)}}();return(0,p.jsx)(jt(),{isOpen:!0,onRequestClose:o,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"20px",border:"none",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflow:"auto",backgroundColor:"light"===t?"white":"#1F2937"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1100}},children:(0,p.jsxs)("div",{style:{padding:"1rem"},children:[(0,p.jsxs)(Uh,{theme:t,children:[(0,p.jsx)(Lh,{theme:t,children:"Create New Company"}),(0,p.jsx)(Yh,{theme:t,onClick:o,children:"×"})]}),(0,p.jsxs)("form",{onSubmit:G,children:[(0,p.jsxs)(Kh,{children:[(0,p.jsx)(Hh,{theme:t,children:"Company Name *"}),(0,p.jsx)(Zh,{theme:t,type:"text",value:l,onChange:function(n){return u(n.target.value)},required:!0})]}),(0,p.jsxs)(Kh,{children:[(0,p.jsx)(Hh,{theme:t,children:"Website"}),(0,p.jsx)(Zh,{theme:t,type:"text",value:h,onChange:function(n){return f(n.target.value)},placeholder:"www.example.com"})]}),(0,p.jsxs)(Kh,{children:[(0,p.jsx)(Hh,{theme:t,children:"Category *"}),(0,p.jsxs)(Jh,{theme:t,value:g,onChange:function(n){return x(n.target.value)},required:!0,children:[(0,p.jsx)("option",{value:"",children:"Select a category..."}),["Advisory","Corporation","Institution","Professional Investor","SME","Startup","Supplier","Media","Team"].map((function(n){return(0,p.jsx)("option",{value:n,children:n},n)}))]})]}),(0,p.jsxs)(Kh,{children:[(0,p.jsx)(Hh,{theme:t,children:"Description *"}),(0,p.jsx)(Vh,{theme:t,value:b,onChange:function(n){return v(n.target.value)},placeholder:"Enter company description...",required:!0})]}),(0,p.jsxs)(Qh,{children:[(0,p.jsx)(Xh,{theme:t,children:"Tags"}),(0,p.jsx)(np,{children:C.map((function(n,t){var e,r=(e=[{bg:"#fee2e2",text:"#b91c1c"},{bg:"#fef3c7",text:"#92400e"},{bg:"#ecfccb",text:"#3f6212"},{bg:"#d1fae5",text:"#065f46"},{bg:"#e0f2fe",text:"#0369a1"},{bg:"#ede9fe",text:"#5b21b6"},{bg:"#fae8ff",text:"#86198f"},{bg:"#fce7f3",text:"#9d174d"}])[n.name.split("").reduce((function(n,t){return n+t.charCodeAt(0)}),0)%e.length];return(0,p.jsxs)(tp,{color:r.bg,textColor:r.text,children:[(0,p.jsx)("span",{children:n.name}),(0,p.jsx)("button",{type:"button",onClick:function(){return t=n.id,void B(C.filter((function(n){return n.id!==t})));var t},children:"×"})]},n.id||n.tag_id||"selected-tag-".concat(t))}))}),(0,p.jsx)(Kh,{style:{width:"87%"},children:(0,p.jsxs)(ep,{style:{width:"100%"},children:[(0,p.jsx)(rp,{children:"🔍"}),(0,p.jsx)(ip,{theme:t,type:"text",value:O,onChange:function(n){return D(n.target.value)},placeholder:"Search or create new tag...",onFocus:function(){return q(!0)}})]})}),P&&O.length>=3&&(0,p.jsxs)(op,{children:[I.map((function(n,e){return(0,p.jsx)(ap,{theme:t,onClick:function(){return R(n)},children:n.name},n.id||n.tag_id||"tag-".concat(e))})),O.trim()&&!I.find((function(n){return n.name.toLowerCase()===O.toLowerCase()}))&&(0,p.jsxs)(cp,{theme:t,onClick:M,disabled:w,children:['+ Create "',O,'"']},"create-tag-".concat(O))]})]}),_&&(0,p.jsx)(sp,{className:"error",theme:t,children:_}),(0,p.jsxs)(lp,{children:[(0,p.jsx)(up,{type:"button",className:"secondary",theme:t,onClick:o,disabled:w,children:"Cancel"}),(0,p.jsx)(up,{type:"submit",className:"primary",theme:t,disabled:w,children:w?"Creating...":"Create Company"})]})]})]})})},Fh=c.Ay.div(ws||(ws=pl(["\n  background: ",";\n  border-radius: 12px;\n  width: 100%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"})),wh=c.Ay.div(js||(js=pl(["\n  padding: 24px 24px 0 24px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid ",";\n  padding-bottom: 16px;\n  margin-bottom: 0;\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),jh=c.Ay.h2(As||(As=pl(["\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: ",";\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Ah=c.Ay.button(_s||(_s=pl(["\n  background: none;\n  border: none;\n  font-size: 2rem;\n  color: ",";\n  cursor: pointer;\n  padding: 4px;\n  line-height: 1;\n\n  &:hover {\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),_h=c.Ay.div(ks||(ks=pl(["\n  padding: 24px;\n  overflow-y: auto;\n  flex: 1;\n"]))),kh=c.Ay.div(Es||(Es=pl(["\n  position: relative;\n  margin-bottom: 16px;\n"]))),Eh=c.Ay.input(Cs||(Cs=pl(["\n  width: 100%;\n  padding: 12px 48px 12px 16px;\n  border: 2px solid ",";\n  border-radius: 8px;\n  font-size: 1rem;\n  background: ",";\n  color: ",";\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 0 3px ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#10B981":"#065F46"}),(function(n){return"light"===n.theme?"#FFFFFF":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#059669":"#10B981"}),(function(n){return"light"===n.theme?"rgba(16, 185, 129, 0.1)":"rgba(16, 185, 129, 0.2)"}),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Ch=c.Ay.div(Bs||(Bs=pl(["\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 1.2rem;\n"]))),Bh=c.Ay.div(Ss||(Ss=pl(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 8px;\n  max-height: 300px;\n  overflow-y: auto;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),Sh=c.Ay.button(Os||(Os=pl(["\n  width: 100%;\n  padding: 12px 16px;\n  text-align: left;\n  border: none;\n  background: none;\n  cursor: pointer;\n  color: ",";\n  border-bottom: 1px solid ",";\n\n  &:hover {\n    background: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#F3F4F6":"#4B5563"})),Oh=c.Ay.div(Ds||(Ds=pl(["\n  padding: 16px;\n  text-align: center;\n  color: ",";\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Dh=c.Ay.button(zs||(zs=pl(["\n  margin-top: 12px;\n  padding: 8px 16px;\n  background: ",";\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n\n  &:hover {\n    background: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#10B981":"#065F46"}),(function(n){return"light"===n.theme?"#059669":"#10B981"})),zh=c.Ay.div(Is||(Is=pl(["\n  padding: 16px 24px 24px 24px;\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  border-top: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Ih=c.Ay.button(Ts||(Ts=pl(["\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  ","\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"primary"===n.variant?"\n    background: ".concat("light"===n.theme?"#10B981":"#065F46",";\n    color: white;\n    border: none;\n\n    &:hover:not(:disabled) {\n      background: ").concat("light"===n.theme?"#059669":"#10B981",";\n    }\n  "):"\n    background: ".concat("light"===n.theme?"#FFFFFF":"#374151",";\n    color: ").concat("light"===n.theme?"#374151":"#D1D5DB",";\n    border: 1px solid ").concat("light"===n.theme?"#D1D5DB":"#4B5563",";\n\n    &:hover {\n      background: ").concat("light"===n.theme?"#F9FAFB":"#4B5563",";\n    }\n  ")})),Th=c.Ay.div($s||($s=pl(["\n  margin-bottom: 24px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),$h=c.Ay.h3(Ps||(Ps=pl(["\n  color: ",";\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-bottom: 16px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Ph=c.Ay.div(qs||(qs=pl(["\n  color: ",";\n  font-style: italic;\n  text-align: center;\n  padding: 20px;\n  background: ",";\n  border-radius: 8px;\n  border: 1px dashed ",";\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"})),qh=c.Ay.div(Ns||(Ns=pl(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n"]))),Nh=c.Ay.div(Rs||(Rs=pl(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 8px;\n  padding: 12px 16px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"}),(function(n){return"light"===n.theme?"#E5E7EB":"#4B5563"})),Rh=c.Ay.div(Ms||(Ms=pl(["\n  flex: 1;\n  min-width: 0;\n"]))),Mh=c.Ay.div(Gs||(Gs=pl(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.95rem;\n  margin-bottom: 4px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  word-break: break-word;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Gh=c.Ay.div(Ws||(Ws=pl(["\n  color: ",";\n  font-size: 0.875rem;\n\n  a {\n    color: inherit;\n    text-decoration: underline;\n\n    &:hover {\n      color: ",";\n    }\n  }\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Wh=c.Ay.button(Us||(Us=pl(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 1.2rem;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n\n  &:hover:not(:disabled) {\n    background: ",";\n    color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#EF4444":"#F87171"}),(function(n){return"light"===n.theme?"#FEE2E2":"#7F1D1D"}),(function(n){return"light"===n.theme?"#DC2626":"#FCA5A5"})),Uh=c.Ay.div(Ls||(Ls=pl(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid ",";\n"])),(function(n){return"light"===n.theme?"#e5e7eb":"#374151"})),Lh=c.Ay.h2(Ys||(Ys=pl(["\n  margin: 0;\n  font-size: 1.25rem;\n  color: ",";\n  font-weight: 600;\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Yh=c.Ay.button(Ks||(Ks=pl(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: ",";\n  padding: 4px;\n  border-radius: 4px;\n  font-size: 1.5rem;\n  line-height: 1;\n\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#6b7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#1f2937":"#F9FAFB"}),(function(n){return"light"===n.theme?"#f3f4f6":"#374151"})),Kh=c.Ay.div(Hs||(Hs=pl(["\n  margin-bottom: 15px;\n"]))),Hh=c.Ay.label(Zs||(Zs=pl(["\n  display: block;\n  margin-bottom: 5px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: ",";\n"])),(function(n){return"light"===n.theme?"#374151":"#F9FAFB"})),Zh=c.Ay.input(Js||(Js=pl(["\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  font-size: 0.875rem;\n  background: ",";\n  color: ",";\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])),(function(n){return"light"===n.theme?"#d1d5db":"#4B5563"}),(function(n){return"light"===n.theme?"#FFFFFF":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Jh=c.Ay.select(Vs||(Vs=pl(["\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  font-size: 0.875rem;\n  background-color: ",";\n  color: ",";\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])),(function(n){return"light"===n.theme?"#d1d5db":"#4B5563"}),(function(n){return"light"===n.theme?"white":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Vh=c.Ay.textarea(Qs||(Qs=pl(["\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  font-size: 0.875rem;\n  min-height: 100px;\n  resize: vertical;\n  background: ",";\n  color: ",";\n\n  &:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])),(function(n){return"light"===n.theme?"#d1d5db":"#4B5563"}),(function(n){return"light"===n.theme?"#FFFFFF":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Qh=c.Ay.div(Xs||(Xs=pl(["\n  margin-top: 20px;\n  margin-bottom: 15px;\n"]))),Xh=c.Ay.h3(nl||(nl=pl(["\n  font-size: 16px;\n  font-weight: bold;\n  color: ",";\n  margin-bottom: 12px;\n"])),(function(n){return"light"===n.theme?"#374151":"#F9FAFB"})),np=c.Ay.div(tl||(tl=pl(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 16px;\n  padding: 5px 0;\n  min-height: 32px;\n"]))),tp=c.Ay.div.withConfig({shouldForwardProp:function(n){return!["color","textColor"].includes(n)}})(el||(el=pl(["\n  display: inline-flex;\n  align-items: center;\n  padding: 4px 8px;\n  background-color: ",";\n  color: ",";\n  border-radius: 16px;\n  font-size: 0.875rem;\n  gap: 6px;\n  max-width: 200px;\n\n  span {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 150px;\n  }\n\n  button {\n    background: none;\n    border: none;\n    padding: 2px;\n    cursor: pointer;\n    color: inherit;\n    opacity: 0.7;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-shrink: 0;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n"])),(function(n){return n.color||"#f3f4f6"}),(function(n){return n.textColor||"#374151"})),ep=c.Ay.div(rl||(rl=pl(["\n  position: relative;\n  margin-bottom: 16px;\n  width: 85%;\n"]))),rp=c.Ay.div(il||(il=pl(["\n  position: absolute;\n  left: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: ",";\n"])),(function(n){return"light"===n.theme?"#6b7280":"#9CA3AF"})),ip=c.Ay.input(ol||(ol=pl(["\n  width: 100%;\n  padding: 10px 10px 10px 35px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  font-size: 0.875rem;\n  outline: none;\n  transition: border-color 0.2s;\n  background: ",";\n  color: ",";\n\n  &:focus {\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n"])),(function(n){return"light"===n.theme?"#d1d5db":"#4B5563"}),(function(n){return"light"===n.theme?"#FFFFFF":"#374151"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),op=c.Ay.div(al||(al=pl(["\n  position: relative;\n  margin-top: 5px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  max-height: 200px;\n  overflow-y: auto;\n  background-color: ",";\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  z-index: 10;\n  width: 87%;\n"])),(function(n){return"light"===n.theme?"#e5e7eb":"#4B5563"}),(function(n){return"light"===n.theme?"white":"#374151"})),ap=c.Ay.button(cl||(cl=pl(["\n  width: 100%;\n  text-align: left;\n  padding: 8px 12px;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: ",";\n  transition: background-color 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n"])),(function(n){return"light"===n.theme?"#374151":"#F9FAFB"}),(function(n){return"light"===n.theme?"#f3f4f6":"#4B5563"}),(function(n){return"light"===n.theme?"#f3f4f6":"#4B5563"})),cp=c.Ay.button(sl||(sl=pl(["\n  width: 100%;\n  text-align: left;\n  padding: 8px 12px;\n  border: none;\n  background-color: ",";\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: ",";\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"#f3f4f6":"#4B5563"}),(function(n){return"light"===n.theme?"#1f2937":"#F9FAFB"}),(function(n){return"light"===n.theme?"#e5e7eb":"#6B7280"})),sp=c.Ay.div(ll||(ll=pl(["\n  padding: 10px;\n  border-radius: 4px;\n  margin-bottom: 15px;\n  font-size: 0.875rem;\n\n  &.error {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(n){return"light"===n.theme?"#fee2e2":"#7F1D1D"}),(function(n){return"light"===n.theme?"#b91c1c":"#FEE2E2"})),lp=c.Ay.div(ul||(ul=pl(["\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 20px;\n"]))),up=c.Ay.button(dl||(dl=pl(["\n  padding: 8px 16px;\n  border-radius: 4px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &.primary {\n    background-color: #000000;\n    color: white;\n    border: none;\n\n    &:hover {\n      background-color: #333333;\n    }\n  }\n\n  &.secondary {\n    background-color: ",";\n    color: ",";\n    border: 1px solid ",";\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(function(n){return"light"===n.theme?"white":"#374151"}),(function(n){return"light"===n.theme?"#4b5563":"#F9FAFB"}),(function(n){return"light"===n.theme?"#d1d5db":"#4B5563"}),(function(n){return"light"===n.theme?"#f9fafb":"#4B5563"}));const dp=function(n){var t,e,i,a,c,u,d,h,f,m,g,x,y,b,v=n.theme,F=(0,o.g)().contactId,w=(0,o.Zp)(),j=vl((0,r.useState)(null),2),A=j[0],_=j[1],k=vl((0,r.useState)(!0),2),E=k[0],C=k[1],B=vl((0,r.useState)("Info"),2),S=B[0],O=B[1],D=vl((0,r.useState)("Timeline"),2),z=D[0],I=D[1],T=vl((0,r.useState)("Contacts"),2),$=T[0],P=T[1],q=vl((0,r.useState)("Next"),2),N=q[0],R=q[1],M=vl((0,r.useState)(!1),2),G=M[0],W=M[1],U=vl((0,r.useState)(!1),2),L=U[0],Y=U[1],K=vl((0,r.useState)(!1),2),H=K[0],Z=K[1],J=vl((0,r.useState)(null),2),V=J[0],Q=J[1],X=vl((0,r.useState)(!1),2),nn=X[0],tn=X[1],en=vl((0,r.useState)([]),2),rn=en[0],on=en[1],an=vl((0,r.useState)(!1),2),cn=an[0],sn=an[1],ln=vl((0,r.useState)([]),2),un=ln[0],dn=ln[1],hn=vl((0,r.useState)(!1),2),pn=hn[0],fn=hn[1],mn=vl((0,r.useState)([]),2),gn=mn[0],xn=mn[1],yn=vl((0,r.useState)(!1),2),bn=yn[0],vn=yn[1],Fn=vl((0,r.useState)([]),2),wn=Fn[0],jn=Fn[1],An=vl((0,r.useState)([]),2),_n=An[0],kn=An[1],En=vl((0,r.useState)([]),2),Cn=En[0],Bn=En[1],Sn=vl((0,r.useState)(!1),2),On=Sn[0],Dn=Sn[1],zn=vl((0,r.useState)(!1),2),In=zn[0],Tn=zn[1],$n=vl((0,r.useState)(!1),2),Pn=$n[0],qn=$n[1],Nn=vl((0,r.useState)(!1),2),Rn=Nn[0],Mn=Nn[1],Gn=vl((0,r.useState)(!1),2),Wn=Gn[0],Un=Gn[1],Ln=vl((0,r.useState)(""),2),Yn=Ln[0],Kn=Ln[1],Hn=vl((0,r.useState)(!1),2),Zn=Hn[0],Jn=Hn[1],Vn=vl((0,r.useState)(null),2),Qn=Vn[0],Xn=Vn[1],nt=vl((0,r.useState)({}),2),tt=nt[0],et=nt[1],rt=vl((0,r.useState)({}),2),it=rt[0],ot=rt[1],at=vl((0,r.useState)(!1),2),ct=at[0],st=at[1],lt=function(){var n=bl(fl().mark((function n(){var t,e,r,i,o,a,c;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(F){n.next=2;break}return n.abrupt("return");case 2:return C(!0),n.prev=3,n.next=6,vt.from("contacts").select("\n          *,\n          contact_emails (email, type, is_primary),\n          contact_mobiles (mobile, type, is_primary),\n          contact_companies (\n            company_id,\n            relationship,\n            is_primary,\n            companies (name, website, category)\n          ),\n          contact_tags (\n            tags (name)\n          ),\n          contact_cities (\n            cities (name, country)\n          )\n        ").eq("contact_id",F).single();case 6:if(i=n.sent,o=i.data,!(a=i.error)){n.next=11;break}throw a;case 11:c=gl(gl({},o),{},{emails:o.contact_emails||[],mobiles:o.contact_mobiles||[],companies:(null===(t=o.contact_companies)||void 0===t?void 0:t.map((function(n){return n.companies})).filter(Boolean))||[],tags:(null===(e=o.contact_tags)||void 0===e?void 0:e.map((function(n){var t;return null===(t=n.tags)||void 0===t?void 0:t.name})).filter(Boolean))||[],cities:(null===(r=o.contact_cities)||void 0===r?void 0:r.map((function(n){return n.cities})).filter(Boolean))||[]}),_(c),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(3),console.error("Error fetching contact:",n.t0),console.error("Error details:",null===n.t0||void 0===n.t0?void 0:n.t0.message,null===n.t0||void 0===n.t0?void 0:n.t0.details,null===n.t0||void 0===n.t0?void 0:n.t0.code),s.oR.error("Failed to load contact details: ".concat((null===n.t0||void 0===n.t0?void 0:n.t0.message)||"Unknown error"));case 20:return n.prev=20,C(!1),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[3,15,20,23]])})));return function(){return n.apply(this,arguments)}}(),ut=function(){var n=bl(fl().mark((function n(){var t,e,r;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(F){n.next=2;break}return n.abrupt("return");case 2:return sn(!0),n.prev=3,n.next=6,vt.from("interactions").select("\n          *,\n          chats (\n            chat_name\n          ),\n          email_threads (\n            subject\n          )\n        ").eq("contact_id",F).order("interaction_date",{ascending:!1}).limit(50);case 6:if(t=n.sent,e=t.data,!(r=t.error)){n.next=11;break}throw r;case 11:on(e||[]),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(3),console.error("Error fetching interactions:",n.t0),s.oR.error("Failed to load interactions");case 18:return n.prev=18,sn(!1),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[3,14,18,21]])})));return function(){return n.apply(this,arguments)}}(),dt=function(){var n=bl(fl().mark((function n(){var t,e,r;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(F){n.next=2;break}return n.abrupt("return");case 2:return fn(!0),n.prev=3,n.next=6,vt.from("interactions").select("\n          *,\n          chats (\n            chat_name\n          )\n        ").eq("contact_id",F).eq("interaction_type","whatsapp").order("interaction_date",{ascending:!1}).limit(50);case 6:if(t=n.sent,e=t.data,!(r=t.error)){n.next=11;break}throw r;case 11:dn(e||[]),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(3),console.error("Error fetching WhatsApp interactions:",n.t0),s.oR.error("Failed to load WhatsApp interactions");case 18:return n.prev=18,fn(!1),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[3,14,18,21]])})));return function(){return n.apply(this,arguments)}}(),ht=function(){var n=bl(fl().mark((function n(){var t,e,r;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(F){n.next=2;break}return n.abrupt("return");case 2:return vn(!0),n.prev=3,n.next=6,vt.from("interactions").select("\n          *,\n          email_threads (\n            subject\n          )\n        ").eq("contact_id",F).eq("interaction_type","email").order("interaction_date",{ascending:!1}).limit(50);case 6:if(t=n.sent,e=t.data,!(r=t.error)){n.next=11;break}throw r;case 11:xn(e||[]),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(3),console.error("Error fetching email interactions:",n.t0),s.oR.error("Failed to load email interactions");case 18:return n.prev=18,vn(!1),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[3,14,18,21]])})));return function(){return n.apply(this,arguments)}}(),pt=function(){var n=bl(fl().mark((function n(){var t,e,r,i,o,a,c,l,u,d;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(F&&A){n.next=2;break}return n.abrupt("return");case 2:return Dn(!0),n.prev=3,t=A.contact_id,console.log("Fetching related data for contact UUID:",t),n.next=8,vt.from("contact_cities").select("\n          entry_id,\n          contact_id,\n          city_id,\n          cities!inner (\n            city_id,\n            name,\n            country\n          )\n        ").eq("contact_id",t);case 8:return e=n.sent,r=e.data,(i=e.error)&&console.error("Cities error:",i),n.next=14,vt.from("contact_tags").select("\n          entry_id,\n          contact_id,\n          tag_id,\n          tags!inner (\n            tag_id,\n            name\n          )\n        ").eq("contact_id",t);case 14:return o=n.sent,a=o.data,(c=o.error)&&console.error("Tags error:",c),n.next=20,vt.from("contact_companies").select("\n          contact_companies_id,\n          contact_id,\n          company_id,\n          is_primary,\n          companies!inner (\n            company_id,\n            name,\n            website,\n            category\n          )\n        ").eq("contact_id",t);case 20:l=n.sent,u=l.data,(d=l.error)&&console.error("Companies error:",d),jn(r||[]),kn(a||[]),Bn(u||[]),console.log("Related data loaded:",{cities:r,tags:a,companies:u}),n.next=34;break;case 30:n.prev=30,n.t0=n.catch(3),console.error("Error fetching related data:",n.t0),s.oR.error("Failed to load related data");case 34:return n.prev=34,Dn(!1),n.finish(34);case 37:case"end":return n.stop()}}),n,null,[[3,30,34,37]])})));return function(){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){lt()}),[F]),(0,r.useEffect)((function(){A&&("Chats"===S?"Timeline"===z?ut():"WhatsApp"===z?dt():"Email"===z&&ht():"Related"===S&&"Contacts"===$&&pt())}),[A,S,z,$]);var ft=function(){var n=bl(fl().mark((function n(t){var e,r,i;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("email"===t.interaction_type&&t.email_thread_id){n.next=2;break}return n.abrupt("return");case 2:return tn(!0),Z(!0),n.prev=4,n.next=7,vt.from("emails").select("\n          *,\n          email_participants (\n            participant_type,\n            contacts (\n              contact_id,\n              first_name,\n              last_name,\n              contact_emails (email, is_primary)\n            )\n          )\n        ").eq("email_thread_id",t.email_thread_id).order("message_timestamp",{ascending:!1}).limit(1).single();case 7:if(e=n.sent,r=e.data,!(i=e.error)){n.next=12;break}throw i;case 12:Q(r),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(4),console.error("Error fetching email details:",n.t0),s.oR.error("Failed to load email details"),Z(!1);case 20:return n.prev=20,tn(!1),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[4,15,20,23]])})));return function(t){return n.apply(this,arguments)}}(),mt=function(n){switch(n){case"email":return(0,p.jsx)(Ft.maD,{});case"whatsapp":default:return(0,p.jsx)(Ft.uN,{});case"meeting":return(0,p.jsx)(Ft.DDN,{});case"phone_call":case"call":case"sms":return(0,p.jsx)(Ft.Cab,{});case"slack":return(0,p.jsx)(Ft.iWS,{});case"note":return(0,p.jsx)(Ft.jie,{})}},gt=function(n){switch(n){case"email":return"Email";case"whatsapp":return"WhatsApp";case"meeting":return"Meeting";case"phone_call":case"call":return"Phone Call";case"slack":return"Slack";case"sms":return"SMS";case"note":return"Note";default:return"Other"}},xt=function(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},yt=function(n){var t={};return n.forEach((function(n){var e=new Date(n.interaction_date).toDateString();t[e]||(t[e]=[]),t[e].push(n)})),t},bt=function(n,t,e){return t?(0,p.jsxs)(Nu,{theme:v,children:[(0,p.jsx)(eu,{}),(0,p.jsx)("span",{children:"Loading interactions..."})]}):0===n.length?(0,p.jsx)(Ru,{theme:v,children:e}):(0,p.jsx)(Mu,{children:Object.entries(yt(n)).map((function(n){var t,e,r,i,o,a=vl(n,2),c=a[0],s=a[1],l=function(n){var t={},e=[];return n.forEach((function(n){var r=n.chat_id||n.email_thread_id;if(r){if(!t[r]){var i,o,a=n.chat_id?(null===(i=n.chats)||void 0===i?void 0:i.chat_name)||"WhatsApp Chat":(null===(o=n.email_threads)||void 0===o?void 0:o.subject)||"Email Thread";t[r]={id:r,type:n.chat_id?"chat":"email",name:a,interactions:[]}}t[r].interactions.push(n)}else e.push(n)})),Object.values(t).forEach((function(n){n.interactions.sort((function(n,t){return new Date(n.interaction_date)-new Date(t.interaction_date)}))})),{conversationGroups:Object.values(t),standaloneInteractions:e}}(s),u=l.conversationGroups,d=l.standaloneInteractions;return(0,p.jsxs)(Gu,{children:[(0,p.jsx)(Wu,{theme:v,children:(t=s[0].interaction_date,e=new Date(t),r=new Date,i=Math.abs(r-e),o=Math.ceil(i/864e5),1===o?"Today":2===o?"Yesterday":o<=7?"".concat(o-1," days ago"):e.toLocaleDateString())}),(0,p.jsxs)(Uu,{children:[u.map((function(n){return(0,p.jsxs)(nd,{theme:v,children:[(0,p.jsxs)(td,{theme:v,children:[(0,p.jsx)(ed,{theme:v,$type:n.type,children:"chat"===n.type?"💬":"📧"}),(0,p.jsxs)(rd,{theme:v,children:[n.name,(0,p.jsxs)(id,{theme:v,children:[n.interactions.length," message",1!==n.interactions.length?"s":""]})]})]}),(0,p.jsx)(od,{children:n.interactions.map((function(n,t){return(0,p.jsxs)(ad,{theme:v,$direction:n.direction,$clickable:"email"===n.interaction_type,onClick:function(){return"email"===n.interaction_type?ft(n):null},children:[(0,p.jsxs)(cd,{children:[(0,p.jsx)(sd,{theme:v,$direction:n.direction,children:"received"===n.direction?"↓":"↑"}),(0,p.jsx)(ld,{theme:v,children:xt(n.interaction_date)})]}),n.summary&&(0,p.jsx)(ud,{theme:v,$direction:n.direction,children:n.summary}),n.special_case_tag&&(0,p.jsx)(Xu,{theme:v,children:n.special_case_tag})]},n.interaction_id)}))})]},n.id)})),d.map((function(n){return(0,p.jsxs)(Lu,{theme:v,$clickable:"email"===n.interaction_type,onClick:function(){return"email"===n.interaction_type?ft(n):null},children:[(0,p.jsx)(Yu,{theme:v,$type:n.interaction_type,$direction:n.direction,children:mt(n.interaction_type)}),(0,p.jsxs)(Ku,{theme:v,children:[(0,p.jsxs)(Hu,{children:[(0,p.jsxs)(Zu,{theme:v,children:[gt(n.interaction_type),(0,p.jsx)(Ju,{theme:v,$direction:n.direction,children:"received"===n.direction?"↓":"↑"})]}),(0,p.jsx)(Vu,{theme:v,children:xt(n.interaction_date)})]}),n.summary&&(0,p.jsx)(Qu,{theme:v,children:n.summary}),n.special_case_tag&&(0,p.jsx)(Xu,{theme:v,children:n.special_case_tag})]})]},n.interaction_id)}))]})]},c)}))})},wt=function(n){pt()},At=function(){var n=bl(fl().mark((function n(){var t,e,r,i,o,a,c,l,u,d,h,p,f,m,g,x,y,b,v,F,w,j,_,k;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(A){n.next=2;break}return n.abrupt("return");case 2:return Xn(A),n.prev=3,n.next=6,Promise.all([vt.from("chat").select("id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_chats").select("id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("interactions").select("interaction_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("emails").select("email_id",{count:"exact",head:!0}).eq("sender_contact_id",A.contact_id),vt.from("email_participants").select("participant_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_email_threads").select("email_thread_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_tags").select("entry_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_cities").select("entry_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_companies").select("contact_companies_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_notes").select("note_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_attachments").select("attachment_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_emails").select("contact_email_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("contact_mobiles").select("contact_mobile_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("deals").select("deal_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("meetings").select("meeting_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("investments").select("investment_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("keep_in_touch").select("kit_id",{count:"exact",head:!0}).eq("contact_id",A.contact_id),vt.from("interactions").select("type, notes, created_at").eq("contact_id",A.contact_id).order("created_at",{ascending:!1}).limit(1).maybeSingle()]);case 6:t=n.sent,e=vl(t,18),r=e[0],i=e[1],o=e[2],a=e[3],c=e[4],l=e[5],u=e[6],d=e[7],h=e[8],p=e[9],f=e[10],m=e[11],g=e[12],x=e[13],y=e[14],b=e[15],v=e[16],F=e[17],w=null,F.data&&(j=F.data,_=new Date(j.created_at).toLocaleDateString(),w={summary:"".concat(j.type," - ").concat(j.notes||"No notes"," (").concat(_,")")}),k={chatCount:r.count||0,contactChatsCount:i.count||0,interactionsCount:o.count||0,emailsCount:a.count||0,emailParticipantsCount:c.count||0,emailThreadsCount:l.count||0,tagsCount:u.count||0,citiesCount:d.count||0,companiesCount:h.count||0,notesCount:p.count||0,attachmentsCount:f.count||0,contactEmailsCount:m.count||0,contactMobilesCount:g.count||0,dealsCount:x.count||0,meetingsCount:y.count||0,investmentsCount:b.count||0,kitCount:v.count||0,lastInteraction:w},et(k),ot({deleteInteractions:k.interactionsCount>0,deleteEmails:k.emailsCount>0,deleteEmailParticipants:k.emailParticipantsCount>0,deleteEmailThreads:k.emailThreadsCount>0,deleteTags:k.tagsCount>0,deleteCities:k.citiesCount>0,deleteCompanies:k.companiesCount>0,deleteNotes:k.notesCount>0,deleteAttachments:k.attachmentsCount>0,deleteContactEmails:k.contactEmailsCount>0,deleteContactMobiles:k.contactMobilesCount>0,deleteDeals:k.dealsCount>0,deleteMeetings:k.meetingsCount>0,deleteInvestments:k.investmentsCount>0,deleteKit:k.kitCount>0,deleteChat:k.chatCount>0,deleteContactChats:k.contactChatsCount>0}),Jn(!0),n.next=38;break;case 34:n.prev=34,n.t0=n.catch(3),console.error("Error fetching associated data:",n.t0),s.oR.error("Failed to load contact details");case 38:case"end":return n.stop()}}),n,null,[[3,34]])})));return function(){return n.apply(this,arguments)}}(),_t=function(n){var t=n.target,e=t.name,r=t.checked;ot((function(n){return gl(gl({},n),{},xl({},e,r))}))},kt=function(){var n=bl(fl().mark((function n(){var t,e,r,i;return fl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Qn){n.next=2;break}return n.abrupt("return");case 2:if(st(!0),n.prev=3,t=Qn.contact_id,e=[],it.deleteInteractions&&tt.interactionsCount>0&&e.push(vt.from("interactions").delete().eq("contact_id",t)),it.deleteEmails&&tt.emailsCount>0&&e.push(vt.from("emails").delete().eq("sender_contact_id",t)),it.deleteEmailParticipants&&tt.emailParticipantsCount>0&&e.push(vt.from("email_participants").delete().eq("contact_id",t)),it.deleteEmailThreads&&tt.emailThreadsCount>0&&e.push(vt.from("contact_email_threads").delete().eq("contact_id",t)),it.deleteTags&&tt.tagsCount>0&&e.push(vt.from("contact_tags").delete().eq("contact_id",t)),it.deleteCities&&tt.citiesCount>0&&e.push(vt.from("contact_cities").delete().eq("contact_id",t)),it.deleteCompanies&&tt.companiesCount>0&&e.push(vt.from("contact_companies").delete().eq("contact_id",t)),it.deleteNotes&&tt.notesCount>0&&e.push(vt.from("contact_notes").delete().eq("contact_id",t)),it.deleteAttachments&&tt.attachmentsCount>0&&e.push(vt.from("contact_attachments").delete().eq("contact_id",t)),it.deleteContactEmails&&tt.contactEmailsCount>0&&e.push(vt.from("contact_emails").delete().eq("contact_id",t)),it.deleteContactMobiles&&tt.contactMobilesCount>0&&e.push(vt.from("contact_mobiles").delete().eq("contact_id",t)),it.deleteDeals&&tt.dealsCount>0&&e.push(vt.from("deals").delete().eq("contact_id",t)),it.deleteMeetings&&tt.meetingsCount>0&&e.push(vt.from("meetings").delete().eq("contact_id",t)),it.deleteInvestments&&tt.investmentsCount>0&&e.push(vt.from("investments").delete().eq("contact_id",t)),it.deleteKit&&tt.kitCount>0&&e.push(vt.from("keep_in_touch").delete().eq("contact_id",t)),it.deleteChat&&tt.chatCount>0&&e.push(vt.from("chat").delete().eq("contact_id",t)),it.deleteContactChats&&tt.contactChatsCount>0&&e.push(vt.from("contact_chats").delete().eq("contact_id",t)),!(e.length>0)){n.next=28;break}return n.next=26,Promise.allSettled(e);case 26:n.sent.forEach((function(n,t){"rejected"===n.status&&console.warn("Failed to delete related records:",n.reason)}));case 28:return n.next=30,vt.from("contacts").delete().eq("contact_id",t);case 30:if(r=n.sent,!(i=r.error)){n.next=34;break}throw i;case 34:s.oR.success("Contact and selected associated records deleted successfully"),Jn(!1),Xn(null),et({}),ot({}),w(-1),n.next=46;break;case 42:n.prev=42,n.t0=n.catch(3),console.error("Error deleting contact:",n.t0),s.oR.error("Failed to delete contact");case 46:return n.prev=46,st(!1),n.finish(46);case 49:case"end":return n.stop()}}),n,null,[[3,42,46,49]])})));return function(){return n.apply(this,arguments)}}();return E?(0,p.jsx)(jl,{theme:v,children:(0,p.jsxs)(tu,{children:[(0,p.jsx)(eu,{}),(0,p.jsx)(ru,{theme:v,children:"Loading contact..."})]})}):A?(0,p.jsxs)(jl,{theme:v,children:[(0,p.jsxs)(Al,{theme:v,children:[(0,p.jsxs)(_l,{theme:v,children:[(0,p.jsxs)(kl,{theme:v,onClick:function(){w(-1)},children:[(0,p.jsx)(Ft.QVr,{}),(0,p.jsx)("span",{children:"Back"})]}),(0,p.jsxs)(El,{children:[(0,p.jsxs)(Cl,{as:"button",onClick:function(){if(A){var n="/contacts/workflow/".concat(A.contact_id,"?step=2"),t=window.open(n,"_blank");t&&(t.focus(),setTimeout((function(){t.document&&t.document.documentElement&&t.document.documentElement.requestFullscreen?t.document.documentElement.requestFullscreen().catch((function(){t.moveTo(0,0),t.resizeTo(window.screen.availWidth,window.screen.availHeight)})):(t.moveTo(0,0),t.resizeTo(window.screen.availWidth,window.screen.availHeight))}),100))}},$edit:!0,theme:v,children:[(0,p.jsx)(Ft.uO9,{}),(0,p.jsx)("span",{children:"Edit"})]}),(0,p.jsxs)(Cl,{as:"button",onClick:At,$delete:!0,theme:v,children:[(0,p.jsx)(l.eHT,{}),(0,p.jsx)("span",{children:"Delete"})]}),(null===(t=A.emails)||void 0===t?void 0:t.length)>0&&(0,p.jsxs)(Cl,{as:"button",onClick:function(){var n;null!=A&&null!==(n=A.emails)&&void 0!==n&&n.length&&(1===A.emails.length?window.open("mailto:".concat(A.emails[0].email),"_self"):W(!0))},$primary:!0,theme:v,children:[(0,p.jsx)(Ft.maD,{}),(0,p.jsx)("span",{children:"Email"})]}),(null===(e=A.mobiles)||void 0===e?void 0:e.length)>0&&(0,p.jsxs)(Cl,{as:"button",onClick:function(){var n;if(null!=A&&null!==(n=A.mobiles)&&void 0!==n&&n.length)if(1===A.mobiles.length){var t=A.mobiles[0].mobile.replace(/\D/g,"");window.open("https://wa.me/".concat(t),"_blank")}else Y(!0)},$secondary:!0,theme:v,children:[(0,p.jsx)(Ft.Cab,{}),(0,p.jsx)("span",{children:"WhatsApp"})]})]})]}),(0,p.jsxs)(Bl,{theme:v,children:[(0,p.jsxs)(Sl,{theme:v,children:[(0,p.jsx)(Ol,{theme:v,children:A.profile_image_url?(0,p.jsx)("img",{src:A.profile_image_url,alt:"Profile"}):(0,p.jsx)(Ft.x$1,{})}),(0,p.jsxs)(Dl,{children:[(0,p.jsxs)(zl,{children:[(0,p.jsxs)(Il,{theme:v,children:[A.first_name," ",A.last_name,(null===(i=A.companies)||void 0===i?void 0:i.length)>0&&(0,p.jsx)(Tl,{theme:v,children:A.companies.map((function(n){return n.name})).join(", ")})]}),(0,p.jsx)($l,{theme:v,onClick:function(){if(A){var n="".concat(A.first_name," ").concat(A.last_name),t="obsidian://advanced-uri?vault=".concat(encodeURIComponent("Living with Intention"),"&commandid=workspace%253Anew-file&filename=").concat(encodeURIComponent(n+".md"));window.open(t,"_self"),s.oR.success("Opening note for ".concat(n),{duration:2e3,icon:"📝"})}},title:"Open Obsidian note for ".concat(A.first_name," ").concat(A.last_name),children:(0,p.jsx)(Ft.jie,{})})]}),A.job_role&&(0,p.jsx)(Pl,{theme:v,children:A.job_role}),(0,p.jsxs)(ql,{children:[A.category&&(0,p.jsx)(Nl,{theme:v,children:A.category}),A.score&&(0,p.jsx)(Rl,{theme:v,children:"⭐".repeat(A.score)})]})]})]}),(0,p.jsx)(vu,{theme:v,children:["Info","Chats","Related","Keep in touch"].map((function(n){return(0,p.jsx)(Fu,{theme:v,$active:S===n,onClick:function(){return O(n)},children:n},n)}))}),"Info"===S&&(0,p.jsxs)(Ml,{children:[((null===(a=A.emails)||void 0===a?void 0:a.length)>0||(null===(c=A.mobiles)||void 0===c?void 0:c.length)>0)&&(0,p.jsxs)(Gl,{children:[(0,p.jsx)(Wl,{theme:v,children:"Contact Information"}),(0,p.jsxs)(Ul,{children:[null===(u=A.emails)||void 0===u?void 0:u.map((function(n,t){return(0,p.jsxs)(Ll,{children:[(0,p.jsx)(Yl,{children:(0,p.jsx)(Ft.maD,{})}),(0,p.jsxs)(Kl,{children:[(0,p.jsxs)(Hl,{theme:v,children:[n.type," Email"]}),(0,p.jsxs)(Zl,{theme:v,children:[(0,p.jsx)("a",{href:"mailto:".concat(n.email),children:n.email}),n.is_primary&&(0,p.jsx)(Vl,{children:"Primary"})]})]})]},"email-".concat(t))})),null===(d=A.mobiles)||void 0===d?void 0:d.map((function(n,t){return(0,p.jsxs)(Ll,{children:[(0,p.jsx)(Yl,{children:(0,p.jsx)(Ft.Cab,{})}),(0,p.jsxs)(Kl,{children:[(0,p.jsxs)(Hl,{theme:v,children:[n.type," Phone"]}),(0,p.jsxs)(Zl,{theme:v,children:[(0,p.jsx)("a",{href:"https://wa.me/".concat(n.mobile.replace(/\D/g,"")),children:n.mobile}),n.is_primary&&(0,p.jsx)(Vl,{children:"Primary"})]})]})]},"mobile-".concat(t))}))]})]}),(null===(h=A.companies)||void 0===h?void 0:h.length)>0&&(0,p.jsxs)(Gl,{children:[(0,p.jsx)(Wl,{theme:v,children:"Company Information"}),(0,p.jsx)(Ul,{children:A.companies.map((function(n,t){return(0,p.jsxs)(Ll,{children:[(0,p.jsx)(Yl,{children:(0,p.jsx)(Ft.ymh,{})}),(0,p.jsxs)(Kl,{children:[(0,p.jsx)(Hl,{theme:v,children:"Company"}),(0,p.jsx)(Zl,{theme:v,children:n.name}),n.website&&(0,p.jsx)(Jl,{theme:v,children:(0,p.jsx)("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",children:n.website})})]})]},"company-".concat(t))}))})]}),(null===(f=A.cities)||void 0===f?void 0:f.length)>0&&(0,p.jsxs)(Gl,{children:[(0,p.jsx)(Wl,{theme:v,children:"Location"}),(0,p.jsx)(Ul,{children:A.cities.map((function(n,t){return(0,p.jsxs)(Ll,{children:[(0,p.jsx)(Yl,{children:(0,p.jsx)(Ft.vq8,{})}),(0,p.jsxs)(Kl,{children:[(0,p.jsx)(Hl,{theme:v,children:"Location"}),(0,p.jsxs)(Zl,{theme:v,children:[n.name,", ",n.country]})]})]},"city-".concat(t))}))})]}),(null===(m=A.tags)||void 0===m?void 0:m.length)>0&&(0,p.jsxs)(Gl,{children:[(0,p.jsx)(Wl,{theme:v,children:"Tags"}),(0,p.jsx)(Ql,{children:A.tags.map((function(n,t){return(0,p.jsx)(Xl,{theme:v,children:n},t)}))})]}),A.description&&(0,p.jsxs)(Gl,{children:[(0,p.jsx)(Wl,{theme:v,children:"Notes"}),(0,p.jsx)(nu,{theme:v,children:A.description})]}),A.linkedin&&(0,p.jsxs)(Gl,{children:[(0,p.jsx)(Wl,{theme:v,children:"Social Media"}),(0,p.jsx)(Ul,{children:(0,p.jsx)(Ll,{children:(0,p.jsxs)(Kl,{children:[(0,p.jsx)(Hl,{theme:v,children:"LinkedIn Profile"}),(0,p.jsx)(Zl,{theme:v,children:(0,p.jsx)("a",{href:A.linkedin,target:"_blank",rel:"noopener noreferrer",children:"View LinkedIn Profile"})})]})})})]})]}),"Chats"===S&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ju,{theme:v,children:["Timeline","WhatsApp","Email","Meetings"].map((function(n){return(0,p.jsx)(Au,{theme:v,$active:z===n,onClick:function(){return I(n)},disabled:"Meetings"===n,children:n},n)}))}),"Timeline"===z&&(0,p.jsx)(qu,{theme:v,children:bt(rn,cn,"📅 No interactions found for this contact")}),"WhatsApp"===z&&(0,p.jsx)(qu,{theme:v,children:bt(un,pn,"💬 No WhatsApp messages found for this contact")}),"Email"===z&&(0,p.jsx)(qu,{theme:v,children:bt(gn,bn,"📧 No email conversations found for this contact")}),"Meetings"===z&&(0,p.jsx)(wu,{theme:v,children:"🤝 Meetings coming soon"})]}),"Related"===S&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(_u,{theme:v,children:["Contacts","Deals","Lists"].map((function(n){return(0,p.jsx)(ku,{theme:v,$active:$===n,onClick:function(){return P(n)},children:n},n)}))}),"Contacts"===$&&(0,p.jsx)(xd,{theme:v,children:On?(0,p.jsxs)(yd,{theme:v,children:[(0,p.jsx)(eu,{}),(0,p.jsx)("span",{children:"Loading related data..."})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(bd,{theme:v,children:[(0,p.jsxs)(zd,{children:[(0,p.jsx)(vd,{theme:v,style:{borderBottom:"none",paddingBottom:"0"},children:"🌍 Cities"}),(0,p.jsx)(Id,{theme:v,onClick:function(){return Tn(!0)},children:"+ Add Cities"})]}),0===wn.length?(0,p.jsx)(Fd,{theme:v,children:"No cities associated with this contact"}):(0,p.jsx)(wd,{children:wn.map((function(n,t){var e,r,i;return(0,p.jsxs)(jd,{theme:v,$clickable:!0,onClick:function(){var t,e,r,i=null===(t=n.cities)||void 0===t?void 0:t.city_id,o=(null===(e=n.cities)||void 0===e?void 0:e.name)||(null===(r=n.cities)||void 0===r?void 0:r.city_name)||"Unknown City";i&&w("/city/".concat(i,"/contacts"),{state:{cityName:o,contactId:A.contact_id}})},children:[(0,p.jsx)(Ad,{theme:v,children:"🏙️"}),(0,p.jsxs)(_d,{children:[(0,p.jsx)(kd,{theme:v,children:(null===(e=n.cities)||void 0===e?void 0:e.name)||(null===(r=n.cities)||void 0===r?void 0:r.city_name)||"Unknown City"}),(null===(i=n.cities)||void 0===i?void 0:i.country)&&(0,p.jsx)(Ed,{theme:v,children:n.cities.country})]})]},t)}))})]}),(0,p.jsx)("div",{style:{width:"100%",height:"1px",background:"light"===v?"#E5E7EB":"#374151",margin:"24px 0"}}),(0,p.jsxs)(bd,{theme:v,children:[(0,p.jsxs)(zd,{children:[(0,p.jsx)(vd,{theme:v,style:{borderBottom:"none",paddingBottom:"0"},children:"🏷️ Tags"}),(0,p.jsx)(Id,{theme:v,onClick:function(){return qn(!0)},children:"+ Add Tags"})]}),0===_n.length?(0,p.jsx)(Fd,{theme:v,children:"No tags associated with this contact"}):(0,p.jsx)(Bd,{children:_n.map((function(n,t){var e,r;return(0,p.jsx)(Sd,{theme:v,children:(null===(e=n.tags)||void 0===e?void 0:e.name)||(null===(r=n.tags)||void 0===r?void 0:r.tag_name)||"Unknown Tag"},t)}))})]}),(0,p.jsx)("div",{style:{width:"100%",height:"1px",background:"light"===v?"#E5E7EB":"#374151",margin:"24px 0 16px 0"}}),(0,p.jsxs)(bd,{theme:v,children:[(0,p.jsxs)(zd,{children:[(0,p.jsx)(vd,{theme:v,style:{borderBottom:"none",paddingBottom:"0"},children:"🏢 Companies"}),(0,p.jsx)(Id,{theme:v,onClick:function(){return Mn(!0)},children:"+ Add Companies"})]}),0===Cn.length?(0,p.jsx)(Fd,{theme:v,children:"No companies associated with this contact"}):(0,p.jsx)(wd,{children:Cn.map((function(n,t){var e,r,i;return(0,p.jsxs)(jd,{theme:v,children:[(0,p.jsx)(Ad,{theme:v,children:"🏢"}),(0,p.jsxs)(_d,{children:[(0,p.jsx)(kd,{theme:v,children:(null===(e=n.companies)||void 0===e?void 0:e.name)||"Unknown Company"}),(null===(r=n.companies)||void 0===r?void 0:r.category)&&(0,p.jsx)(Ed,{theme:v,children:n.companies.category}),(null===(i=n.companies)||void 0===i?void 0:i.website)&&(0,p.jsx)(Cd,{href:n.companies.website,target:"_blank",rel:"noopener noreferrer",theme:v,children:"Visit Website"}),n.is_primary&&(0,p.jsx)(Pu,{theme:v,children:"Primary"})]})]},t)}))})]})]})}),"Deals"===$&&(0,p.jsx)(wu,{theme:v,children:"💼 Related deals coming soon"}),"Lists"===$&&(0,p.jsx)(wu,{theme:v,children:"📋 Related lists coming soon"})]}),"Keep in touch"===S&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Eu,{theme:v,children:["Next","Touch base","Occurrences","Lists"].map((function(n){return(0,p.jsx)(Cu,{theme:v,$active:N===n,onClick:function(){return R(n)},children:n},n)}))}),"Next"===N&&(0,p.jsx)(wu,{theme:v,children:"⏭️ Next interactions coming soon"}),"Touch base"===N&&(0,p.jsx)(wu,{theme:v,children:"🤝 Touch base reminders coming soon"}),"Occurrences"===N&&(0,p.jsx)(wu,{theme:v,children:"🔄 Occurrences coming soon"}),"Lists"===N&&(0,p.jsx)(wu,{theme:v,children:"📝 Keep in touch lists coming soon"})]})]})]}),(0,p.jsxs)(jt(),{isOpen:Zn,onRequestClose:function(){return Jn(!1)},shouldCloseOnOverlayClick:!1,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"25px",maxWidth:"600px",width:"90%",backgroundColor:"light"===v?"#FFFFFF":"#1F2937",border:"1px solid ".concat("light"===v?"#E5E7EB":"#374151"),borderRadius:"12px",color:"light"===v?"#111827":"#F9FAFB",zIndex:1001},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:1e3}},children:[(0,p.jsxs)(au,{theme:v,children:[(0,p.jsx)("h2",{children:"Delete Contact and Associated Data"}),(0,p.jsx)(cu,{theme:v,onClick:function(){return Jn(!1)},disabled:ct,children:(0,p.jsx)(l.eHT,{})})]}),Qn&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(su,{theme:v,children:(0,p.jsx)(lu,{children:(0,p.jsxs)(du,{theme:v,children:[Qn.first_name," ",Qn.last_name,null!==(g=Qn.emails)&&void 0!==g&&null!==(g=g[0])&&void 0!==g&&g.email?" (".concat(Qn.emails[0].email,")"):null!==(x=Qn.mobiles)&&void 0!==x&&null!==(x=x[0])&&void 0!==x&&x.mobile?" (".concat(Qn.mobiles[0].mobile,")"):""]})})}),(0,p.jsxs)(lu,{style:{marginTop:"15px",marginBottom:"15px"},children:[(0,p.jsx)(uu,{theme:v,children:"Last Interaction:"}),(0,p.jsx)(du,{theme:v,children:tt.lastInteraction?tt.lastInteraction.summary:"None"})]}),(0,p.jsx)(hu,{theme:v,children:"Select which items to delete:"}),(0,p.jsx)(pu,{theme:v,children:(0,p.jsxs)(fu,{children:[tt.interactionsCount>0&&(0,p.jsxs)(mu,{children:[(0,p.jsx)(gu,{type:"checkbox",id:"deleteInteractions",name:"deleteInteractions",checked:it.deleteInteractions,onChange:_t,disabled:ct}),(0,p.jsxs)("label",{htmlFor:"deleteInteractions",children:["Interactions (",tt.interactionsCount,")"]})]}),tt.emailsCount>0&&(0,p.jsxs)(mu,{children:[(0,p.jsx)(gu,{type:"checkbox",id:"deleteEmails",name:"deleteEmails",checked:it.deleteEmails,onChange:_t,disabled:ct}),(0,p.jsxs)("label",{htmlFor:"deleteEmails",children:["Emails (",tt.emailsCount,")"]})]})]})}),(0,p.jsxs)(xu,{children:[(0,p.jsx)(yu,{onClick:kt,disabled:ct,theme:v,children:ct?"Deleting...":"Delete Selected Items"}),(0,p.jsx)(bu,{onClick:function(){return Jn(!1)},disabled:ct,theme:v,children:"Cancel"})]})]})]}),(0,p.jsxs)(jt(),{isOpen:G,onRequestClose:function(){return W(!1)},shouldCloseOnOverlayClick:!0,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"25px",maxWidth:"400px",width:"90%",backgroundColor:"light"===v?"#FFFFFF":"#1F2937",border:"1px solid ".concat("light"===v?"#E5E7EB":"#374151"),borderRadius:"12px",color:"light"===v?"#111827":"#F9FAFB",zIndex:1001},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:1e3}},children:[(0,p.jsxs)(Bu,{theme:v,children:[(0,p.jsx)("h3",{children:"Select Email Address"}),(0,p.jsx)(Su,{theme:v,onClick:function(){return W(!1)},children:"✕"})]}),(0,p.jsx)(Ou,{children:null==A||null===(y=A.emails)||void 0===y?void 0:y.map((function(n,t){return(0,p.jsxs)(Du,{theme:v,onClick:function(){return t=n.email,window.open("mailto:".concat(t),"_self"),void W(!1);var t},children:[(0,p.jsx)(zu,{children:(0,p.jsx)(Ft.maD,{})}),(0,p.jsxs)(Iu,{children:[(0,p.jsxs)(Tu,{theme:v,children:[n.email,n.is_primary&&(0,p.jsx)(Pu,{theme:v,children:"Primary"})]}),(0,p.jsx)($u,{theme:v,children:n.type||"Email"})]})]},t)}))})]}),(0,p.jsxs)(jt(),{isOpen:L,onRequestClose:function(){return Y(!1)},shouldCloseOnOverlayClick:!0,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"25px",maxWidth:"400px",width:"90%",backgroundColor:"light"===v?"#FFFFFF":"#1F2937",border:"1px solid ".concat("light"===v?"#E5E7EB":"#374151"),borderRadius:"12px",color:"light"===v?"#111827":"#F9FAFB",zIndex:1001},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:1e3}},children:[(0,p.jsxs)(Bu,{theme:v,children:[(0,p.jsx)("h3",{children:"Select Phone Number"}),(0,p.jsx)(Su,{theme:v,onClick:function(){return Y(!1)},children:"✕"})]}),(0,p.jsx)(Ou,{children:null==A||null===(b=A.mobiles)||void 0===b?void 0:b.map((function(n,t){return(0,p.jsxs)(Du,{theme:v,onClick:function(){return t=n.mobile.replace(/\D/g,""),window.open("https://wa.me/".concat(t),"_blank"),void Y(!1);var t},children:[(0,p.jsx)(zu,{children:(0,p.jsx)(Ft.Cab,{})}),(0,p.jsxs)(Iu,{children:[(0,p.jsxs)(Tu,{theme:v,children:[n.mobile,n.is_primary&&(0,p.jsx)(Pu,{theme:v,children:"Primary"})]}),(0,p.jsxs)($u,{theme:v,children:[n.type||"Mobile"," • WhatsApp"]})]})]},t)}))})]}),(0,p.jsx)(jt(),{isOpen:H,onRequestClose:function(){return Z(!1)},shouldCloseOnOverlayClick:!0,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",maxWidth:"800px",width:"90%",maxHeight:"90vh",backgroundColor:"light"===v?"#FFFFFF":"#1F2937",border:"1px solid ".concat("light"===v?"#E5E7EB":"#374151"),borderRadius:"12px",color:"light"===v?"#111827":"#F9FAFB",zIndex:1001,overflow:"hidden",display:"flex",flexDirection:"column"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:1e3}},children:nn?(0,p.jsxs)(dd,{children:[(0,p.jsx)(eu,{}),(0,p.jsx)("span",{children:"Loading email details..."})]}):V?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(hd,{theme:v,children:[(0,p.jsx)(pd,{theme:v,children:V.subject||"(No Subject)"}),(0,p.jsx)(fd,{theme:v,onClick:function(){return Z(!1)},children:"×"})]}),(0,p.jsx)(md,{theme:v,children:(0,p.jsx)(gd,{theme:v,children:V.body_plain||V.body_html||"(No message content)"})})]}):(0,p.jsx)(dd,{children:(0,p.jsx)("span",{children:"No email details available"})})}),(0,p.jsx)(jt(),{isOpen:In,onRequestClose:function(){return Tn(!1)},shouldCloseOnOverlayClick:!0,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",maxWidth:"600px",width:"90%",maxHeight:"90vh",backgroundColor:"light"===v?"#FFFFFF":"#1F2937",border:"1px solid ".concat("light"===v?"#E5E7EB":"#374151"),borderRadius:"12px",color:"light"===v?"#111827":"#F9FAFB",zIndex:1002,overflow:"hidden",display:"flex",flexDirection:"column"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:1001}},children:(0,p.jsx)(Od,{theme:v,contact:A,contactCities:wn,onCityAdded:function(n){pt()},onCityRemoved:function(n){pt()},onClose:function(){return Tn(!1)}})}),(0,p.jsx)(jt(),{isOpen:Pn,onRequestClose:function(){return qn(!1)},shouldCloseOnOverlayClick:!0,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",background:"light"===v?"#FFFFFF":"#1F2937",border:"1px solid ".concat("light"===v?"#E5E7EB":"#374151"),borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:1001}},children:(0,p.jsx)(Dd,{theme:v,contact:A,contactTags:_n,onTagAdded:function(n){pt()},onTagRemoved:function(n){pt()},onClose:function(){return qn(!1)}})}),(0,p.jsx)(jt(),{isOpen:Rn,onRequestClose:function(){return Mn(!1)},style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",border:"none",borderRadius:"12px",boxShadow:"light"===v?"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)":"0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2)",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"hidden",background:"light"===v?"#FFFFFF":"#1F2937"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1100}},children:(0,p.jsx)(bh,{theme:v,contact:A,contactCompanies:Cn,onCompanyAdded:wt,onCompanyRemoved:wt,onClose:function(){return Mn(!1)},onCreateNewCompany:function(n){Mn(!1),Un(!0),Kn(n)}})}),(0,p.jsx)(jt(),{isOpen:Wn,onRequestClose:function(){return Un(!1)},style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",border:"none",borderRadius:"12px",boxShadow:"light"===v?"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)":"0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2)",maxWidth:"700px",width:"90%",maxHeight:"90vh",overflow:"hidden",background:"light"===v?"#FFFFFF":"#1F2937"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1100}},children:(0,p.jsx)(vh,{theme:v,contact:A,onCompanyCreated:function(n){A&&n&&wt(),Un(!1)},onClose:function(){Un(!1),Kn("")},prefilledName:Yn})})]}):(0,p.jsx)(jl,{theme:v,children:(0,p.jsx)(iu,{children:(0,p.jsx)(ou,{theme:v,children:"Contact not found"})})})};function hp(n){return hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hp(n)}var pp,fp,mp,gp,xp,yp,bp,vp,Fp,wp,jp,Ap,_p,kp,Ep;function Cp(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function Bp(){Bp=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(n,t,e,r){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r})}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function l(t,e,r,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype);return s(a,"_invoke",function(t,e,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:n,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=F(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=u(t,e,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new A(i||[])),!0),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};s(m,o,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(_([])));x&&x!==e&&r.call(x,o)&&(m=x);var y=f.prototype=h.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function v(n,t){function e(i,o,a,c){var s=u(n[i],n,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==hp(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):t.resolve(d).then((function(n){l.value=n,a(l)}),(function(n){return e("throw",n,a,c)}))}c(s.arg)}var i;s(this,"_invoke",(function(n,r){function o(){return new t((function(t,i){e(n,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function F(t,e){var r=e.method,i=t.i[r];if(i===n)return e.delegate=null,"throw"===r&&t.i.return&&(e.method="return",e.arg=n,F(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=u(i,t.i,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.r]=a.value,e.next=t.n,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){this.tryEntries.push(n)}function j(t){var e=t[4]||{};e.type="normal",e.arg=n,t[4]=e}function A(n){this.tryEntries=[[-1]],n.forEach(w,this),this.reset(!0)}function _(t){if(null!=t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(hp(t)+" is not iterable")}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,s(n,c,"GeneratorFunction")),n.prototype=Object.create(y),n},t.awrap=function(n){return{__await:n}},b(v.prototype),s(v.prototype,a,(function(){return this})),t.AsyncIterator=v,t.async=function(n,e,r,i,o){void 0===o&&(o=Promise);var a=new v(l(n,e,r,i),o);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),s(y,c,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}},t.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0][4];if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n){a.type="throw",a.arg=t,e.next=n}for(var i=e.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],c=this.prev,s=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!s&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<s)return this.method="next",this.arg=n,r(s),!0;if(c<l)return r(l),!1}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===n||"continue"===n)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=n,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[2]===n)return this.complete(e[4],e[3]),j(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e[0]===n){var r=e[4];if("throw"===r.type){var i=r.arg;j(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={i:_(t),r:e,n:r},"next"===this.method&&(this.arg=n),d}},t}function Sp(n,t,e,r,i,o,a){try{var c=n[o](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,i)}function Op(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){Sp(o,r,i,a,c,"next",n)}function c(n){Sp(o,r,i,a,c,"throw",n)}a(void 0)}))}}function Dp(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return zp(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?zp(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zp(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}var Ip=c.Ay.div(pp||(pp=Cp(["\n  min-height: 100vh;\n  background: ",";\n  transition: background-color 0.3s ease;\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"})),Tp=c.Ay.div(fp||(fp=Cp(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),$p=c.Ay.div(mp||(mp=Cp(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 24px;\n  transition: all 0.3s ease;\n"])),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"})),Pp=c.Ay.div(gp||(gp=Cp(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  margin-bottom: 24px;\n"]))),qp=c.Ay.div(xp||(xp=Cp(["\n  display: flex;\n  align-items: center;\n"]))),Np=c.Ay.button(yp||(yp=Cp(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background: transparent;\n  border: 1px solid ",";\n  border-radius: 8px;\n  color: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  font-weight: 500;\n\n  &:hover {\n    background: ",";\n    border-color: ",";\n    color: ",";\n  }\n\n  svg {\n    font-size: 12px;\n  }\n"])),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#9CA3AF":"#6B7280"}),(function(n){return"light"===n.theme?"#374151":"#F3F4F6"})),Rp=c.Ay.div(bp||(bp=Cp(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n"]))),Mp=c.Ay.div(vp||(vp=Cp(["\n  flex: 1;\n"]))),Gp=c.Ay.h1(Fp||(Fp=Cp(["\n  font-size: 2rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0;\n  line-height: 1.2;\n\n  @media (max-width: 640px) {\n    font-size: 1.5rem;\n  }\n"])),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"})),Wp=c.Ay.span(wp||(wp=Cp(["\n  color: ",";\n  font-weight: 500;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Up=c.Ay.p(jp||(jp=Cp(["\n  font-size: 1rem;\n  color: ",";\n  margin: 8px 0 0 0;\n  font-weight: 400;\n"])),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"})),Lp=c.Ay.button(Ap||(Ap=Cp(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  border: 1px solid ",";\n  background: ",";\n  color: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n\n  ","\n\n  &:hover:not(:disabled) {\n    background: ",";\n    border-color: ",";\n    color: ",";\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n"])),(function(n){return"light"===n.theme?"#E5E7EB":"#374151"}),(function(n){return"light"===n.theme?"#FFFFFF":"#1F2937"}),(function(n){return"light"===n.theme?"#6B7280":"#9CA3AF"}),(function(n){return n.$isRefreshing&&"\n    animation: spin 1s linear infinite;\n  "}),(function(n){return"light"===n.theme?"#F9FAFB":"#374151"}),(function(n){return"light"===n.theme?"#D1D5DB":"#4B5563"}),(function(n){return"light"===n.theme?"#374151":"#F3F4F6"})),Yp=c.Ay.div(_p||(_p=Cp(["\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n"]))),Kp=c.Ay.button(kp||(kp=Cp(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  border-radius: 12px;\n  border: none;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 14px;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n\n  ","\n\n  svg {\n    font-size: 12px;\n  }\n"])),(function(n){return n.$active?"\n    background: ".concat("light"===n.theme?"#EFF6FF":"#1E3A8A",";\n    color: ").concat("light"===n.theme?"#1D4ED8":"#DBEAFE",";\n  "):"\n    background: ".concat("light"===n.theme?"#F3F4F6":"#374151",";\n    color: ").concat("light"===n.theme?"#6B7280":"#9CA3AF",";\n\n    &:hover {\n      background: ").concat("light"===n.theme?"#E5E7EB":"#4B5563",";\n      color: ").concat("light"===n.theme?"#374151":"#F3F4F6",";\n    }\n  ")})),Hp=c.Ay.div(Ep||(Ep=Cp(["\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n"])));const Zp=function(n){var t,e,i=n.theme,a=(0,o.Zp)(),c=(0,o.g)().cityId,u=(0,o.zy)(),d=Dp((0,r.useState)(!1),2),h=d[0],f=d[1],m=Dp((0,r.useState)("last_interaction"),2),g=m[0],x=m[1],y=Dp((0,r.useState)([]),2),b=y[0],v=y[1],F=Dp((0,r.useState)(!0),2),w=F[0],j=F[1],A=Dp((0,r.useState)(null),2),_=A[0],k=A[1],E=(null===(t=u.state)||void 0===t?void 0:t.cityName)||"Unknown City",C=null===(e=u.state)||void 0===e?void 0:e.contactId,B=function(){var n=Op(Bp().mark((function n(){var t,e,r;return Bp().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,vt.from("cities").select("*").eq("city_id",c).single();case 5:if(t=n.sent,e=t.data,!(r=t.error)){n.next=10;break}throw r;case 10:k(e),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),console.error("Error fetching city info:",n.t0);case 16:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(){return n.apply(this,arguments)}}(),S=function(){var n=Op(Bp().mark((function n(){var t,e,r,i,o,a;return Bp().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c){n.next=2;break}return n.abrupt("return");case 2:return j(!0),n.prev=3,e=vt.from("contacts").select("\n          *,\n          contact_emails (email, type, is_primary),\n          contact_mobiles (mobile, type, is_primary),\n          contact_companies (\n            company_id,\n            relationship,\n            is_primary,\n            companies (name, website, category)\n          ),\n          contact_tags (\n            tags (name)\n          ),\n          contact_cities!inner (\n            cities!inner (city_id, name, country)\n          )\n        ").eq("contact_cities.cities.city_id",c).not("category","in",'("Skip","WhatsApp Group Contact","System","Not Set","Inbox")').not("last_interaction_at","is",null),"last_interaction"===g?e=e.order("last_interaction_at",{ascending:!1,nullsLast:!0}):"rating"===g&&(e=e.order("score",{ascending:!1,nullsLast:!0})),n.next=8,e;case 8:if(r=n.sent,i=r.data,!(o=r.error)){n.next=13;break}throw o;case 13:a=i||[],"rating"===g&&(a=a.sort((function(n,t){var e=n.score,r=t.score;return null===e&&null===r?0:null===e?1:null===r?-1:0===e&&0===r?0:0===e&&r>0?1:0===r&&e>0?-1:r-e}))),console.log("Found ".concat((null===(t=a)||void 0===t?void 0:t.length)||0," contacts in city ").concat(E)),v(a),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(3),console.error("Error fetching city contacts:",n.t0),s.oR.error("Failed to load city contacts");case 23:return n.prev=23,j(!1),n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[3,19,23,26]])})));return function(){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){B(),S()}),[c,g]);var O=function(){var n=Op(Bp().mark((function n(){return Bp().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f(!0),n.next=3,S();case 3:setTimeout((function(){return f(!1)}),1e3);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),D=[{key:"last_interaction",label:"Last Interaction",icon:(0,p.jsx)(l.Ohp,{})},{key:"rating",label:"Star Rating",icon:(0,p.jsx)(Ft.gt3,{})}],z=(null==_?void 0:_.name)||E,I=null==_?void 0:_.country;return(0,p.jsx)(Ip,{theme:i,children:(0,p.jsxs)(Tp,{children:[(0,p.jsxs)($p,{theme:i,children:[(0,p.jsxs)(Pp,{children:[(0,p.jsx)(qp,{children:(0,p.jsxs)(Np,{theme:i,onClick:function(){C?a("/contact/".concat(C),{state:{activeTab:"Related",activeRelatedTab:"Contacts"}}):a(-1)},children:[(0,p.jsx)(Ft.QVr,{}),(0,p.jsx)("span",{children:"Back"})]})}),(0,p.jsxs)(Rp,{children:[(0,p.jsxs)(Mp,{children:[(0,p.jsxs)(Gp,{theme:i,children:["📍 ",z,I&&"Unknown"!==I&&(0,p.jsxs)(Wp,{theme:i,children:[", ",I]})]}),(0,p.jsxs)(Up,{theme:i,children:[b.length," contacts in this city"]})]}),(0,p.jsx)(Lp,{theme:i,onClick:O,disabled:h,$isRefreshing:h,children:(0,p.jsx)(Ft.DIg,{})})]})]}),(0,p.jsx)(Yp,{theme:i,children:D.map((function(n){return(0,p.jsxs)(Kp,{theme:i,$active:g===n.key,onClick:function(){return x(n.key)},children:[n.icon,(0,p.jsx)("span",{children:n.label})]},n.key)}))})]}),(0,p.jsx)(Hp,{children:(0,p.jsx)(_e,{contacts:b,loading:w,theme:i,emptyStateConfig:{icon:"📍",title:"No contacts in ".concat(z),text:"No contacts found for this city."},onContactUpdate:S,showActions:!0,badgeType:"rating"===g?"category":"time"})})]})})};var Jp,Vp,Qp,Xp;function nf(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,c=[],s=!0,l=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;s=!1}else for(;!(s=(r=o.call(e)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(n){l=!0,i=n}finally{try{if(!s&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return tf(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?tf(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tf(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function ef(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}var rf=(0,c.DU)(Jp||(Jp=ef(["\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n\n  body {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n    background: ",";\n    color: ",";\n    transition: background-color 0.3s ease, color 0.3s ease;\n    overflow-x: hidden;\n  }\n\n  #root {\n    min-height: 100vh;\n  }\n\n  /* Custom scrollbar */\n  ::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n  }\n\n  ::-webkit-scrollbar-track {\n    background: ",";\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: ",";\n    border-radius: 3px;\n  }\n\n  ::-webkit-scrollbar-thumb:hover {\n    background: ",";\n  }\n\n  /* Disable text selection on UI elements */\n  button, nav, .nav-item {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n"])),(function(n){return"light"===n.theme?"#F9FAFB":"#111827"}),(function(n){return"light"===n.theme?"#111827":"#F9FAFB"}),(function(n){return"light"===n.theme?"#F3F4F6":"#374151"}),(function(n){return"light"===n.theme?"#D1D5DB":"#6B7280"}),(function(n){return n.theme,"#9CA3AF"})),of=c.Ay.div(Vp||(Vp=ef(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n"]))),af=c.Ay.main(Qp||(Qp=ef(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n\n  /* Mobile: Add bottom padding for mobile nav */\n  @media (max-width: 767px) {\n    padding-bottom: 80px;\n  }\n\n  /* Tablet: Add left margin for side nav */\n  @media (min-width: 768px) and (max-width: 1024px) {\n    margin-left: 280px !important;\n  }\n\n  /* Desktop: Add left margin for side nav */\n  @media (min-width: 1025px) {\n    margin-left: "," !important;\n    transition: margin-left 0.3s ease;\n  }\n"])),(function(n){return n.$navCollapsed?"80px":"320px"})),cf=c.Ay.div(Xp||(Xp=ef(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n\n  @media (max-width: 767px) {\n    min-height: calc(100vh - 80px);\n  }\n"]))),sf=function(){var n,t=nf((0,r.useState)((function(){return localStorage.getItem("crm-theme")||"light"})),2),e=t[0],i=t[1],a=nf((0,r.useState)((function(){var n=localStorage.getItem("crm-nav-collapsed");return!!n&&"true"===n})),2),c=a[0],l=a[1],u=nf((0,r.useState)(0),2),d=u[0],h=u[1],f=nf((0,r.useState)(0),2),m=f[0],g=f[1],x=(0,o.zy)(),y=(0,o.Zp)(),b=(n=x.pathname).includes("/sort")?"sort":n.includes("/interactions")?"interactions":n.includes("/search")?"search":n.includes("/keep-in-touch")?"keep-in-touch":"sort";return(0,r.useEffect)((function(){var n=function(n){l(n.detail.collapsed),localStorage.setItem("crm-nav-collapsed",n.detail.collapsed.toString())};return window.addEventListener("navCollapseChange",n),function(){return window.removeEventListener("navCollapseChange",n)}}),[]),(0,p.jsxs)(of,{theme:e,children:[(0,p.jsx)(rf,{theme:e}),(0,p.jsx)(Cn,{currentPage:b,onNavigate:function(n,t){y(t)},theme:e,onThemeToggle:function(){var n="light"===e?"dark":"light";i(n),localStorage.setItem("crm-theme",n)},onCollapseChange:l,initialCollapsed:c,inboxCount:d,keepInTouchCount:m}),(0,p.jsx)(af,{$navCollapsed:c,style:{marginLeft:window.innerWidth>=1025?c?"80px":"320px":window.innerWidth>=768?"280px":"0"},children:(0,p.jsx)(cf,{children:(0,p.jsxs)(o.BV,{children:[(0,p.jsx)(o.qh,{path:"/",element:(0,p.jsx)(o.C5,{to:"/sort",replace:!0})}),(0,p.jsx)(o.qh,{path:"/sort",element:(0,p.jsx)(sr,{theme:e,onInboxCountChange:h})}),(0,p.jsx)(o.qh,{path:"/interactions",element:(0,p.jsx)(Gr,{theme:e})}),(0,p.jsx)(o.qh,{path:"/search",element:(0,p.jsx)(Ni,{theme:e})}),(0,p.jsx)(o.qh,{path:"/keep-in-touch",element:(0,p.jsx)(Eo,{theme:e,onKeepInTouchCountChange:g})}),(0,p.jsx)(o.qh,{path:"/contact/:contactId",element:(0,p.jsx)(dp,{theme:e})}),(0,p.jsx)(o.qh,{path:"/city/:cityId/contacts",element:(0,p.jsx)(Zp,{theme:e})}),(0,p.jsx)(o.qh,{path:"*",element:(0,p.jsx)(o.C5,{to:"/sort",replace:!0})})]})})}),(0,p.jsx)(s.l$,{position:"top-center",toastOptions:{style:{background:"light"===e?"#FFFFFF":"#1F2937",color:"light"===e?"#111827":"#F9FAFB",border:"1px solid ".concat("light"===e?"#E5E7EB":"#374151"),borderRadius:"8px",fontSize:"14px",maxWidth:"500px"},success:{duration:3e3,iconTheme:{primary:"light"===e?"#10B981":"#34D399",secondary:"light"===e?"#FFFFFF":"#1F2937"}},error:{duration:4e3,iconTheme:{primary:"light"===e?"#EF4444":"#F87171",secondary:"light"===e?"#FFFFFF":"#1F2937"}}}})]})};const lf=function(){console.log("NewCRMApp component rendering...");try{return(0,p.jsx)(a.Kd,{basename:"/new-crm",children:(0,p.jsx)(sf,{})})}catch(n){return console.error("Error in NewCRMApp:",n),(0,p.jsxs)("div",{style:{padding:"20px",color:"red"},children:["Error loading CRM: ",n.message]})}};console.log("New CRM app starting..."),i.createRoot(document.getElementById("root")).render((0,p.jsx)(lf,{})),console.log("New CRM app rendered")}},n=>{n.O(0,[96],(()=>n(n.s=7944))),n.O()}]);
//# sourceMappingURL=main.21a8ce50.js.map